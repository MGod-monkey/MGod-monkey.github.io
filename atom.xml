<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MGodmonkeyã®ä¸–ç•Œ</title>
  
  <subtitle>ä¸åœ¨æ²‰é»˜ä¸­æ²‰æ²¦</subtitle>
  <link href="https://www.mgodmonkey.cn/atom.xml" rel="self"/>
  
  <link href="https://www.mgodmonkey.cn/"/>
  <updated>2024-12-03T15:30:45.995Z</updated>
  <id>https://www.mgodmonkey.cn/</id>
  
  <author>
    <name>MGodmonkey</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç”²ä¹™åè®®ä¹¦</title>
    <link href="https://www.mgodmonkey.cn/posts/d38e303b.html"/>
    <id>https://www.mgodmonkey.cn/posts/d38e303b.html</id>
    <published>2024-12-03T15:25:42.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h2 id="ğŸ’•ç”²æ–¹è¦æ±‚ï¼š">ğŸ’•ç”²æ–¹è¦æ±‚ï¼š</h2><h4 id="1ï¸âƒ£ä¸å¯ä»¥ä¸ç®¡ä¸é¡¾ï¼Œè‡ªå·±ç¡å¤§è§‰ï¼Œä¸å¯ä»¥ä¸æŠŠç”²æ–¹ï¼ˆè“‰å®ï¼‰å½“ä¸€å›äº‹ï¼Œè¦é«˜åº¦é‡è§†">1ï¸âƒ£ä¸å¯ä»¥ä¸ç®¡ä¸é¡¾ï¼Œè‡ªå·±ç¡å¤§è§‰ï¼Œä¸å¯ä»¥ä¸æŠŠç”²æ–¹ï¼ˆè“‰å®ï¼‰å½“ä¸€å›äº‹ï¼Œè¦é«˜åº¦é‡è§†</h4><h4 id="2ï¸âƒ£å‡ºç°é—®é¢˜ï¼ŒåŠæ—¶ä¸»åŠ¨æ²Ÿé€šä¸ç”²æ–¹ï¼ˆè“‰å®ï¼‰å¤„ç†é—®é¢˜å¹¶é‡‡å–æªæ–½ï¼Œä¸å¯ä»¥è‡ªå·±å†…è€—ğŸ™…âŒ">2ï¸âƒ£å‡ºç°é—®é¢˜ï¼ŒåŠæ—¶ä¸»åŠ¨æ²Ÿé€šä¸ç”²æ–¹ï¼ˆè“‰å®ï¼‰å¤„ç†é—®é¢˜å¹¶é‡‡å–æªæ–½ï¼Œä¸å¯ä»¥è‡ªå·±å†…è€—ğŸ™…âŒ</h4><h4 id="3ï¸âƒ£ä¸å¯ä»¥æœ‰æ”¾å¼ƒçš„å¿µå¤´å’Œæƒ³æ³•ğŸ’¡ï¼Œç™¾åˆ†ä¹‹äº”åéƒ½ä¸å¯ä»¥">3ï¸âƒ£ä¸å¯ä»¥æœ‰æ”¾å¼ƒçš„å¿µå¤´å’Œæƒ³æ³•ğŸ’¡ï¼Œç™¾åˆ†ä¹‹äº”åéƒ½ä¸å¯ä»¥</h4><h4 id="4ï¸âƒ£ä¸å¯ä»¥æœ‰éš”å¤œä»‡ï¼Œå½“å¤©ç«‹é©¬è§£å†³ã€‚å®åœ¨å¤ªæ™šå¯ä»¥è¾¾æˆç¬¬äºŒå¤©å†è¯´çš„å…±è¯†ï¼ˆä¸åˆ°ä¸‡ä¸å¾—å·²ä¸å¯ä½¿ç”¨ğŸ¤¦ğŸ»ï¼‰">4ï¸âƒ£ä¸å¯ä»¥æœ‰éš”å¤œä»‡ï¼Œå½“å¤©ç«‹é©¬è§£å†³ã€‚å®åœ¨å¤ªæ™šå¯ä»¥è¾¾æˆç¬¬äºŒå¤©å†è¯´çš„å…±è¯†ï¼ˆä¸åˆ°ä¸‡ä¸å¾—å·²ä¸å¯ä½¿ç”¨ğŸ¤¦ğŸ»ï¼‰</h4><h2 id="ğŸ’–ä¹™æ–¹è¦æ±‚ï¼š">ğŸ’–ä¹™æ–¹è¦æ±‚ï¼š</h2><h4 id="1ï¸âƒ£ç”Ÿæ°”æ—¶ä¸èƒ½å¤ªå‡¶ï¼Œä¸èƒ½æ˜¯å¤±å»ç†æ™ºçš„é‚£ç§ï¼Œè¯´å¤ªå¤šè„è¯ï¼Œä¸èƒ½è€æ˜¯é˜´é˜³æ€ªæ°”ï¼ˆé‰´äºä¹™æ–¹è¦æ±‚å¤ªå°‘ï¼Œä»¥åå¯éšæ—¶æå‡ºä¿®æ”¹å¢åŠ ï¼‰">1ï¸âƒ£ç”Ÿæ°”æ—¶ä¸èƒ½å¤ªå‡¶ï¼Œä¸èƒ½æ˜¯å¤±å»ç†æ™ºçš„é‚£ç§ï¼Œè¯´å¤ªå¤šè„è¯ï¼Œä¸èƒ½è€æ˜¯é˜´é˜³æ€ªæ°”ï¼ˆé‰´äºä¹™æ–¹è¦æ±‚å¤ªå°‘ï¼Œä»¥åå¯éšæ—¶æå‡ºä¿®æ”¹å¢åŠ ï¼‰</h4><p>â¤ï¸â€ğŸ”¥<strong>ç”²æ–¹ï¼šæ¨ä¸½è“‰</strong><br>â¤ï¸â€ğŸ”¥<strong>ä¹™æ–¹ï¼šå´ä½©é’¦</strong></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;h2 id=&quot;ğŸ’•ç”²æ–¹è¦æ±‚ï¼š&quot;&gt;ğŸ’•ç”²æ–¹è¦æ±‚ï¼š&lt;/h2&gt;
&lt;h4 id=&quot;1ï¸âƒ£ä¸å¯ä»¥ä¸ç®¡ä¸é¡¾ï¼Œè‡ªå·±ç¡å¤§è§‰ï¼Œä¸å¯ä»¥ä¸æŠŠç”²æ–¹ï¼ˆè“‰å®ï¼‰å½“ä¸€å›äº‹ï¼Œè¦é«˜åº¦é‡è§†&quot;&gt;1ï¸âƒ£ä¸å¯ä»¥ä¸ç®¡ä¸é¡¾ï¼Œè‡ªå·±ç¡å¤§è§‰ï¼Œä¸å¯ä»¥ä¸æŠŠç”²æ–¹ï¼ˆè“‰å®ï¼‰å½“ä¸€å›äº‹ï¼Œè¦é«˜åº¦é‡è§†&lt;/h4&gt;
&lt;h4 i</summary>
      
    
    
    
    <category term="è‡´æ­‰ä¿¡" scheme="https://www.mgodmonkey.cn/categories/%E8%87%B4%E6%AD%89%E4%BF%A1/"/>
    
    
    <category term="è‡´æ­‰ä¿¡" scheme="https://www.mgodmonkey.cn/tags/%E8%87%B4%E6%AD%89%E4%BF%A1/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºå°å®‰æ´¾AiPi-Eyes-Rxçš„Nåˆ1è§¦æ‘¸å±æ¸¸æˆ</title>
    <link href="https://www.mgodmonkey.cn/posts/e1d2cb7c.html"/>
    <id>https://www.mgodmonkey.cn/posts/e1d2cb7c.html</id>
    <published>2024-09-25T03:15:37.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<p>æ¸¸æˆå‡ç§»æ¤è‡ªï¼š<a href="https://space.bilibili.com/344482629"><strong>ã€è€è™çˆ±3D-bilibiliã€‘</strong></a>ï¼ˆè¿™ä½æ˜¯çœŸå¤§ä½¬ï¼Œæˆ‘åªæ˜¯å¤§è‡ªç„¶çš„æ¬è¿å·¥ï¼Œå¹¶åšé€‚é…ï¼‰</p><p>ç›®å‰å­˜åœ¨çš„æ¸¸æˆï¼š</p><ul><li>æ¤ç‰©å¤§æˆ˜åƒµå°¸ï¼š<code>demos/pvz</code></li><li>ç¾Šäº†ä¸ªç¾Šï¼š<code>demos/yang</code></li><li>æ¶ˆæ¶ˆä¹ï¼š<code>demos/xiaoxiaole</code></li><li>åå®¹é“ï¼š<code>demos/huarongdao</code></li></ul><p>PVZåŠŸèƒ½å±•ç¤ºå¯è§ï¼š</p><div align=center class="video">    <iframe src="//player.bilibili.com/player.html?isOutside=true&aid=113174703513154&bvid=BV1oRtkeVEXW&cid=25674586199&p=1&autoplay=0&high_quality=1"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div><p>ç¾Šäº†ä¸ªç¾Šï¼š</p><p><img src="https://s2.loli.net/2024/09/24/ZHpGJSmoEvK6WNe.png" alt=""></p><p><img src="https://s2.loli.net/2024/09/24/8p2iKJGkPU5saVE.png" alt="image-20240924173240903"></p><p>æ¶ˆæ¶ˆä¹ï¼š</p><p><img src="https://s2.loli.net/2024/09/24/zFwNIgXlMTo7tDS.png" alt="image-20240924173318883"></p><p>åå®¹é“ï¼š</p><p><img src="https://s2.loli.net/2024/09/24/YS9oLu5tZzFwUCb.png" alt="image-20240924173401211"></p><hr><p>åŸºäº<a href="https://gitee.com/Ai-Thinker-Open/AiPi-Open-Kits/tree/master/AiPi-Eyes-Rx">å®˜æ–¹ç¤ºä¾‹æ–‡æ¡£</a>ä¿®æ”¹çš„ï¼Œé€‚ç”¨äº4å¯¸ç”µå®¹å±çš„å°å®‰æ´¾R1å’ŒR2ï¼ŒR1å’ŒR2çš„åŒºåˆ«å’Œä¿®æ”¹å¦‚ä¸‹ï¼š</p><blockquote><p><strong>å°å®‰æ´¾ - Eyes-R1 å¸¦å¤–ç½® ES8388 éŸ³é¢‘èŠ¯ç‰‡ï¼Œæ”¯æŒä¸¤è·¯éŸ³é¢‘è¾“å…¥è¾“å‡ºã€‚</strong></p><p><strong>å°å®‰æ´¾ - Eyes-R2 é‡‡ç”¨å†…ç½® CodeCï¼Œæ”¯æŒå•è·¯éŸ³é¢‘è¾“å…¥è¾“å‡ºã€‚</strong></p></blockquote><blockquote><p>å¦‚æœæ˜¯ç¼–è¯‘å¸¦8388çš„å¼€å‘æ¿ï¼ˆAiPi-Eyes-R1ï¼‰éœ€è¦é…ç½®å¦‚ä¸‹å‚æ•°</p><ul><li><p>ä¿®æ”¹ <code>app_main.h</code> #define DEF_USER_ES8388_EN (1)</p></li><li><p>ä¿®æ”¹<code>proj.conf</code></p></li><li><p>set(CONFIG_SOLUTION_FUNC_AUDIO_AUADC 0)â€‹ set(CONFIG_SOLUTION_FUNC_AUDIO_AUDAC 0)</p></li></ul><p>å¦‚æœæ˜¯ç¼–è¯‘ä¸å¸¦8388çš„å¼€å‘æ¿ï¼ˆAiPi-Eyes-R2ï¼‰éœ€è¦é…ç½®å¦‚ä¸‹å‚æ•°</p><ul><li><p>ä¿®æ”¹ <code>app_main.h</code> #define DEF_USER_ES8388_EN (0)</p></li><li><p>ä¿®æ”¹ <code>proj.conf</code></p></li><li><p>set(CONFIG_SOLUTION_FUNC_AUDIO_AUADC 1)â€‹ set(CONFIG_SOLUTION_FUNC_AUDIO_AUDAC 1)</p></li></ul></blockquote><h2 id="1-ç¡¬ä»¶è¯´æ˜">1.ç¡¬ä»¶è¯´æ˜</h2><p>ç¡¬ä»¶ä»…ç”¨åˆ°äº†ï¼š</p><ul><li>å°å®‰æ´¾Rx</li><li>4å¯¸ 480*480åƒç´ çš„ç”µå®¹å±</li><li>TTLä¸‹è½½å™¨</li></ul><p><img src="https://s2.loli.net/2024/09/24/m9SecXJMLV8vUB5.png" alt="image-20240924174107397"></p><h2 id="2-è½¯ä»¶è¯´æ˜">2.è½¯ä»¶è¯´æ˜</h2><p>ä¿®æ”¹<code>demos/lv_demos.h</code>å³å¯ä½“éªŒä¸åŒçš„æ¸¸æˆï¼ˆä¸€æ¬¡åªèƒ½è®¾ç½®ä¸€ä¸ªæ¸¸æˆä¸º1ç„¶åç¼–è¯‘ï¼‰</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> LV_USE_GAME_PVZ 0</span></span><br><span class="line"><span class="comment">// #define LV_USE_GAME_2048 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LV_USE_GAME_YANG 1</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LV_USE_GAME_XIAOXIAOLE 0</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LV_USE_GAME_HUARONGDAO 0</span></span><br></pre></td></tr></table></figure><p><code>main.c</code>ä¸»ç¨‹åºè¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>lvglä»»åŠ¡çº¿ç¨‹å‡½æ•°</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">user_task</span><span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    lv_task_handler();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[LVGL] init success \r\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">        lv_task_handler();</span><br><span class="line">        bflb_mtimer_delay_ms(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆè¯•åŒ–lvgl</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* lvgl init */</span></span><br><span class="line">lv_init();</span><br><span class="line">lv_port_disp_init();<span class="comment">//åˆè¯•åŒ–æ˜¾ç¤ºå±</span></span><br><span class="line">lv_port_indev_init();   <span class="comment">//åˆè¯•åŒ–è§¦æ‘¸æ¥å£</span></span><br></pre></td></tr></table></figure><ul><li>æ ¹æ®å®šä¹‰ï¼Œè®¾ç½®ä¸åŒçš„åˆè¯•æ¸¸æˆå‡½æ•°ï¼ˆ2048ç­‰å¾…åç»­ç§»æ¤ï¼‰</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> LV_USE_GAME_PVZ</span></span><br><span class="line">    pvz_start()</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> LV_USE_GAME_2048</span></span><br><span class="line">    <span class="comment">// 2048_start();</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> LV_USE_GAME_YANG</span></span><br><span class="line">    yang_game();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> LV_USE_GAME_XIAOXIAOLE</span></span><br><span class="line">    xiaoxiaole();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> LV_USE_GAME_HUARONGDAO</span></span><br><span class="line">    huarongdao();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><p>ç®€å•è§£æä¸€ä¸‹<code>xiaoxiaole.c</code>çš„æ¸¸æˆåˆè¯•åŒ–ç¨‹åºï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯lvglåº“ä¸­çš„çŸ¥è¯†ï¼Œæ–‡æ¡£å¯ä»¥è§<a href="https://lvgl.100ask.net/master/index.html">https://lvgl.100ask.net/master/index.html</a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">xiaoxiaole</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®å±å¹•å°ºå¯¸æ¥çµæ´»è®¾ç½®å›¾ç‰‡çš„æ”¾å¤§å€æ•°</span></span><br><span class="line">    <span class="comment">// lv_disp_get_hor_res(lv_disp_get_default())è·å–é»˜è®¤æ˜¾ç¤ºå±çš„æ°´å¹³åƒç´ </span></span><br><span class="line"><span class="keyword">if</span>(lv_disp_get_hor_res(lv_disp_get_default())&gt;=lv_disp_get_ver_res(lv_disp_get_default()))</span><br><span class="line">&#123;screen_ratio=(<span class="type">float</span>)lv_disp_get_ver_res(lv_disp_get_default())/<span class="number">400</span>;&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">screen_ratio=(<span class="type">float</span>)lv_disp_get_hor_res(lv_disp_get_default())/<span class="number">480</span>;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// screen_ratioæ”¾å¤§å€æ•°</span></span><br><span class="line"><span class="comment">// ç§»é™¤å±å¹•æ»šåŠ¨æ¡</span></span><br><span class="line">lv_obj_clear_flag(lv_scr_act(), LV_OBJ_FLAG_SCROLLABLE);</span><br><span class="line"></span><br><span class="line">screen1=lv_tileview_create(lv_scr_act());</span><br><span class="line">lv_obj_set_style_bg_color(screen1,lv_color_hex(<span class="number">0x000000</span>), LV_PART_MAIN);</span><br><span class="line">lv_obj_clear_flag(screen1, LV_OBJ_FLAG_SCROLLABLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//èƒŒæ™¯å›¾ç‰‡ï¼ˆå¦‚æœå¾ˆå¡çš„è¯ï¼ŒæŠŠè¿™ä¸ªèƒŒæ™¯å›¾ç‰‡åˆ æ‰ï¼‰</span></span><br><span class="line"><span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">bgmap=lv_img_create(screen1);</span><br><span class="line">lv_img_set_src(bgmap, &amp;xiaoxiaole_bg_img);</span><br><span class="line">lv_img_set_pivot(bgmap,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">lv_img_set_zoom(bgmap,<span class="number">256</span>*<span class="number">1.5</span>*<span class="number">1.2</span>);</span><br><span class="line">lv_obj_clear_flag(bgmap, LV_OBJ_FLAG_SCROLLABLE);</span><br><span class="line"><span class="comment">///////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ³¨å†Œæ¶ˆæ¶ˆä¹æ»‘å—çª—å£çš„åœ°æ–¹</span></span><br><span class="line">game_window=lv_tileview_create(screen1);</span><br><span class="line">lv_obj_set_style_bg_color(game_window,lv_color_hex(<span class="number">0x000000</span>), LV_PART_MAIN);</span><br><span class="line">lv_obj_set_style_bg_opa(game_window,<span class="number">200</span>, LV_PART_MAIN);</span><br><span class="line">lv_obj_clear_flag(game_window, LV_OBJ_FLAG_SCROLLABLE);</span><br><span class="line">lv_obj_set_style_outline_width(game_window, <span class="number">6</span>, LV_PART_MAIN);</span><br><span class="line">lv_obj_set_style_outline_color(game_window, lv_color_hex(<span class="number">0xbb7700</span>), LV_PART_MAIN);</span><br><span class="line">lv_obj_center(game_window);</span><br><span class="line">lv_obj_set_size(game_window,<span class="number">280</span>*screen_ratio,<span class="number">280</span>*screen_ratio);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰åˆ·æ–°æŒ‰é’®</span></span><br><span class="line">refs_btn=lv_img_create(screen1);</span><br><span class="line">lv_img_set_src(refs_btn, &amp;refs_btn_img);</span><br><span class="line"><span class="comment">// lv_obj_set_align(refs_btn,LV_ALIGN_RIGHT_MID);</span></span><br><span class="line">lv_obj_align(refs_btn,LV_ALIGN_RIGHT_MID,<span class="number">8</span>,<span class="number">0</span>);</span><br><span class="line">lv_obj_add_flag(refs_btn, LV_OBJ_FLAG_CLICKABLE);</span><br><span class="line">lv_obj_add_event_cb(refs_btn,map_refs,LV_EVENT_CLICKED,<span class="number">0</span>);</span><br><span class="line">lv_img_set_zoom(refs_btn, <span class="number">150</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰é€€å‡ºæŒ‰é’®ï¼ˆé€€å‡ºæŒ‰é’®çš„äº‹ä»¶å‡½æ•°è¿˜æ²¡æœ‰ç”¨åˆ°ï¼‰</span></span><br><span class="line">exit_btn=lv_img_create(screen1);</span><br><span class="line">lv_img_set_src(exit_btn, &amp;exit_img);</span><br><span class="line">lv_obj_align(exit_btn,LV_ALIGN_TOP_RIGHT,<span class="number">10</span>,<span class="number">-20</span>);</span><br><span class="line"><span class="comment">// lv_obj_set_align(exit_btn,LV_ALIGN_TOP_RIGHT);</span></span><br><span class="line">lv_obj_add_flag(exit_btn, LV_OBJ_FLAG_CLICKABLE);</span><br><span class="line">lv_obj_add_event_cb(exit_btn,exit_game_cb,LV_EVENT_CLICKED,<span class="number">0</span>);</span><br><span class="line">lv_img_set_zoom(exit_btn, <span class="number">130</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ç¡¬å¸å›¾ç‰‡</span></span><br><span class="line">coin=lv_img_create(screen1);</span><br><span class="line">lv_img_set_src(coin, &amp;coin_img);</span><br><span class="line">lv_img_set_zoom(coin, <span class="number">130</span>);</span><br><span class="line">lv_obj_align(coin,LV_ALIGN_TOP_LEFT,<span class="number">10</span>,<span class="number">-20</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰å¾—åˆ†</span></span><br><span class="line">score=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">score_lable=lv_label_create(screen1);</span><br><span class="line">lv_label_set_text_fmt(score_lable,<span class="string">&quot;SCORE:%d&quot;</span>,score);</span><br><span class="line">lv_obj_set_style_text_font(score_lable,&amp;lv_font_montserrat_20,<span class="number">0</span>);</span><br><span class="line">lv_obj_set_y(score_lable,<span class="number">40</span>);</span><br><span class="line">lv_obj_set_style_text_color(score_lable, lv_color_hex(<span class="number">0x00aaff</span>), LV_PART_MAIN);</span><br><span class="line"></span><br><span class="line">game_init();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">void</span><span class="title function_">game_init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> i, j;</span><br><span class="line">lv_obj_refr_size(game_window);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”Ÿæˆä¸€ä¸ª8*8çš„ä¸åŒé¢œè‰²çš„æ–¹å—</span></span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">8</span>;j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">game_obj[j][i].x=i;</span><br><span class="line">game_obj[j][i].y=j;</span><br><span class="line">game_obj[j][i].alive=<span class="number">1</span>;</span><br><span class="line">game_obj[j][i].color_index=rand()%<span class="number">7</span>;</span><br><span class="line">game_obj[j][i].obj=lv_btn_create(game_window);</span><br><span class="line">lv_obj_set_pos(game_obj[j][i].obj,i*<span class="number">35</span>*screen_ratio+<span class="number">1</span>,j*<span class="number">35</span>*screen_ratio+<span class="number">1</span>);</span><br><span class="line">lv_obj_set_size(game_obj[j][i].obj,<span class="number">35</span>*screen_ratio<span class="number">-2</span>,<span class="number">35</span>*screen_ratio<span class="number">-2</span>);</span><br><span class="line">lv_obj_set_style_bg_color(game_obj[j][i].obj,lv_color_hex(color_lib[game_obj[j][i].color_index]),<span class="number">0</span>);</span><br><span class="line">game_obj[j][i].obj-&gt;user_data=&amp;game_obj[j][i];</span><br><span class="line">lv_obj_add_event_cb(game_obj[j][i].obj,move_obj_cb,LV_EVENT_PRESSING,<span class="number">0</span>);</span><br><span class="line">lv_obj_add_event_cb(game_obj[j][i].obj,move_obj_cb,LV_EVENT_RELEASED,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">// æ¯æ¬¡æ–¹å—å¡«æ»¡éƒ½ä¼šè¿›è¡Œæ£€æµ‹ï¼Œæ˜¯å¦æœ‰å¯ä»¥æ¶ˆé™¤çš„æ–¹å—</span></span><br><span class="line"><span class="keyword">if</span>(map_is_full()&amp;&amp;same_color_check())&#123;same_color_flash();lv_obj_clear_flag(refs_btn, LV_OBJ_FLAG_CLICKABLE);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-ç¼–è¯‘çƒ§å½•">3. ç¼–è¯‘çƒ§å½•</h2><p>ç¯å¢ƒæ­å»ºå®‰è£…å‚è€ƒï¼š<a href="https://www.mgodmonkey.cn/posts/639d096c.html">å°å®‰æ´¾ R2 åˆä½“éªŒ - å¼€ç®± + ç¯å¢ƒæ­å»º + ç¼–è¯‘çƒ§å½•</a></p><p>ç¼–è¯‘ï¼š<code>make BL_SDK_BASE=E:/Aithinker_Ai/AiPi-Open-Kits/aithinker_Ai-M6X_SDK</code>,<code>BL_SDK_BASE</code> åé¢ä¸ºè‡ªå·±çš„ <code>aithinker_Ai-M6X_SDK</code> æ–‡ä»¶å¤¹å­˜å‚¨åœ°å€</p><p>çƒ§å½•ï¼š<code>make flash COMX=COM5 BL_SDK_BASE=E:/Aithinker_Ai/AiPi-Open-Kits/aithinker_Ai-M6X_SDK</code></p><blockquote><p>æ³¨ï¼š</p><p>ç›®å‰è¿æ¥æ˜¾ç¤ºå±çƒ§å½•çš„æ—¶å€™ç»å¸¸ä¼šå¤±è´¥ï¼ŒåŸå› æ˜¯TTLä¸‹è½½å™¨ä¾›ç”µä¸ç¨³ï¼Œå› æ­¤æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹å¼ï¼š</p><ul><li>ä¸è¿æ¥æ˜¾ç¤ºå±çƒ§å½•</li><li>è¿æ¥æ˜¾ç¤ºå±ï¼Œä½†éœ€è¦è¿æ¥TYPE-Cä¾›ç”µï¼Œç„¶åç”¨TTLä¸‹è½½å™¨çƒ§å½•</li></ul><p>è¿™ä¸å¾—ä¸åæ§½ä¸€ä¸‹ï¼Œæˆ‘çœ‹ç”µè·¯æ¿è¿˜æœ‰æŒºå¤§çš„ç©ºé—´çš„ï¼Œä¸ºå•¥ä¸å°†ä¸‹è½½æ¨¡å—è®¾è®¡åœ¨ä¸Šé¢å‘¢ï¼Ÿåˆ°æ—¶ä¸€æ ¹Typecè¿æ¥ç”µè„‘å°±èƒ½çƒ§å½•äº†ï¼Œéš¾é“æ˜¯ä¸ºäº†æ¨å¹¿ä¸“ç”¨ä¸‹è½½å™¨å—ï¼Œï¼Œï¼Œ</p></blockquote><h2 id="4-åç»­è®¡åˆ’">4.åç»­è®¡åˆ’</h2><ul><li><p>ç§»æ¤æ›´å¤šçš„æ¸¸æˆ</p></li><li><p>çœ‹çœ‹èƒ½ä¸èƒ½æŠŠèƒŒæ™¯éŸ³ä¹ä¹Ÿæ·»åŠ ä¸Š</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ¸¸æˆå‡ç§»æ¤è‡ªï¼š&lt;a href=&quot;https://space.bilibili.com/344482629&quot;&gt;&lt;strong&gt;ã€è€è™çˆ±3D-bilibiliã€‘&lt;/strong&gt;&lt;/a&gt;ï¼ˆè¿™ä½æ˜¯çœŸå¤§ä½¬ï¼Œæˆ‘åªæ˜¯å¤§è‡ªç„¶çš„æ¬è¿å·¥ï¼Œå¹¶åšé€‚é…ï¼‰&lt;/p&gt;
&lt;p&gt;ç›®å‰å­˜åœ¨çš„æ¸¸æˆï¼š&lt;/p&gt;
&lt;</summary>
      
    
    
    
    <category term="DIYé¡¹ç›®" scheme="https://www.mgodmonkey.cn/categories/DIY%E9%A1%B9%E7%9B%AE/"/>
    
    <category term="å°å®‰æ´¾Rx" scheme="https://www.mgodmonkey.cn/categories/DIY%E9%A1%B9%E7%9B%AE/%E5%B0%8F%E5%AE%89%E6%B4%BERx/"/>
    
    
    <category term="DIYé¡¹ç›®" scheme="https://www.mgodmonkey.cn/tags/DIY%E9%A1%B9%E7%9B%AE/"/>
    
  </entry>
  
  <entry>
    <title>å°å®‰æ´¾R2åˆä½“éªŒ-å¼€ç®±+ç¯å¢ƒæ­å»º+ç¼–è¯‘çƒ§å½•</title>
    <link href="https://www.mgodmonkey.cn/posts/639d096c.html"/>
    <id>https://www.mgodmonkey.cn/posts/639d096c.html</id>
    <published>2024-09-20T14:15:27.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h2 id="å¼€å‘æ¿èµ„æ–™">å¼€å‘æ¿èµ„æ–™</h2><ul><li><strong>å°å®‰æ´¾-Eyes-R2è§„æ ¼ä¹¦ï¼š</strong><a href="https://docs.ai-thinker.com/eyes-r">https://docs.ai-thinker.com/eyes-r</a></li><li><strong>å°å®‰æ´¾æ•™ç¨‹å‚è€ƒï¼š</strong><a href="https://bbs.ai-thinker.com/forum.php?mod=forumdisplay&amp;fid=189">https://bbs.ai-thinker.com/forum.php?mod=forumdisplay&amp;fid=189</a></li><li><strong>è´­ä¹°é“¾æ¥ï¼š</strong>ã€<a href="https://item.taobao.com/item.htm?abbucket=7&amp;id=743970243348">å®‰ä¿¡å¯æ——èˆ°åº—</a>ã€‘ã€<a href="https://detail.tmall.com/item.htm?abbucket=7&amp;id=743866090432">Ai-Thinkeræ——èˆ°åº—</a>ã€‘</li><li><strong>åŸç†å›¾&amp;PCBï¼š</strong><a href="https://oshwhub.com/ai-thiner_openteam/aipi-eyes-r2_v1-0">https://oshwhub.com/ai-thiner_openteam/aipi-eyes-r2_v1-0</a></li><li><strong>æµ‹è¯•æºç &amp;æµ‹è¯•å›ºä»¶ï¼š</strong>ã€<a href="https://gitee.com/Ai-Thinker-Open/AiPi-Open-Kits/tree/master/AiPi-Eyes-Rx">æµ‹è¯•æºç -gitee</a>ã€‘ã€<a href="https://github.com/Ai-Thinker-Open/AiPi-Open-Kits/tree/master/AiPi-Eyes-Rx">æµ‹è¯•æºç -github</a>ã€‘ã€<a href="https://docs.ai-thinker.com/_media/open_hard/aipi-eyes-r2-86panel-v1.1.0.zip">æµ‹è¯•å›ºä»¶-ç‚¹å‡»ä¸‹è½½</a>ã€‘</li><li><strong>çƒ§å½•å·¥å…·ï¼š</strong><a href="https://docs.ai-thinker.com/_media/bouffalolabdevcube-v1.8.3.zip">ã€ç‚¹å‡»ä¸‹è½½ã€‘</a></li><li><strong>å…¶ä»–èµ„æ–™ï¼š</strong><ul><li><strong>ES8388éŸ³é¢‘è§£ç èŠ¯ç‰‡æ‰‹å†Œï¼š</strong><a href="https://docs.ai-thinker.com/_media/19050105%E9%9F%B3%E9%A2%91%E8%A7%A3%E7%A0%81%E8%8A%AF%E7%89%87-%E9%A1%BA%E8%8A%AF-es8388.pdf">ç‚¹å‡»æŸ¥çœ‹</a></li><li><strong>4å¯¸å±èµ„æ–™ï¼š</strong><a href="https://docs.ai-thinker.com/_media/open_hard/ue040wv-rh40-a075b.pdf">ç‚¹å‡»æŸ¥çœ‹</a></li><li><strong>BL618èŠ¯ç‰‡å‚è€ƒæ‰‹å†Œï¼š</strong><a href="https://docs.ai-thinker.com/_media/bl616_bl618_rm_zh_cn_0.93.pdf">ç‚¹å‡»æŸ¥çœ‹</a></li><li><strong>BL618èŠ¯ç‰‡æ•°æ®æ‰‹å†Œï¼š</strong><a href="https://docs.ai-thinker.com/_media/bl616_bl618_ds_zh_cn_1.4.pdf">ç‚¹å‡»æŸ¥çœ‹</a></li></ul></li><li><strong>å°å®‰æ´¾ç¯å¢ƒæ­å»º</strong><ul><li><a href="http://bbs.ai-thinker.com/forum.php?mod=viewthread&amp;tid=282&amp;extra=page%3D1">é›¶åŸºç¡€æ­å»ºå°å®‰æ´¾Windows å¼€å‘ç¯å¢ƒ</a></li><li><a href="http://bbs.ai-thinker.com/forum.php?mod=viewthread&amp;tid=248&amp;extra=page%3D1">é›¶åŸºç¡€æ­å»ºå°å®‰æ´¾Linuxå¼€å‘ç¯å¢ƒä¹‹ã€Linux ç³»ç»Ÿå®‰è£…ã€‘</a></li><li><a href="http://bbs.ai-thinker.com/forum.php?mod=viewthread&amp;tid=255&amp;extra=page%3D1">é›¶åŸºç¡€æ­å»ºå°å®‰æ´¾Linuxå¼€å‘ç¯å¢ƒä¹‹ã€ç¼–è¯‘è¿è¡ŒHello worldã€‘</a></li></ul></li></ul></blockquote><h2 id="1-ç®€æ˜“å¼€ç®±">1.ç®€æ˜“å¼€ç®±</h2><ol><li><p>æ€€ç€æ¿€åŠ¨çš„å¿ƒæ‰“å¼€å¿«é€’ç›’ï¼Œé‡Œé¢èµ«ç„¶èººç€<strong>å°å®‰æ´¾R2</strong>å…¨å®¶æ¡¶ ï¼šå°å®‰æ´¾R2å¼€å‘æ¿*1ï¼Œæ‘„åƒå¤´æ¨¡ç»„-é…·è§†CV031C50 *1ï¼Œ4å¯¸è§¦æ‘¸æ˜¾ç¤ºå±-ä¼˜å¥•UE040WV *1ï¼Œ65dBå’ªå¤´ *1ï¼Œ8R2Wæ‰¬å£°å™¨ *2ï¼ŒåŠè¿æ¥çº¿2æ¡</p><p><img src="https://s2.loli.net/2024/09/20/nmeJfk517lvBdGU.png" alt="image-20240920100349100"></p><p><img src="https://s2.loli.net/2024/09/20/HZLjpiQ5PcmnYaV.png" alt="image-20240920101156802"></p></li><li><p><strong>å°å®‰æ´¾R2</strong>çš„æ¥å£ä¸€è§ˆå›¾å¦‚ä¸‹ï¼šæ¥å£éå¸¸é½å…¨ï¼ŒI2Cï¼ŒSPIï¼ŒUSBï¼Œä¸²å£ç­‰å¸¸ç”¨çš„æ¥å£éƒ½åº”æœ‰å°½æœ‰ï¼Œå¹¶ä¸”ä¸ºäº†é€‚é…å…¶ä»–é…ä»¶ï¼Œè¿éº¦å…‹é£ï¼Œå–‡å­ï¼Œ40Pinæ˜¾ç¤ºå±æ¥å£ä¹Ÿå¼•å‡ºæ¥äº†ã€‚</p></li></ol><p><img src="https://s2.loli.net/2024/09/20/I5RNC6PsH18gk2c.png" alt="in"></p><p><img src="https://s2.loli.net/2024/09/20/wLMgrObWznGh3sS.png" alt="image-20240920102915612"></p><h2 id="2-ç¯å¢ƒæ­å»º">2.ç¯å¢ƒæ­å»º</h2><blockquote><p>Windowsç¯å¢ƒæ¨èä½¿ç”¨<strong>VScode</strong> + <strong>git</strong> + <strong>ç¼–è¯‘å·¥å…·</strong> + <strong>çƒ§å½•å·¥å…·</strong>ï¼Œå…·ä½“å‚è€ƒæ•™ç¨‹ï¼š<a href="https://bbs.ai-thinker.com/forum.php?mod=viewthread&amp;tid=282&amp;extra=page%3D1">https://bbs.ai-thinker.com/forum.php?mod=viewthread&amp;tid=282&amp;extra=page%3D1</a></p></blockquote><ol><li><p>å®‰è£…VScode+VScodeæ‰©å±•+Gitï¼ˆå‚è€ƒä¸Šé¢æ•™ç¨‹ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ï¼‰</p></li><li><p>å®‰è£…ç¼–è¯‘å·¥å…·ï¼Œæ¨èåœ¨æ ¹ç›®å½•ä¸‹æ–°å»º<code>Aithinker_Ai</code>æ–‡ä»¶å¤¹ï¼Œå¦‚<code>E:\Aithinker_Ai</code>ï¼Œåœ¨è·¯å¾„æ ä¸Šè¾“å…¥cmdå›è½¦è¿›å…¥ç»ˆç«¯ï¼Œæ¥ç€è¾“å…¥<code>git clone https://gitee.com/Ai-Thinker-Open/AiPi-Open-Kits.git -b master</code>ä¸‹è½½å·¥å…·é“¾åˆ°æœ¬åœ°</p><p><img src="https://s2.loli.net/2024/09/20/t6hIf9Le1yHXFDa.gif" alt="gif1"></p></li><li><p>ä¸‹è½½å­æ¨¡å—ï¼šç”¨è®°äº‹æœ¬æ‰“å¼€<code>E:\Aithinker_Ai\AiPi-Open-Kits\.gitmodules</code>æ–‡ä»¶ï¼Œä¿®æ”¹<code>github.com</code>ä¸º<code>gitee.com</code>ï¼Œå›½å†…gitteå¥½ç”¨ï¼ˆå¦‚æœæœ‰ç§‘å­¦ä¸Šç½‘ï¼Œè¿™æ­¥ä¸éœ€è¦åšï¼‰</p><p><img src="https://s2.loli.net/2024/09/20/shAQx4pB3zdtT1Y.png" alt="image-20240920110543335"></p></li><li><p>æ¥ç€åœ¨<code>E:\Aithinker_Ai\AiPi-Open-Kits</code>ç›®å½•ä¸‹è¾“å…¥cmdè¿›å…¥ç»ˆç«¯ ï¼Œä¾æ¬¡è¾“å…¥<code>git submodule init</code>ï¼Œ<code>git submodule update</code></p><p><img src="https://s2.loli.net/2024/09/20/koSwvajsbThWur9.gif" alt="gif2"></p></li><li><p>ç”±æ­¤å…‹éš†äº†<code>aithinker_Ai-M6X_SDK</code>ï¼ŒåŒæ ·çš„æ­¥éª¤ï¼Œåœ¨<code>E:\Aithinker_Ai\AiPi-Open-Kits\aithinker_Ai-M6X_SDK</code>ç›®å½•ä¸‹ä¹Ÿéœ€è¦å†æ‰§è¡Œä¸€éï¼Œè¾“å…¥cmdè¿›å…¥ç»ˆç«¯ ï¼Œä¾æ¬¡è¾“å…¥<code>git submodule init</code>ï¼Œ<code>git submodule update</code>ï¼Œ<code>git clone https://gitee.com/bouffalolab/toolchain_gcc_t-head_windows.git -b master</code>ï¼Œç¡®ä¿<code>E:\Aithinker_Ai\AiPi-Open-Kits\aithinker_Ai-M6X_SDK\tools</code>ç›®å½•ä¸‹æœ‰å†…å®¹</p><p><img src="https://s2.loli.net/2024/09/20/w714GqT82tcPxKl.png" alt="image-20240920112833321"></p><p><img src="https://s2.loli.net/2024/09/20/ltUiqPVg27bYcnx.png" alt="image-20240920112458940"></p></li><li><p>æ·»åŠ è·¯å¾„åˆ°ç³»ç»Ÿç¯å¢ƒä¸­ï¼ˆæ­¤å¤„ä¹Ÿå‚è€ƒä¸Šé¢çš„æ•™ç¨‹ï¼Œä¹Ÿä¸å†èµ˜è¿°äº†ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:\Aithinker_Ai\AiPi-Open-Kits\aithinker_Ai-M6X_SDK\toolchain_gcc_t-head_windows\bin</span><br><span class="line">E:\Aithinker_Ai\AiPi-Open-Kits\aithinker_Ai-M6X_SDK\tools\make</span><br><span class="line">E:\Aithinker_Ai\AiPi-Open-Kits\aithinker_Ai-M6X_SDK\tools\ninja</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/09/20/5gnolpUTedQrVu7.png" alt="image-20240920113140796"></p></li><li><p>é‡å¯ç”µè„‘ï¼Œç„¶åéªŒè¯</p><p>åœ¨æ¡Œé¢æŒ‰ä½ <code>shift</code> é”®ç‚¹å‡» <code>é¼ æ ‡å³é”®</code> æ‰“å¼€ <strong>PowerShell</strong> ã€‚åœ¨ PowerShell è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -v</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¾“å‡ºä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GNU Make 4.2.1</span><br><span class="line">Built for x86_64-w64-mingw32</span><br><span class="line">Copyright (C) 1988-2016 Free Software Foundation, Inc.</span><br><span class="line">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¾“å…¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">riscv64-unknown-elf-gcc -v</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ—¶è¾“å‡ºä¿¡æ¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Using built-in specs.</span><br><span class="line">COLLECT_GCC=D:\Desktop\AiPi-Open-Kits\aithinker_Ai-M6X_SDK\toolchain_gcc_t-head_windows\bin\riscv64-unknown-elf-gcc.exe</span><br><span class="line">COLLECT_LTO_WRAPPER=d:/desktop/aipi-open-kits/aithinker_ai-m6x_sdk/toolchain_gcc_t-head_windows/bin/../libexec/gcc/riscv64-unknown-elf/10.2.0/lto-wrapper.exe</span><br><span class="line">Target: riscv64-unknown-elf</span><br><span class="line">Configured with: /mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/./source/riscv/riscv-gcc/configure --target=riscv64-unknown-elf --host=i686-w64-mingw32 --with-gmp=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/build-Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/lib-for-gcc-mingw --with-mpfr=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/build-Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/lib-for-gcc-mingw --with-mpc=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/build-Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/lib-for-gcc-mingw --with-libexpat-prefix=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/build-Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/lib-for-gcc-mingw --with-libmpfr-prefix=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/build-Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/lib-for-gcc-mingw --with-pkgversion=&#x27;Xuantie-900 elf newlib gcc Toolchain V2.6.1 B-20220906&#x27; CXXFLAGS=&#x27;-g -O2 -DTHEAD_VERSION_NUMBER=2.6.1 &#x27; --enable-libgcctf --prefix=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/Xuantie-900-gcc-elf-newlib-mingw-V2.6.1 --disable-shared --enable-threads=posix --enable-languages=c,c++ --without-system-zlib --enable-tls --with-newlib --with-sysroot=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/build-gcc-riscv64-unknown-elf/Xuantie-900-gcc-elf-newlib-mingw-V2.6.1/riscv64-unknown-elf --with-native-system-header-dir=/include --disable-libmudflap --disable-libssp --disable-libquadmath --disable-libgomp --disable-nls --disable-tm-clone-registry --src=/mnt/ssd/jenkins_iotsw/slave/workspace/Toolchain/build-gnu-riscv/./source/riscv/riscv-gcc --enable-multilib --with-abi=lp64d --with-arch=rv64gcxthead &#x27;CFLAGS_FOR_TARGET=-Os   -mcmodel=medany&#x27; &#x27;CXXFLAGS_FOR_TARGET=-Os   -mcmodel=medany&#x27;</span><br><span class="line">Thread model: posix</span><br><span class="line">Supported LTO compression algorithms: zlib zstd</span><br><span class="line">gcc version 10.2.0 (Xuantie-900 elf newlib gcc Toolchain V2.6.1 B-20220906)</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>è‡³æ­¤ï¼Œå°å®‰æ´¾R2çš„ç¼–è¯‘ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆï¼ˆçœŸä¸å®¹æ˜“ï¼Œç»™è‡ªå·±ä¸€ä¸ªå¤§å¤§çš„èµï¼‰</p></blockquote><h2 id="3-ç¼–è¯‘ä¸çƒ§å½•">3.ç¼–è¯‘ä¸çƒ§å½•</h2><ol><li><p>ç”¨VScodeæ‰“å¼€<code>E:\Aithinker_Ai\AiPi-Open-Kits\AiPi-Eyes-Rx</code>æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€<code>main.c</code>ä¸»ç¨‹åºæ–‡ä»¶</p><p><img src="https://s2.loli.net/2024/09/20/cCUnZyYkgMR5Kx3.png" alt="image-20240920150223914"></p></li><li><p>è§£æä¸€ä¸‹<code>main.c</code>ä»£ç </p></li></ol><blockquote><p>é¢ï¼Œæ¶æ„æœ‰ç‚¹åƒ<strong>ESP-IDF</strong>ï¼Œä¹Ÿä½¿ç”¨äº†<strong>FreeRTOS</strong>ç³»ç»Ÿ</p></blockquote><ul><li><p><code>board/board.h</code>ï¼šä¸»è¦åŒ…å«ä¸€äº›åˆè¯•åŒ–ï¼Œå¦‚ç³»ç»Ÿæ—¶é’Ÿï¼Œä¸²å£ï¼Œi2cå¼•è„šï¼Œi2så¼•è„šåˆè¯•åŒ–ï¼Œæ›´æ”¹ä¸²å£æ³¢ç‰¹ç‡æ›´æ”¹<code>board/board.c</code>æ–‡ä»¶ï¼Œå¦‚ä¸‹</p><p><img src="https://s2.loli.net/2024/09/20/GqhztNYoKAD4cyR.png" alt="image-20240920152116955"></p><blockquote><p>æ³¨ï¼šå¦‚æœæ›´æ”¹äº†æ³¢ç‰¹ç‡ï¼Œåˆ™ç¼–è¯‘åï¼Œä¸‹é¢çš„ä¹Ÿéœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™ä¼šçƒ§å½•é”™è¯¯</p><p><img src="https://s2.loli.net/2024/09/20/6ytAakvc8ERN3Dh.png" alt="image-20240920172504983"></p></blockquote></li><li><p><code>lv_conf.h</code>ï¼šlvglé…ç½®å¤´æ–‡ä»¶ï¼Œä¸€èˆ¬ä¸éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œéƒ½æ˜¯æ ¹æ®èµ é€çš„4å¯¸å±å®šåˆ¶çš„</p></li><li><p><code>lcd.h</code>ï¼š4å¯¸å±å¹•é©±åŠ¨å¤´æ–‡ä»¶</p></li><li><p><code>es8388_task.h</code>ï¼šES8388éŸ³é¢‘èŠ¯ç‰‡é©±åŠ¨å¤´æ–‡ä»¶</p></li><li><p><code>auadc.h</code>ï¼šå†…ç½®è§£ç å™¨å¤´æ–‡ä»¶</p><blockquote><p>æ³¨ï¼šå°å®‰æ´¾-Eyes-R1å¸¦å¤–ç½®ES8388éŸ³é¢‘èŠ¯ç‰‡ï¼Œæ”¯æŒä¸¤è·¯éŸ³é¢‘è¾“å…¥è¾“å‡ºã€‚<br>å°å®‰æ´¾-Eyes-R2é‡‡ç”¨å†…ç½®CodeCï¼Œæ”¯æŒå•è·¯éŸ³é¢‘è¾“å…¥è¾“å‡ºã€‚</p></blockquote></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ£€æµ‹æŒ‰é’®çš„ä»»åŠ¡çº¿ç¨‹çš„ä¸€äº›å‚æ•°</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> button_PROCESS_STACK_SIZE  (1024)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> button_PROCESS_PRIORITY (14)</span></span><br><span class="line"><span class="type">static</span> TaskHandle_t button_process_task_hd;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è‡ªå®šä¹‰lvglæ—¥å¿—æ‰“å°æ ¼å¼ */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">lv_log_print_g_cb</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *buf)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[LVGL] %s&quot;</span>, buf);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ›å»ºäºŒç»´ç çš„ç¤ºä¾‹ä»£ç ï¼Œæ²¡æœ‰åœ¨ä¸»å‡½æ•°ä¸­è°ƒç”¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">lv_example_qrcode_1</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">lv_color_t</span> bg_color = lv_palette_lighten(LV_PALETTE_LIGHT_BLUE, <span class="number">5</span>);</span><br><span class="line">    <span class="type">lv_color_t</span> fg_color = lv_palette_darken(LV_PALETTE_BLUE, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">lv_obj_t</span> *qr = lv_qrcode_create(lv_scr_act(), <span class="number">150</span>, fg_color, bg_color);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Set data*/</span></span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *data = <span class="string">&quot;https://www.bouffalolab.com&quot;</span>;</span><br><span class="line">    lv_qrcode_update(qr, data, <span class="built_in">strlen</span>(data));</span><br><span class="line">    lv_obj_center(qr);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Add a border with bg_color*/</span></span><br><span class="line">    lv_obj_set_style_border_color(qr, bg_color, <span class="number">0</span>);</span><br><span class="line">    lv_obj_set_style_border_width(qr, <span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* lvglåå°åˆ·æ–°çš„çº¿ç¨‹ */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">user_task</span><span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    lv_task_handler();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;[LVGL] init success \r\n&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line"></span><br><span class="line">        lv_task_handler();</span><br><span class="line">        bflb_mtimer_delay_ms(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* æ£€æµ‹IO2æ˜¯å¦è¢«æŒ‰ä¸‹ï¼Œæ•ˆæœå°±æ˜¯å¦‚æœé•¿æŒ‰IO2ï¼Œåˆ™å°å®‰æ´¾ä¼šå½•éŸ³ï¼Œæ¾å¼€IO2å›æ”¾å½•éŸ³ */</span></span><br><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">button_process_task</span><span class="params">(<span class="type">void</span> *param)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">uint32_t</span> press_10ms_cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="type">uint32_t</span> press_mode = <span class="number">0</span>;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">bflb_device_s</span> *<span class="title">gpio</span> =</span> bflb_device_get_by_name(<span class="string">&quot;gpio&quot;</span>);</span><br><span class="line">    bflb_gpio_init(gpio, GPIO_PIN_2, GPIO_INPUT | GPIO_FLOAT | GPIO_SMT_EN | GPIO_DRV_0);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(bflb_gpio_read(gpio, GPIO_PIN_2) == <span class="number">1</span>) &#123;</span><br><span class="line">            press_10ms_cnt++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(bflb_gpio_read(gpio, GPIO_PIN_2) == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(press_10ms_cnt &gt; <span class="number">10</span> &amp;&amp; press_10ms_cnt &lt; <span class="number">100</span>)&#123;</span><br><span class="line">                press_mode = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(press_10ms_cnt &gt; <span class="number">100</span>)&#123;</span><br><span class="line">                press_mode = <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            press_10ms_cnt = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="number">1</span> == press_mode)&#123;</span><br><span class="line">            press_mode = <span class="number">0</span>;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;[key] key Press\r\n&quot;</span>);</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> DEF_USER_ES8388_EN</span></span><br><span class="line">            es8388_paly_en();</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">            record_play_on();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">2</span> == press_mode) &#123;</span><br><span class="line">            press_mode = <span class="number">0</span>;</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> (0 == DEF_USER_ES8388_EN)</span></span><br><span class="line">            record_play_off();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        vTaskDelay(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    board_init();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\r\n---BOARD:M61EVB-R%d VERSION:%s---\r\n&quot;</span>, DEF_BOARD_INFO, DEF_BOARD_VERSION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//usb video init</span></span><br><span class="line">    usbh_initialize();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* lvgl init */</span></span><br><span class="line">    <span class="comment">// lv_log_register_print_cb(lv_log_print_g_cb);</span></span><br><span class="line">    lv_init();</span><br><span class="line">    lv_port_disp_init();</span><br><span class="line">    lv_port_indev_init();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test case</span></span><br><span class="line">    <span class="comment">// lv_demo_benchmark();</span></span><br><span class="line">    <span class="comment">// lv_demo_stress();</span></span><br><span class="line">    <span class="comment">// lv_demo_widgets();</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä½¿ç”¨äº†NXPé‚£ä¸ªæ‹–æ‹½ç»„ä»¶çš„è®¾è®¡è½¯ä»¶è¿›è¡ŒUIè®¾è®¡ï¼Œåˆ™ä½¿èƒ½è¿™ä¸ªï¼Œè¯¦æƒ…è§https://www.nxp.com.cn/design/design-center/software/development-software/gui-guider:GUI-GUIDER</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> DEF_NXP_EN</span></span><br><span class="line">setup_ui(&amp;guider_ui);</span><br><span class="line">   events_init(&amp;guider_ui);</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    ui_init();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// éŸ³é¢‘èŠ¯ç‰‡é©±åŠ¨ä»»åŠ¡</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> DEF_USER_ES8388_EN</span></span><br><span class="line">    <span class="comment">/* i2s es8388 task start */</span></span><br><span class="line">    es8388_palyer_task();</span><br><span class="line"><span class="meta">#<span class="keyword">else</span></span></span><br><span class="line">    audio_play_task_init();</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">    xTaskCreate(user_task, (<span class="type">char</span> *)<span class="string">&quot;user_task&quot;</span>, <span class="number">2048</span>, <span class="literal">NULL</span>, <span class="number">3</span>, <span class="literal">NULL</span>);</span><br><span class="line">    xTaskCreate(button_process_task, (<span class="type">char</span> *)<span class="string">&quot;button_proc_task&quot;</span>, button_PROCESS_STACK_SIZE, <span class="literal">NULL</span>, button_PROCESS_PRIORITY, &amp;button_process_task_hd);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* freeRTOS start */</span></span><br><span class="line">    vTaskStartScheduler();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>å°å®‰æ´¾R2éœ€è¦è¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p><ul><li><p>å¦‚æœæ˜¯ç¼–è¯‘å¸¦8388çš„å¼€å‘æ¿ï¼ˆAiPi-Eyes-R1ï¼‰éœ€è¦é…ç½®å¦‚ä¸‹å‚æ•°</p><ul><li><p>ä¿®æ”¹ <code>app_main.h</code> ï¼š#define DEF_USER_ES8388_EN (0)</p></li><li><p>ä¿®æ”¹ <code>proj.conf</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>(CONFIG_SOLUTION_FUNC_AUDIO_AUADC    <span class="number">1</span>)</span><br><span class="line"><span class="built_in">set</span>(CONFIG_SOLUTION_FUNC_AUDIO_AUDAC    <span class="number">1</span>)</span><br></pre></td></tr></table></figure></li></ul></li></ul></blockquote><ol start="3"><li>ç¼–è¯‘ä»£ç ç›´æ¥åœ¨ç»ˆç«¯è¾“å…¥<code>make</code>å³å¯</li></ol><blockquote><p>å¦‚æœç¼–è¯‘é‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼ŒåŸå› æ˜¯ç»ˆç«¯ä¸æ”¯æŒ<strong>cp</strong>æŒ‡ä»¤ï¼Œç»è¿‡æµ‹è¯•ï¼ŒWindowsç¯å¢ƒä¸‹<strong>cmd</strong>å’Œ<strong>powershell</strong>éƒ½ä¸è¡Œï¼Œéœ€è¦åœ¨<strong>git bash</strong>ç¯å¢ƒä¸‹ç¼–è¯‘</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Built target combine</span><br><span class="line"><span class="built_in">cp</span> ./../aithinker_Ai-M6X_SDK/bsp/board/bl616dk/config/edata.bin build/build_out</span><br><span class="line">process_begin: CreateProcess(NULL, <span class="built_in">cp</span> ./../aithinker_Ai-M6X_SDK/bsp/board/bl616dk/config/edata.bin build/build_out, ...) failed.</span><br><span class="line">make (e=2): ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚</span><br><span class="line">make: *** [../aithinker_Ai-M6X_SDK/project.build:75: build] Error 2</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/09/20/H3U9rwVqS7gGyJ2.gif" alt="gif3"></p></blockquote><ol start="4"><li><p>ç¼–è¯‘å®Œæˆåï¼Œå°±å¯ä»¥è¿›è¡Œçƒ§å½•äº†ï¼Œçƒ§å½•æ–¹å¼æœ‰ä¸¤ç§ï¼Œä½¿ç”¨ä¸²å£çƒ§å½•ï¼Œæˆ–è€…è½¯ä»¶çƒ§å½•</p><ol><li><p>ç”¨ä¸€ä¸ªTTLä¸‹è½½å™¨è¿æ¥å°å®‰æ´¾ï¼Œæ¥çº¿é¡ºåºå¦‚ä¸‹ï¼š</p><table><thead><tr><th style="text-align:center">TTL å·¥å…·</th><th style="text-align:center">å°å®‰æ´¾</th></tr></thead><tbody><tr><td style="text-align:center">3.3V</td><td style="text-align:center">3.3V</td></tr><tr><td style="text-align:center">TXD</td><td style="text-align:center">RX</td></tr><tr><td style="text-align:center">RXD</td><td style="text-align:center">TX</td></tr><tr><td style="text-align:center">GND</td><td style="text-align:center">GND</td></tr></tbody></table></li><li><p>æ’ä¸ŠTTLä¸‹è½½å™¨åˆ°ç”µè„‘ï¼Œè®¾å¤‡ç®¡ç†å™¨æŸ¥çœ‹TTLä¸‹è½½å™¨ç«¯å£å·</p><ol><li><p>ä¸²å£çƒ§å½•ï¼šç»ˆç«¯è¾“å…¥<code>make flash COMX=COMx</code>è¿›è¡Œçƒ§å½•ï¼Œå¦‚<code>make flash COMX=COM5</code>ï¼Œç­‰åˆ°ç»ˆç«¯æ˜¾ç¤º<code>Please Press Reset Keyï¼</code>ï¼Œåˆ™çŸ­æŒ‰ä¸€ä¸‹<strong>RESETé”®</strong>ï¼Œå³é è¿‘æœé‚¦çº¿çš„<strong>ENé”®</strong>ï¼Œè®°ä½æ˜¯çŸ­æŒ‰ä¸€ä¸‹ï¼Œä¸è¦æŒ‰å¤ªé•¿ï¼ŒæŒ‰å¤ªé•¿å¤§æ¦‚ç‡å¤±è´¥ï¼Œè€Œä¸”ç®€æ˜“ä¸è¿æ¥å±å¹•ï¼Œæ‘„åƒå¤´ç­‰è®¾å¤‡è¿›è¡Œçƒ§å½•<br><img src="https://s2.loli.net/2024/09/20/wogtCN3y2RO7Tqk.gif" alt="gif4"></p></li><li><p>è½¯ä»¶çƒ§å½•</p><ol><li><p>çƒ§å½•å·¥å…·ä¸‹è½½ï¼šã€<a href="https://docs.ai-thinker.com/_media/bouffalolabdevcube-v1.8.3.zip">ç‚¹å‡»ä¸‹è½½</a>ã€‘</p></li><li><p>çƒ§å½•æ¨¡å¼ï¼šçƒ§å½•å·¥å…·åœ¨çƒ§å½•å¼€å§‹åï¼Œå…ˆæŒ‰ä½ â€œä¸‹è½½æŒ‰é’®â€å†æŒ‰ä¸€ä¸‹â€œå¤ä½æŒ‰é’®â€åæ¾å¼€ï¼Œå³å¯è¿›å…¥çƒ§å½•æ¨¡å¼ã€‚</p></li><li><p>æ‰“å¼€<code>BLDevCube.exe</code>ï¼Œé€‰æ‹©<code>BL616/618</code>ï¼Œç‚¹å‡»<code>Finish</code>ã€‚</p></li><li><p>è½¯ä»¶è¯´æ˜å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2024/09/20/4yLOx1ibGnKArwo.png" alt="image-20240920210241113"></p></li><li><p>çƒ§å½•ä¸Šé¢çš„æºç éœ€è¦çƒ§å½•4ä¸ªå›ºä»¶ï¼Œå‚è€ƒ<code>flash_prog_cfg.ini</code>æ–‡ä»¶ä¸­çš„å†…å®¹çƒ§å½•ï¼ŒæŒ‰ç…§ä¸‹é¢çš„è¯´æ˜ä¾æ¬¡ä¸‹è½½å®Œæˆ4ä¸ªå›ºä»¶</p></li></ol><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[boot2]</span></span><br><span class="line"><span class="attr">filedir</span> = ./board/config/whole_img_bootloader.bin</span><br><span class="line"><span class="attr">address</span> = <span class="number">0</span>x000000</span><br><span class="line"></span><br><span class="line"><span class="section">[edata]</span></span><br><span class="line"><span class="attr">filedir</span> = ./board/config/edata.bin</span><br><span class="line"><span class="attr">address</span> = <span class="number">0</span>x3e0000</span><br><span class="line"></span><br><span class="line"><span class="section">[partition]</span></span><br><span class="line"><span class="attr">filedir</span> = ./build/build_out/partition*.bin</span><br><span class="line"><span class="attr">address</span> = <span class="number">0</span>xE000</span><br><span class="line"></span><br><span class="line"><span class="section">[FW]</span></span><br><span class="line"><span class="attr">filedir</span> = ./build/build_out/AiPi-E<span class="literal">yes</span>-Rx_$(CHIPNAME).bin</span><br><span class="line"><span class="attr">address</span> = <span class="number">0</span>x10000</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦çƒ§å½•çš„å›ºä»¶å…¨éƒ¨åœ¨<code>E:\Aithinker_Ai\AiPi-Open-Kits\AiPi-Eyes-Rx\build\build_out</code>ç›®å½•ä¸‹ï¼Œå¯¹åº”çš„å›ºä»¶ä¾æ¬¡æ˜¯ï¼š</p><ul><li>whole_flash_data.bin</li><li>edata.bin</li><li>partition.bin</li><li>AiPi-Eyes-Rx_bl616.bin</li></ul></blockquote><p><img src="https://s2.loli.net/2024/09/20/UnCTIHtWizvKJBs.png" alt="image-20240920210918900"></p></li></ol></li><li><p>çƒ§å½•å®ŒæˆåæŒ‰<strong>RESETé”®</strong>å³å¯çœ‹åˆ°å¦‚ä¸‹çš„å†…å®¹ï¼Œå®˜æ–¹çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæŒ‰ä¸‹<strong>IO2é”®</strong>åˆ™ä¼šè¿›å…¥<strong>æ‰©éŸ³æ¨¡å¼</strong>ï¼Œå³æ ¹æ®éº¦å…‹é£çš„å£°éŸ³åœ¨æ‰¬å£°å™¨ä¸­å®æ—¶æ’­æ”¾ï¼Œé•¿æŒ‰<strong>IO2é”®</strong>åˆ™ä¼šé€€å‡ºè¯¥æ¨¡å¼</p></li></ol><p><img src="https://s2.loli.net/2024/09/20/CvcIEG9mNskoVrn.png" alt="image-20240920211413210"></p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;h2 id=&quot;å¼€å‘æ¿èµ„æ–™&quot;&gt;å¼€å‘æ¿èµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å°å®‰æ´¾-Eyes-R2è§„æ ¼ä¹¦ï¼š&lt;/strong&gt;&lt;a href=&quot;https://docs.ai-thinker.com/eyes-r&quot;&gt;https://docs.ai</summary>
      
    
    
    
    <category term="æµ‹è¯„" scheme="https://www.mgodmonkey.cn/categories/%E6%B5%8B%E8%AF%84/"/>
    
    <category term="å°å®‰æ´¾Rx" scheme="https://www.mgodmonkey.cn/categories/%E6%B5%8B%E8%AF%84/%E5%B0%8F%E5%AE%89%E6%B4%BERx/"/>
    
    
    <category term="æµ‹è¯„" scheme="https://www.mgodmonkey.cn/tags/%E6%B5%8B%E8%AF%84/"/>
    
  </entry>
  
  <entry>
    <title>çº¢å±±ç¤¾åŒºæ¯”èµ›ä»¿çœŸç¯å¢ƒ</title>
    <link href="https://www.mgodmonkey.cn/posts/c1763b9b.html"/>
    <id>https://www.mgodmonkey.cn/posts/c1763b9b.html</id>
    <published>2024-08-30T07:57:46.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-èµ„æ–™">1.èµ„æ–™</h2><ul><li><strong>æ¯”èµ›å®˜æ–¹é“¾æ¥ï¼š</strong><a href="https://www.osredm.com/competition/JQTJ">https://www.osredm.com/competition/JQTJ</a></li><li><strong>æ¯”èµ›ç­”ç–‘ä»“åº“ï¼š</strong><a href="https://www.osredm.com/JQZN/jqzn-issue">https://www.osredm.com/JQZN/jqzn-issue</a></li><li><strong>ä»¿çœŸæ¥å£æ–‡æ¡£ï¼š</strong><a href="https://jqsdk.osredm.com/">https://jqsdk.osredm.com</a></li><li><strong>é—®é¢˜ç­”ç–‘ç¬¬ä¸€æœŸï¼š</strong><a href="https://www.osredm.com/JQZN/jqzn-issue/tree/master/issue-20230826.md">https://www.osredm.com/JQZN/jqzn-issue/tree/master/issue-20230826.md</a></li><li><strong>é—®é¢˜ç­”ç–‘ç¬¬äºŒæœŸï¼š</strong><a href="https://p.kdocs.cn/s/WCSDECY3ADQDG">https://p.kdocs.cn/s/WCSDECY3ADQDG</a></li><li><strong>é—®é¢˜ç­”ç–‘ç¬¬ä¸‰æœŸï¼š</strong><a href="https://p.kdocs.cn/s/GVZZWGY3ADQDG">https://p.kdocs.cn/s/GVZZWGY3ADQDG</a></li></ul><h2 id="2-ä»¿çœŸç¯å¢ƒæ­å»º">2.ä»¿çœŸç¯å¢ƒæ­å»º</h2><blockquote><p><strong>è¯´æ˜ï¼šå› ä¸ºWindowsç¯å¢ƒä¸‹ä»¿çœŸæ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”Windowsç¯å¢ƒä¸‹èƒ½ç”¨åˆ°æ˜¾å¡èµ„æºï¼Œä»¿çœŸå¯ä»¥æ›´åŠ æµç•…ï¼Œå¯ä»¥å…ˆæ­Windowsç¯å¢ƒä»¿çœŸï¼Œåç»­ä»£ç ä¼ ç»™æˆ‘ç»Ÿä¸€åœ¨linuxä¸‹æ‰“åŒ…å³å¯</strong></p></blockquote><ol><li><p>è§£å‹<code>ä»¿çœŸå¼€å‘åŒ….zip</code>å¹¶å°†æ–‡ä»¶å¤¹é‡Œé¢çš„<code>ä»¿çœŸå¼€å‘åŒ…</code>æ–‡ä»¶å¤¹æ”¹åæˆ è‹±æ–‡åï¼Œå¦‚<code>SimulationPackage</code>ï¼Œç§»åŠ¨åˆ°æ ¹ç›®å½•ï¼Œå¦‚<code>E:\SimulationPackage</code>ï¼Œç¡®ä¿åç»­ç¯å¢ƒä¸ä¼šå› ä¸ºè·¯å¾„åå‡ºé”™</p></li><li><p>è§£å‹<code>WindowsNoEditor.rar</code>ï¼Œ<code>simuDistro_0.2.3_windows.zip</code>å‹ç¼©åŒ…****</p><p><img src="https://s2.loli.net/2024/08/30/PiAMRpXtGDnTjqc.png" alt="image-20240830161933843"></p></li><li><p>å®‰è£…SDKç¯å¢ƒ</p><ol><li><p>å®‰è£…Anaconda ï¼šç”¨Uç›˜ä¸­çš„å®‰è£…åŒ…æˆ–è€…å®˜ç½‘ <a href="https://www.anaconda.com/download/success">https://www.anaconda.com/download/success</a>è‡ªè¡Œä¸‹è½½</p></li><li><p>åˆ›å»ºpython3.6è™šæ‹Ÿç¯å¢ƒ</p><ol><li><p>æ‰“å¼€cmdç»ˆç«¯ï¼šwin+rè¾“å…¥<strong>cmd</strong> æˆ–è€… win+qæœç´¢<strong>Anaconda Prompt</strong>ï¼ˆcmdæ‰“å¼€å¦‚æœå‰é¢æ²¡æœ‰(base)ï¼Œé€šè¿‡è¾“å…¥<code>conda activate base</code>æ¿€æ´»ï¼‰</p><p><img src="https://s2.loli.net/2024/08/30/GQMun2OUVxqerHb.png" alt="image-20240830163837166"></p></li><li><p>é€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤æ’ä»¶ä¸€ä¸ªpython3.6ç¯å¢ƒ</p>   <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># simæ˜¯è™šæ‹Ÿç¯å¢ƒçš„åå­—ï¼Œå®‰è£…è¿‡ç¨‹é‡åˆ°é€‰é¡¹è¾“å…¥yç„¶åå›è½¦å³å¯</span></span><br><span class="line">conda create -n sim python=3.6</span><br><span class="line"><span class="comment"># æ¿€æ´»simè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">conda activate sim</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤å®‰è£… SDKç¯å¢ƒï¼ˆä¸è¦ç¿»å¢™ï¼Œå¯èƒ½ä¼šæŠ¥ç½‘ç»œé”™è¯¯ï¼‰</p>   <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install https://jqtj.obs.cn-north-4.myhuaweicloud.com/sdk/windows/swarmae-1.0.1-py3-none-any.whl -i https://pypi.tuna.tsinghua.edu.cn/simple/</span><br></pre></td></tr></table></figure></li><li><p>éªŒè¯å®‰è£…ï¼Œç»ˆç«¯è¾“å…¥<code>python</code>ï¼Œæ¥ç€è¾“å…¥<code>from swarmae.SwarmAEClient import SwarmAEClient</code>ï¼Œæ²¡æŠ¥é”™å°±æ˜¯å·²ç»å®‰è£…æˆåŠŸï¼ˆè¾“å…¥<code>quit()</code>å›è½¦é€€å‡ºpythonç¯å¢ƒï¼‰</p>   <figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(sim) C:\Users\17814&gt;python</span><br><span class="line">Python 3.6.13 |Anaconda, Inc.| (default, Mar 16 2021, 11:37:27) [MSC v.1916 64 bit (AMD64)] on win32</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; from swarmae.SwarmAEClient import SwarmAEClient</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li></ol><blockquote><p><strong>æ³¨ï¼šAnacondaå®‰è£…å³åˆ›å»ºç¯å¢ƒæœ‰é—®é¢˜çš„å‚è€ƒåšå®¢</strong><a href="https://blog.csdn.net/weixin_73800108/article/details/137296446">ã€è¶…è¯¦ç»†ç‰ˆAnacondaçš„å®‰è£…åŠä½¿ç”¨condaåˆ›å»ºã€è¿è¡Œè™šæ‹Ÿç¯å¢ƒä»¥åŠä½¿ç”¨é•œåƒæºã€‘</a></p></blockquote><ol start="4"><li><p>UE4ä»¿çœŸåŒ…é…ç½®</p><ol><li><p>æ‰“å¼€<code>E:\SimulationPackage\WindowsNoEditor\WindowsNoEditor</code>ï¼Œå³é”®<code>CarlaUE4.exe</code>-&gt;æ˜¾ç¤ºæ›´å¤šé€‰é¡¹-&gt;åˆ›å»ºå¿«æ·æ–¹å¼</p></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>E:\SimulationPackage\WindowsNoEditor\WindowsNoEditor\CarlaUE4\Config\ClusterEval.ini</code>ï¼ˆé…ç½®æ–‡ä»¶æ ¼å¼è¯´æ˜è§ç¬¬ä¸‰ç« ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Game]</span><br><span class="line">GameId=<span class="string">&quot;77777&quot;</span> <span class="comment">#éšä¾¿å–</span></span><br><span class="line">SubjectId=5 <span class="comment">#å¯¹åº”ç§‘ç›®å‡ ï¼Œä½“ç°åœ¨ä»¿çœŸå¯åŠ¨åçš„æ ‡é¢˜â€œæ—‹ç¿¼æ— äººæœºè‡ªä¸»é¿éšœç§‘ç›®â€</span></span><br><span class="line">Seconds=600 <span class="comment">#å¥½åƒæ²¡ç”¨</span></span><br><span class="line">AirSimComPort=4443</span><br><span class="line">AirSimCmdPort=4446</span><br><span class="line"></span><br><span class="line">[Team]</span><br><span class="line">TeamId=<span class="string">&quot;Team1&quot;</span></span><br><span class="line">IMVNum=5</span><br><span class="line">QRTNum=10</span><br></pre></td></tr></table></figure></li><li><p>æ¥ç€å³é”®å¿«æ·æ–¹å¼ï¼Œåœ¨ç›®æ ‡åé¢åŠ <code>CE_L1 -ConfigName=ClusterEval</code>ï¼ˆåˆ«å¿˜äº†exeåé¢æœ‰ç©ºæ ¼ï¼‰ï¼Œç„¶åç‚¹å‡»ç¡®å®š</p><p><img src="https://s2.loli.net/2024/08/30/Q1uwF3M5xdlH4Ta.png" alt="image-20240830204643839"></p></li></ol><blockquote><p><strong>è¯´æ˜ï¼šCE_L1ä»£è¡¨ç§‘ç›®ä¸€çš„åœ°å›¾ï¼ŒCE_L2ä»£è¡¨ç§‘ç›®ä¸‰çš„åœ°å›¾ï¼Œå¦‚æœæ˜¯æ— äººæœºçš„åœ°å›¾ï¼Œåˆ™éœ€è¦å°†å…¶ä¿®æ”¹ä¸ºCE_L4~CE_7ï¼Œæ›´è¯¦ç»†çš„è¯´æ˜è§ç¬¬ä¸‰ç« </strong></p></blockquote><ol start="3"><li><p>åŒå‡»å¿«æ·æ–¹å¼è¿›å…¥ä»¿çœŸç¯å¢ƒï¼Œç»ˆç«¯è¾“å…¥<code>netstat -ano | findstr 2000</code>ï¼Œå¦‚æœå‡ºç°2000çš„ç«¯å£åˆ™è¯´æ˜å¯åŠ¨æ­£å¸¸</p><p><img src="https://s2.loli.net/2024/08/30/pXKmYNiCxg1e4ah.png" alt="image-20240830170209964"></p><p><img src="https://s2.loli.net/2024/08/30/w5eFBYyv8L21IEn.png" alt="image-20240830171457277"></p></li></ol></li><li><p>å¯åŠ¨ä»¿çœŸåŠ¨åŠ›ç¨‹åº</p><ol><li><p>æ‰“å¼€<code>E:\SimulationPackage\simuDistro_0.2.3_windows</code>æ–‡ä»¶å¤¹ï¼ŒåŒå‡»<code>start.bat</code>å³å¯</p></li><li><p>ç±»å‹é€‰æ‹©<code>2. å››æ—‹ç¿¼</code>ç„¶åå›è½¦</p><p><img src="https://s2.loli.net/2024/08/30/cyND9fASUvlERLV.png" alt="image-20240830192355312"></p></li><li><p>å‡ºç°ä¸‹é¢çš„å¿ƒè·³åŒ…ç•Œé¢è¯´æ˜å¯åŠ¨æˆåŠŸ</p><p><img src="https://s2.loli.net/2024/08/30/TREO63hWzkcfde9.png" alt="image-20240830192515019"></p></li></ol></li></ol><h2 id="3-é…ç½®æ–‡ä»¶è¯´æ˜">3. é…ç½®æ–‡ä»¶è¯´æ˜</h2><h3 id="3-1é…ç½®æ–‡ä»¶è¯´æ˜">3.1é…ç½®æ–‡ä»¶è¯´æ˜</h3><table><thead><tr><th style="text-align:center">Game</th><th style="text-align:center">GameId</th><th style="text-align:center">string</th><th style="text-align:center">æŒ‡å®šæœ¬åœºæ¯”èµ›ID</th></tr></thead><tbody><tr><td style="text-align:center"></td><td style="text-align:center">SubjectId</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šæœ¬åœºç§‘ç›®ç¼–å·</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">Seconds</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šæœ¬åœºæ¯”èµ›æ—¶é•¿</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">AirSimIp</td><td style="text-align:center">ip</td><td style="text-align:center">æŒ‡å®šå›ºå®šç¿¼ä»¿çœŸipåœ°å€</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">AirSimComPort</td><td style="text-align:center">port</td><td style="text-align:center">æŒ‡å®šä»¿çœŸå¼•æ“è¿æ¥TCPç«¯å£å·</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">AirSimCmdPort</td><td style="text-align:center">port</td><td style="text-align:center">æŒ‡å®šä»¿çœŸä¿¡æ¯æ¥æ”¶UDPç«¯å£å·</td></tr><tr><td style="text-align:center">Team1</td><td style="text-align:center">TeamId</td><td style="text-align:center">string</td><td style="text-align:center">æŒ‡å®šé˜Ÿä¼1ID</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">IMVNum</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šæ­¥å…µæœºåŠ¨æˆ˜è½¦æ•°é‡</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">CMSNum</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šå·¡é£å¼¹ï¼ˆè‡ªæ€å¼æ— äººæœºï¼‰æ•°é‡</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">SVLNum</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šå¯Ÿæ‰“æ— äººæœºæ•°é‡</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">QRTNum</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šå°å‹å››æ—‹ç¿¼æ— äººæœºæ•°é‡</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">QRBNum</td><td style="text-align:center">int</td><td style="text-align:center">æŒ‡å®šå››æ—‹ç¿¼è‡ªæ€å¼æ— äººæœºæ•°é‡</td></tr><tr><td style="text-align:center">Team2</td><td style="text-align:center">-</td><td style="text-align:center">-</td><td style="text-align:center">é˜Ÿä¼2é…ç½®åŸŸï¼Œé…ç½®æ–¹æ³•åŒé˜Ÿä¼1</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Game]</span><br><span class="line">GameId=<span class="string">&quot;77777&quot;</span> <span class="comment">#éšä¾¿å–</span></span><br><span class="line">SubjectId=5 <span class="comment">#å¯¹åº”ç§‘ç›®å‡ ï¼Œä½“ç°åœ¨ä»¿çœŸå¯åŠ¨åçš„æ ‡é¢˜â€œæ—‹ç¿¼æ— äººæœºè‡ªä¸»é¿éšœç§‘ç›®â€</span></span><br><span class="line">Seconds=600 <span class="comment">#å¥½åƒæ²¡ç”¨</span></span><br><span class="line">AirSimComPort=4443</span><br><span class="line">AirSimCmdPort=4446</span><br><span class="line"></span><br><span class="line">[Team]</span><br><span class="line">TeamId=<span class="string">&quot;Team1&quot;</span></span><br><span class="line">IMVNum=1</span><br><span class="line">CMSNum=1</span><br><span class="line">QRTNum=2</span><br><span class="line">QRBNum=1</span><br></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šè½½å…·çš„ç”Ÿæˆä¸åœ°å›¾æœ‰å…³ï¼Œå¹¶ä¸æ˜¯è¯´é…ç½®æ–‡ä»¶é‡Œé¢è¯´äº†ç”Ÿæˆå•¥å°±æ˜¯å•¥ï¼Œç»è¿‡æµ‹è¯•ï¼Œåœ°å›¾<strong>CE_L1~CE_L3</strong>åªèƒ½ç”Ÿæˆ<strong>IMVNum</strong>ï¼Œå³å°è½¦ï¼Œå¯¹åº”å°è½¦çš„ç§‘ç›®1åˆ°3ï¼Œ<strong>CE_L4~CE_L6</strong>åªèƒ½ç”Ÿæˆ<strong>QRTNum</strong>ï¼Œå³<strong>å››æ—‹ç¿¼æ— äººæœº</strong>ï¼Œ<strong>CE_L7</strong>èƒ½ç”Ÿæˆ<strong>å°è½¦</strong>å’Œ<strong>å››æ—‹ç¿¼æ— äººæœº</strong>ï¼Œ<strong>CE_A</strong>åœ°å›¾ç³»åˆ—ç›®å‰ä¸çŸ¥é“æ˜¯å¹²å•¥ç”¨çš„</p></blockquote><h3 id="3-2åœ°å›¾è¯´æ˜">3.2åœ°å›¾è¯´æ˜</h3><table><thead><tr><th style="text-align:center">é¡¹ç›®</th><th style="text-align:center">ç§‘ç›®</th><th style="text-align:center">å¯¹åº”åœ°å›¾</th></tr></thead><tbody><tr><td style="text-align:center">ç©ºåœ°</td><td style="text-align:center">1</td><td style="text-align:center">CE_L1</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">2</td><td style="text-align:center">CE_L2</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3</td><td style="text-align:center">CE_L3</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">4</td><td style="text-align:center">CE_L4</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5</td><td style="text-align:center">CE_L5</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">6</td><td style="text-align:center">CE_L6</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">7</td><td style="text-align:center">CE_L7</td></tr><tr><td style="text-align:center">ç©ºä¸­</td><td style="text-align:center">1ã€4</td><td style="text-align:center">CE_A14</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">2</td><td style="text-align:center">CE_A2</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">3ã€6</td><td style="text-align:center">CE_A36</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">5</td><td style="text-align:center">CE_A5</td></tr><tr><td style="text-align:center"></td><td style="text-align:center">7</td><td style="text-align:center">CE_A7</td></tr></tbody></table><blockquote><p>è¯´æ˜ï¼šç©ºä¸­ç³»åˆ—çš„åœ°å›¾æš‚æ—¶ä¸ç”¨ç®¡</p></blockquote><h3 id="3-3ç§‘ç›®è¯´æ˜">3.3ç§‘ç›®è¯´æ˜</h3><p><img src="https://s2.loli.net/2024/08/30/dKLFJT6f2eCtqzQ.png" alt="image-20240830205008117"></p><h2 id="4-å®Œæ•´è¿è¡Œæµç¨‹">4.å®Œæ•´è¿è¡Œæµç¨‹</h2><ol><li>åŒå‡»<code>E:\SimulationPackage\WindowsNoEditor\WindowsNoEditor\CarlaUE4.exe - å¿«æ·æ–¹å¼</code>æ‰“å¼€åœ°å›¾</li><li>åŒå‡»<code>E:\SimulationPackage\simuDistro_0.2.3_windows\start.bat</code>æ‰“å¼€åŠ¨åŠ›ç³»ç»Ÿ</li><li>ç”¨VSCodeæ‰“å¼€demoæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”ç‚¹å‡»ä¸Šé¢çš„ç»ˆç«¯-&gt;æ–°å»ºç»ˆç«¯-&gt;è¾“å…¥<code>conda activate sim</code></li></ol><p><img src="https://s2.loli.net/2024/08/30/JENg3PwA7Dihn6X.png" alt="image-20240830194050266"></p><ol start="4"><li><p>åŒå‡»<code>game-start.exe</code>, å¯åŠ¨ä»¿çœŸå†…å€’è®¡æ—¶ï¼Œç­‰å€’è®¡å¯åŠ¨äº†50såæ‰èƒ½å¯¹æ— äººæœºè¿›è¡Œæ§åˆ¶ï¼ˆgame-start.exeä¸‹è½½åœ°å€ï¼š<a href="https://www.osredm.com/JQZN/jqzn-issue/tree/master">https://www.osredm.com/JQZN/jqzn-issue/tree/master</a>)</p><p><img src="https://s2.loli.net/2024/09/02/dwGri5KR6gfaTky.png" alt="image-20240902152013010"></p></li><li><p>åœ¨ç»ˆç«¯è¾“å…¥<code>python simple_test.py</code>ï¼Œåå°æ˜¾ç¤ºå¦‚ä¸‹ï¼Œæ— äººæœºå‘å‰é£è¡Œï¼Œè¯´æ˜ä»¿çœŸæˆåŠŸ</p></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(sim) E:\SimulationPackage\demo&gt;python simple_test.py</span><br><span class="line">--Connecting to UE4 simulation: 127.0.0.1 2000</span><br><span class="line">WARNING: Version mismatch detected: You are trying to connect to a simulator that might be incompatible with this API </span><br><span class="line">WARNING: Client API version     = 1.0-34-g91df42e4-dirty </span><br><span class="line">WARNING: Simulator API version  = a59b6e5-dirty </span><br><span class="line">vehicle.QRT.Phantom*</span><br><span class="line">--Node registered successfully: èŠ‚ç‚¹1, Type: å››æ—‹ç¿¼</span><br><span class="line">Node moved to new position: x=290.29998779296875, y=566.7999877929688, z=487.0</span><br><span class="line">Node moved to new position: x=290.3046875, y=566.8058471679688, z=487.4312438964844</span><br><span class="line">Node moved to new position: x=290.79931640625, y=567.7300415039062, z=491.5119323730469</span><br><span class="line">Node moved to new position: x=292.13153076171875, y=570.321533203125, z=496.00872802734375</span><br></pre></td></tr></table></figure><h2 id="5-ç¤ºä¾‹ä»£ç ">5.ç¤ºä¾‹ä»£ç </h2><h3 id="5-1å¤šæ— äººæœºæ§åˆ¶æ¡ˆä¾‹">5.1å¤šæ— äººæœºæ§åˆ¶æ¡ˆä¾‹</h3><blockquote><p>é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[Game]</span><br><span class="line">GameId=&quot;77777&quot; #éšä¾¿å–</span><br><span class="line">SubjectId=4 #å¯¹åº”ç§‘ç›®å‡ ï¼Œä½“ç°åœ¨ä»¿çœŸå¯åŠ¨åçš„æ ‡é¢˜â€œæ—‹ç¿¼æ— äººæœºè‡ªä¸»é¿éšœç§‘ç›®â€</span><br><span class="line">Seconds=600 #å¥½åƒæ²¡ç”¨</span><br><span class="line">AirSimComPort=4443</span><br><span class="line">AirSimCmdPort=4446</span><br><span class="line"></span><br><span class="line">[Team]</span><br><span class="line">TeamId=&quot;Team1&quot;</span><br><span class="line">IMVNum=1</span><br><span class="line">CMSNum=1</span><br><span class="line">QRTNum=10</span><br><span class="line">QRBNum=1</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ï¼š</p><p><code>python simple_test.py -n 10</code>ï¼ˆåŠ å‚æ•°-n 10è¡¨ç¤ºæ³¨å†Œ10è¾†æ— äººæœºè¿›è¡Œæ§åˆ¶ï¼‰</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> swarmae.SwarmAEClient <span class="keyword">import</span> SwarmAEClient</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SwarmaeClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.ae_client = <span class="literal">None</span></span><br><span class="line">        self.nodes = []</span><br><span class="line">        self.node_info = &#123;&#125;  <span class="comment"># å­˜å‚¨æ¯ä¸ªæ— äººæœºçš„åˆå§‹ä½ç½®å’Œé«˜åº¦</span></span><br><span class="line">        self.positions = []  <span class="comment"># å­˜å‚¨æ¯ä¸ªæ— äººæœºçš„å½“å‰ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self, ue_ip=<span class="string">&quot;127.0.0.1&quot;</span>, ue_port=<span class="number">2000</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;--Connecting to UE4 simulation:&quot;</span>, ue_ip, ue_port)</span><br><span class="line">        self.ae_client = SwarmAEClient(ue_ip=ue_ip, ue_port=ue_port)</span><br><span class="line">        <span class="keyword">return</span> self.ae_client</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_node</span>(<span class="params">self, <span class="built_in">id</span>, max_retries=<span class="number">3</span></span>):</span><br><span class="line">        <span class="keyword">for</span> attempt <span class="keyword">in</span> <span class="built_in">range</span>(max_retries):</span><br><span class="line">            frame_timestamp = <span class="built_in">int</span>(<span class="built_in">round</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">            frame_timestamp, sw_node, sw_code = self.ae_client.register_node(</span><br><span class="line">                node_type=<span class="string">&quot;å››æ—‹ç¿¼&quot;</span>, node_name=<span class="string">&quot;æ— äººæœº&quot;</span> + <span class="built_in">str</span>(<span class="built_in">id</span>), node_no=<span class="built_in">id</span>, frame_timestamp=frame_timestamp</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> sw_code == <span class="number">200</span>:</span><br><span class="line">                node_name, node_no, team, node_type, _, _ = sw_node.get_node_info()</span><br><span class="line">                initial_location = sw_node.get_location()[:<span class="number">3</span>]</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--UAV <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registered successfully: <span class="subst">&#123;node_name&#125;</span>, Type: <span class="subst">&#123;node_type&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--Initial position: x=<span class="subst">&#123;initial_location[<span class="number">0</span>]:<span class="number">.2</span>f&#125;</span>, y=<span class="subst">&#123;initial_location[<span class="number">1</span>]:<span class="number">.2</span>f&#125;</span>, z=<span class="subst">&#123;initial_location[<span class="number">2</span>]:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line">                self.node_info[sw_node] = &#123;</span><br><span class="line">                    <span class="string">&#x27;flight_altitude&#x27;</span>: initial_location[<span class="number">2</span>] + <span class="number">1.0</span>,  <span class="comment"># è®¾ç½®é£è¡Œé«˜åº¦ä¸ºèµ·å§‹zä½ç½®åŠ 1ç±³</span></span><br><span class="line">                    <span class="string">&#x27;ground_height&#x27;</span>: initial_location[<span class="number">2</span>] + <span class="number">0.1</span>  <span class="comment"># è®¾ç½®åœ°é¢é«˜åº¦ä¸ºåˆå§‹zä½ç½®</span></span><br><span class="line">                &#125;</span><br><span class="line">                self.positions.append((sw_node, <span class="built_in">id</span>, initial_location))  <span class="comment"># ä¿å­˜èŠ‚ç‚¹åŠå…¶ç¼–å·</span></span><br><span class="line">                self.nodes.append(sw_node)</span><br><span class="line">                <span class="keyword">return</span> sw_code, sw_node</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--UAV <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registration failed with code <span class="subst">&#123;sw_code&#125;</span>, attempt <span class="subst">&#123;attempt+<span class="number">1</span>&#125;</span> of <span class="subst">&#123;max_retries&#125;</span>&quot;</span>)</span><br><span class="line">                time.sleep(<span class="number">2</span>)  <span class="comment"># ç­‰å¾…2ç§’åé‡è¯•</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;UAV <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registration failed after <span class="subst">&#123;max_retries&#125;</span> attempts.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> sw_code, <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_to_position_xy</span>(<span class="params">self, node, target_x, target_y, target_z</span>):</span><br><span class="line">        node_index = self.nodes.index(node)</span><br><span class="line">        current_timestamp = <span class="built_in">int</span>(<span class="built_in">round</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">        node.control_kinetic_simply_global(x=target_x, y=target_y, z=target_z, v=<span class="number">3.0</span>, frame_timestamp=current_timestamp)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            current_location = node.get_location()[:<span class="number">3</span>]</span><br><span class="line">            distance = math.sqrt((current_location[<span class="number">0</span>] - target_x) ** <span class="number">2</span> + (current_location[<span class="number">1</span>] - target_y) ** <span class="number">2</span>)</span><br><span class="line">            self.update_position(node)  <span class="comment"># å®æ—¶æ›´æ–°ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> distance &lt;= <span class="number">1.5</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;[UAV <span class="subst">&#123;node_index + <span class="number">1</span>&#125;</span>] reached target position: x=<span class="subst">&#123;target_x:<span class="number">.2</span>f&#125;</span>, y=<span class="subst">&#123;target_y:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_to_position_z</span>(<span class="params">self, node, target_x, target_y, target_z</span>):</span><br><span class="line">        node_index = self.nodes.index(node)</span><br><span class="line">        current_timestamp = <span class="built_in">int</span>(<span class="built_in">round</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">        node.control_kinetic_simply_global(x=target_x, y=target_y, z=target_z, v=<span class="number">3.0</span>, frame_timestamp=current_timestamp)</span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            current_location = node.get_location()[:<span class="number">3</span>]</span><br><span class="line">            self.update_position(node)  <span class="comment"># å®æ—¶æ›´æ–°ä½ç½®</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">abs</span>(current_location[<span class="number">2</span>] - target_z) &lt;= <span class="number">0.2</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;[UAV <span class="subst">&#123;node_index + <span class="number">1</span>&#125;</span>] reached target altitude: z=<span class="subst">&#123;target_z:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            time.sleep(<span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_position</span>(<span class="params">self, node</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ›´æ–°å¹¶ä¿å­˜æ— äººæœºçš„å½“å‰ä½ç½®ã€‚&quot;&quot;&quot;</span></span><br><span class="line">        current_location = node.get_location()[:<span class="number">3</span>]</span><br><span class="line">        node_index = self.nodes.index(node)</span><br><span class="line">        self.positions[node_index] = (node, node_index + <span class="number">1</span>, current_location)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">takeoff</span>(<span class="params">self, node</span>):</span><br><span class="line">        location = node.get_location()</span><br><span class="line">        x, y, z = location[:<span class="number">3</span>]</span><br><span class="line">        target_z = self.node_info[node][<span class="string">&#x27;flight_altitude&#x27;</span>]  <span class="comment"># è·å–å¯¹åº”çš„é£è¡Œé«˜åº¦</span></span><br><span class="line">        self.move_to_position_z(node, x + <span class="number">0.5</span>, y + <span class="number">0.5</span>, target_z)  <span class="comment"># å‚ç›´èµ·é£éœ€è¦åœ¨xï¼Œyä¸Šæ·»åŠ ä¸€ç‚¹åç§»ï¼Œå¦åˆ™èµ·é£è¿‡æ…¢</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_forward</span>(<span class="params">self, node, distance</span>):</span><br><span class="line">        location = node.get_location()</span><br><span class="line">        x, y, z = location[:<span class="number">3</span>]</span><br><span class="line">        target_x = x + distance</span><br><span class="line">        self.move_to_position_xy(node, target_x, y, z)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_backward</span>(<span class="params">self, node, distance</span>):</span><br><span class="line">        location = node.get_location()</span><br><span class="line">        x, y, z = location[:<span class="number">3</span>]</span><br><span class="line">        target_x = x - distance</span><br><span class="line">        self.move_to_position_xy(node, target_x, y, z)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_left</span>(<span class="params">self, node, distance</span>):</span><br><span class="line">        location = node.get_location()</span><br><span class="line">        x, y, z = location[:<span class="number">3</span>]</span><br><span class="line">        target_y = y - distance</span><br><span class="line">        self.move_to_position_xy(node, x, target_y, z)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_right</span>(<span class="params">self, node, distance</span>):</span><br><span class="line">        location = node.get_location()</span><br><span class="line">        x, y, z = location[:<span class="number">3</span>]</span><br><span class="line">        target_y = y + distance</span><br><span class="line">        self.move_to_position_xy(node, x, target_y, z)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">execute_flight_plan</span>(<span class="params">self, flight_plan_funcs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡Œæ‰€æœ‰æ— äººæœºçš„é£è¡Œè®¡åˆ’ã€‚&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.nodes) &lt; <span class="built_in">len</span>(flight_plan_funcs):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Not all nodes were successfully registered. Adjusting the flight plans.&quot;</span>)</span><br><span class="line">            flight_plan_funcs = flight_plan_funcs[:<span class="built_in">len</span>(self.nodes)]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> ThreadPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">            futures = []</span><br><span class="line">            <span class="keyword">for</span> node, flight_plan_func <span class="keyword">in</span> <span class="built_in">zip</span>(self.nodes, flight_plan_funcs):</span><br><span class="line">                futures.append(executor.submit(flight_plan_func, node))</span><br><span class="line">            <span class="keyword">for</span> future <span class="keyword">in</span> futures:</span><br><span class="line">                future.result()  <span class="comment"># ç­‰å¾…æ‰€æœ‰æ— äººæœºå®Œæˆå…¶é£è¡Œè®¡åˆ’</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        parser = argparse.ArgumentParser()</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--ip&quot;</span>, default=<span class="string">&quot;127.0.0.1&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šæœåŠ¡å™¨IP&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-p&quot;</span>, <span class="string">&quot;--port&quot;</span>, default=<span class="number">2000</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šæœåŠ¡å™¨Port&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-n&quot;</span>, <span class="string">&quot;--number&quot;</span>, default=<span class="number">1</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šé£æœºæ•°é‡&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">        args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">        t1 = SwarmaeClass()</span><br><span class="line">        t1.create_client(args.ip, args.port)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(args.number):</span><br><span class="line">            t1.create_node(i+<span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">        </span><br><span class="line">        <span class="comment">#####################</span></span><br><span class="line">        <span class="comment"># å®šä¹‰é£è¡Œè®¡åˆ’</span></span><br><span class="line">        <span class="comment"># å‰é¢çš„éƒ¨åˆ†ä¸éœ€è¦æ”¹ï¼Œè¦æ§åˆ¶æ— äººæœºçš„é£è¡Œï¼Œåªéœ€ä¿®æ”¹ä¸‹é¢çš„éƒ¨åˆ†å³å¯</span></span><br><span class="line">        <span class="comment"># flight_plan_nå³ç¬¬nä¸ªæ— äººæœºçš„é£è¡Œè®¡åˆ’å‡½æ•°</span></span><br><span class="line">        <span class="comment"># t1.takeoff(node)  # èµ·é£</span></span><br><span class="line">        <span class="comment"># t1.move_forward(node, distance)  # å‘å‰ç§»åŠ¨distanceç±³</span></span><br><span class="line">        <span class="comment"># t1.move_backward(node, distance)  # å‘åç§»åŠ¨distanceç±³</span></span><br><span class="line">        <span class="comment"># t1.move_left(node, distance)  # å‘å·¦ç§»åŠ¨distanceç±³</span></span><br><span class="line">        <span class="comment"># t1.move_right(node, distance)  # å‘å³ç§»åŠ¨distanceç±³</span></span><br><span class="line">        <span class="comment">#####################</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å®šä¹‰ä¸åŒæ— äººæœºçš„é£è¡Œèˆªçº¿</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">flight_plan_1</span>(<span class="params">node</span>):</span><br><span class="line">            t1.takeoff(node)</span><br><span class="line">            t1.move_forward(node, <span class="number">10.0</span>) <span class="comment"># å‘å‰ç§»åŠ¨10ç±³</span></span><br><span class="line">            t1.move_left(node, <span class="number">5.0</span>) <span class="comment"># å‘å·¦ç§»åŠ¨5ç±³</span></span><br><span class="line">            t1.move_forward(node, <span class="number">10.0</span>) <span class="comment"># å‘å‰ç§»åŠ¨10ç±³</span></span><br><span class="line">            t1.move_right(node, <span class="number">5.0</span>) <span class="comment"># å‘å·¦ç§»åŠ¨5ç±³</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">flight_plan_2</span>(<span class="params">node</span>):</span><br><span class="line">            t1.takeoff(node)</span><br><span class="line">            t1.move_left(node, <span class="number">10.0</span>)</span><br><span class="line">            t1.move_forward(node, <span class="number">15.0</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">flight_plan_3</span>(<span class="params">node</span>):</span><br><span class="line">            t1.takeoff(node)</span><br><span class="line">            t1.move_forward(node, <span class="number">10.0</span>)</span><br><span class="line">            t1.move_left(node, <span class="number">25.0</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">flight_plan_4</span>(<span class="params">node</span>):</span><br><span class="line">            t1.takeoff(node)</span><br><span class="line">            t1.move_forward(node, <span class="number">15.0</span>)</span><br><span class="line">            t1.move_right(node, <span class="number">5.0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">flight_plan_5</span>(<span class="params">node</span>):</span><br><span class="line">            t1.takeoff(node)</span><br><span class="line">            t1.move_forward(node, <span class="number">30.0</span>)</span><br><span class="line">            t1.move_left(node, <span class="number">15.0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é£è¡Œè®¡åˆ’åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªæ— äººæœºçš„é£è¡Œè·¯çº¿</span></span><br><span class="line">        flight_plan_funcs = [</span><br><span class="line">            flight_plan_1,</span><br><span class="line">            flight_plan_2,</span><br><span class="line">            flight_plan_3,</span><br><span class="line">            flight_plan_4,</span><br><span class="line">            flight_plan_5</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        t1.execute_flight_plan(flight_plan_funcs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‰“å°æ‰€æœ‰æ— äººæœºçš„æœ€ç»ˆä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> node, index, position <span class="keyword">in</span> t1.positions:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;[UAV <span class="subst">&#123;index&#125;</span>] Final position: x=<span class="subst">&#123;position[<span class="number">0</span>]:<span class="number">.2</span>f&#125;</span>, y=<span class="subst">&#123;position[<span class="number">1</span>]:<span class="number">.2</span>f&#125;</span>, z=<span class="subst">&#123;position[<span class="number">2</span>]:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n--Simulation interrupted by user.&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\n--An error occurred: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨ï¼šè¯´æ˜åœ¨ä»£ç ä¸­ï¼Œå°†æ— äººæœºå‘å‰åå·¦å³é£è¡Œå°è£…ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå¤šçº¿ç¨‹æ§åˆ¶å¤šè¾†æ— äººæœºï¼Œåˆ¤æ–­æ— äººæœºæ˜¯å¦åˆ°è¾¾æŒ‡å®šç›®æ ‡ç‚¹æ‰ç»™ä¸‹ä¸€ä¸ªç›®æ ‡ç‚¹è¿›è¡Œæ§åˆ¶ï¼Œæ ¹æ®ä¸Šé¢çš„ä¾‹ç¨‹è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å†…å®¹ä¸ºæ— äººæœºçš„é£è¡Œèˆªçº¿ï¼Œå…¶ä½™ä¸éœ€è¦ä¿®æ”¹</strong></p><p><code>flight_plan_funcs</code>åˆ—è¡¨è¡¨ç¤ºæ— äººæœºæ§åˆ¶å‡½æ•°åˆ—è¡¨ï¼Œ<code>flight_plan_1</code>è¡¨ç¤ºç¬¬1ä¸ªæ— äººæœºçš„å…·ä½“é£è¡Œæ§åˆ¶</p></blockquote><h3 id="5-2å¤šå°è½¦æ§åˆ¶æ¡ˆä¾‹">5.2å¤šå°è½¦æ§åˆ¶æ¡ˆä¾‹</h3><blockquote><p>ä½¿ç”¨ï¼š<code>python simple_test_car.py</code></p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> swarmae.SwarmAEClient <span class="keyword">import</span> SwarmAEClient</span><br><span class="line"><span class="keyword">from</span> concurrent.futures <span class="keyword">import</span> ThreadPoolExecutor</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SwarmaeClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        self.ae_client = <span class="literal">None</span></span><br><span class="line">        self.vehicles = []</span><br><span class="line">        self.vehicle_info = &#123;&#125;  <span class="comment"># å­˜å‚¨æ¯è¾†è½¦çš„åˆå§‹ä½ç½®å’Œå…¶ä»–ä¿¡æ¯</span></span><br><span class="line">        self.positions = []  <span class="comment"># å­˜å‚¨æ¯è¾†è½¦çš„å½“å‰ä½ç½®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self, ue_ip=<span class="string">&quot;127.0.0.1&quot;</span>, ue_port=<span class="number">2000</span></span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;--Connecting to UE4 simulation:&quot;</span>, ue_ip, ue_port)</span><br><span class="line">        self.ae_client = SwarmAEClient(ue_ip=ue_ip, ue_port=ue_port)</span><br><span class="line">        <span class="keyword">return</span> self.ae_client</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_vehicle</span>(<span class="params">self, <span class="built_in">id</span>, max_retries=<span class="number">3</span></span>):</span><br><span class="line">        <span class="keyword">for</span> attempt <span class="keyword">in</span> <span class="built_in">range</span>(max_retries):</span><br><span class="line">            frame_timestamp = <span class="built_in">int</span>(<span class="built_in">round</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">            frame_timestamp, sw_vehicle, sw_code = self.ae_client.register_node(</span><br><span class="line">                node_type=<span class="string">&quot;å››è½®è½¦&quot;</span>, node_name=<span class="string">&quot;æ— äººè½¦&quot;</span> + <span class="built_in">str</span>(<span class="built_in">id</span>), node_no=<span class="built_in">id</span>, frame_timestamp=frame_timestamp</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> sw_code == <span class="number">200</span>:</span><br><span class="line">                vehicle_name, vehicle_no, team, vehicle_type, _, _ = sw_vehicle.get_node_info()</span><br><span class="line">                initial_location = sw_vehicle.get_location()[:<span class="number">3</span>]</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--Vehicle <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registered successfully: <span class="subst">&#123;vehicle_name&#125;</span>, Type: <span class="subst">&#123;vehicle_type&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--Initial position: x=<span class="subst">&#123;initial_location[<span class="number">0</span>]:<span class="number">.2</span>f&#125;</span>, y=<span class="subst">&#123;initial_location[<span class="number">1</span>]:<span class="number">.2</span>f&#125;</span>, z=<span class="subst">&#123;initial_location[<span class="number">2</span>]:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line">                self.vehicle_info[sw_vehicle] = &#123;</span><br><span class="line">                    <span class="string">&#x27;initial_location&#x27;</span>: initial_location</span><br><span class="line">                &#125;</span><br><span class="line">                self.positions.append((sw_vehicle, <span class="built_in">id</span>, initial_location))  <span class="comment"># ä¿å­˜è½¦è¾†åŠå…¶ID</span></span><br><span class="line">                self.vehicles.append(sw_vehicle)</span><br><span class="line">                <span class="keyword">return</span> sw_code, sw_vehicle</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;--Vehicle <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registration failed with code <span class="subst">&#123;sw_code&#125;</span>, attempt <span class="subst">&#123;attempt+<span class="number">1</span>&#125;</span> of <span class="subst">&#123;max_retries&#125;</span>&quot;</span>)</span><br><span class="line">                time.sleep(<span class="number">2</span>)  <span class="comment"># ç­‰å¾…2ç§’åé‡è¯•</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Vehicle <span class="subst">&#123;<span class="built_in">id</span>&#125;</span> registration failed after <span class="subst">&#123;max_retries&#125;</span> attempts.&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> sw_code, <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">move_vehicle</span>(<span class="params">self, vehicle, throttle, steer=<span class="number">0.0</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ§åˆ¶è½¦è¾†çš„ç§»åŠ¨å’Œè½¬å‘&quot;&quot;&quot;</span></span><br><span class="line">        vehicle.apply_control(throttle, steer, <span class="number">0.0</span>, <span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="comment"># vehicle.set_vehicle_steer(steer)  # è®¾ç½®è½¦è¾†æ–¹å‘ç›˜è½¬è§’</span></span><br><span class="line">        <span class="comment"># vehicle.control_vehicle(throttle=throttle)  # æ§åˆ¶è½¦è¾†æ²¹é—¨</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ã€Vehicle <span class="subst">&#123;self.vehicles.index(vehicle) + <span class="number">1</span>&#125;</span>ã€‘ is moving with throttle=<span class="subst">&#123;throttle&#125;</span>, steer=<span class="subst">&#123;steer&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">brake_vehicle</span>(<span class="params">self, vehicle</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ§åˆ¶è½¦è¾†åˆ¹è½¦å¹¶ç¡®ä¿è½¦è¾†åœæ­¢&quot;&quot;&quot;</span></span><br><span class="line">        vehicle.apply_control(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="comment"># while True:</span></span><br><span class="line">        <span class="comment">#     # è·å–è½¦è¾†å½“å‰é€Ÿåº¦ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">#     velocity_x, velocity_y, velocity_z, velocity, _, _, _, _, _, p, q, r, _ = vehicle.get_velocity()</span></span><br><span class="line">        <span class="comment">#     # speed = math.sqrt(velocity_x**2 + velocity_y**2 + velocity_z**2)  # è®¡ç®—æ€»é€Ÿåº¦</span></span><br><span class="line">        <span class="comment">#     # print(velocity_x, velocity_y)</span></span><br><span class="line">            </span><br><span class="line">        <span class="comment">#     if velocity_x &lt;= 0.0 or velocity_y &lt;= 0.0:  # å¦‚æœé€Ÿåº¦æ¥è¿‘é›¶ï¼Œåˆ™åœæ­¢è½¦è¾†</span></span><br><span class="line">        <span class="comment">#         vehicle.apply_control(0.0, 0.0, 0.0, 1, 0)</span></span><br><span class="line">        <span class="comment">#         # vehicle.control_vehicle(throttle=0.0)</span></span><br><span class="line">        <span class="comment">#         print(f&quot;ã€Vehicle &#123;self.vehicles.index(vehicle) + 1&#125;ã€‘ has stopped.&quot;)</span></span><br><span class="line">        <span class="comment">#         break</span></span><br><span class="line">        <span class="comment">#     else:</span></span><br><span class="line">        <span class="comment">#         vehicle.control_vehicle(throttle=-1.0)  # å¦åˆ™ç»§ç»­å‡é€Ÿ</span></span><br><span class="line">        <span class="comment">#     time.sleep(0.1)  # ç­‰å¾…0.1ç§’å†æ¬¡æ£€æŸ¥é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_position</span>(<span class="params">self, vehicle</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ›´æ–°å¹¶ä¿å­˜è½¦è¾†çš„å½“å‰ä½ç½®ã€‚&quot;&quot;&quot;</span></span><br><span class="line">        current_location = vehicle.get_location()[:<span class="number">3</span>]</span><br><span class="line">        vehicle_index = self.vehicles.index(vehicle)</span><br><span class="line">        self.positions[vehicle_index] = (vehicle, vehicle_index + <span class="number">1</span>, current_location)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">execute_vehicle_movement</span>(<span class="params">self, movement_func, vehicle</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡Œå•ä¸ªè½¦è¾†çš„ç§»åŠ¨è®¡åˆ’ã€‚&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> movement_func:</span><br><span class="line">            movement_func(vehicle)  <span class="comment"># æ‰§è¡Œä¼ å…¥çš„ç§»åŠ¨è®¡åˆ’å‡½æ•°</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;No movement plan provided for vehicle <span class="subst">&#123;vehicle&#125;</span>. Skipping control.&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">execute_movement_plans</span>(<span class="params">self, movement_plan_funcs</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡Œæ‰€æœ‰è½¦è¾†çš„ç§»åŠ¨è®¡åˆ’ã€‚&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(self.vehicles) &lt; <span class="built_in">len</span>(movement_plan_funcs):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Not all vehicles were successfully registered. Adjusting the movement plans.&quot;</span>)</span><br><span class="line">            movement_plan_funcs = movement_plan_funcs[:<span class="built_in">len</span>(self.vehicles)]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> ThreadPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">            futures = []</span><br><span class="line">            <span class="keyword">for</span> vehicle, movement_plan_func <span class="keyword">in</span> <span class="built_in">zip</span>(self.vehicles, movement_plan_funcs):</span><br><span class="line">                futures.append(executor.submit(self.execute_vehicle_movement, movement_plan_func, vehicle))</span><br><span class="line">            <span class="keyword">for</span> future <span class="keyword">in</span> futures:</span><br><span class="line">                future.result()  <span class="comment"># ç­‰å¾…æ‰€æœ‰è½¦è¾†å®Œæˆå…¶ç§»åŠ¨è®¡åˆ’</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        parser = argparse.ArgumentParser()</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-i&quot;</span>, <span class="string">&quot;--ip&quot;</span>, default=<span class="string">&quot;127.0.0.1&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šæœåŠ¡å™¨IP&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>)</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-p&quot;</span>, <span class="string">&quot;--port&quot;</span>, default=<span class="number">2000</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šæœåŠ¡å™¨Port&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">        parser.add_argument(<span class="string">&quot;-n&quot;</span>, <span class="string">&quot;--number&quot;</span>, default=<span class="number">2</span>, <span class="built_in">help</span>=<span class="string">&quot;æŒ‡å®šè½¦è¾†æ•°é‡&quot;</span>, <span class="built_in">type</span>=<span class="built_in">int</span>)</span><br><span class="line">        args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">        t1 = SwarmaeClass()</span><br><span class="line">        t1.create_client(args.ip, args.port)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(args.number):</span><br><span class="line">            t1.create_vehicle(i+<span class="number">1</span>)</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        <span class="comment">#####################</span></span><br><span class="line">        <span class="comment"># å®šä¹‰ç§»åŠ¨è®¡åˆ’</span></span><br><span class="line">        <span class="comment"># å‰é¢çš„éƒ¨åˆ†ä¸éœ€è¦æ”¹ï¼Œè¦æ§åˆ¶è½¦è¾†çš„ç§»åŠ¨ï¼Œåªéœ€ä¿®æ”¹ä¸‹é¢çš„éƒ¨åˆ†å³å¯</span></span><br><span class="line">        <span class="comment"># movement_plan_nå³ç¬¬nä¸ªè½¦è¾†çš„ç§»åŠ¨è®¡åˆ’å‡½æ•°</span></span><br><span class="line">        <span class="comment"># t1.move_vehicle(vehicle, throttle, steer)  # ç§»åŠ¨</span></span><br><span class="line">        <span class="comment">#####################</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">movement_plan_1</span>(<span class="params">vehicle</span>):</span><br><span class="line">            t1.move_vehicle(vehicle, throttle=<span class="number">1.0</span>)  <span class="comment"># å‘å‰ç§»åŠ¨</span></span><br><span class="line">            time.sleep(<span class="number">5</span>)  <span class="comment"># ç§»åŠ¨5ç§’</span></span><br><span class="line">            t1.brake_vehicle(vehicle)  <span class="comment"># åˆ¹è½¦å¹¶åœæ­¢</span></span><br><span class="line">            t1.move_vehicle(vehicle, throttle=<span class="number">0.0</span>, steer=-<span class="number">0.5</span>)  <span class="comment"># å‘å·¦è½¬</span></span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">            t1.brake_vehicle(vehicle)  <span class="comment"># åˆ¹è½¦å¹¶åœæ­¢</span></span><br><span class="line">            t1.move_vehicle(vehicle, throttle=<span class="number">1.0</span>)</span><br><span class="line">            time.sleep(<span class="number">4</span>)</span><br><span class="line">            t1.brake_vehicle(vehicle)  <span class="comment"># åˆ¹è½¦å¹¶åœæ­¢</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">movement_plan_2</span>(<span class="params">vehicle</span>):</span><br><span class="line">            t1.move_vehicle(vehicle, throttle=<span class="number">0.1</span>, steer=-<span class="number">1.0</span>)  <span class="comment"># å‘å‰å‘å·¦ç§»åŠ¨</span></span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">            t1.move_vehicle(vehicle, throttle=<span class="number">1.0</span>, steer=<span class="number">0</span>)  <span class="comment"># å‘å‰å‘å·¦ç§»åŠ¨</span></span><br><span class="line">            time.sleep(<span class="number">5</span>)</span><br><span class="line">            t1.brake_vehicle(vehicle)  <span class="comment"># åˆ¹è½¦å¹¶åœæ­¢</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç§»åŠ¨è®¡åˆ’åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªè½¦è¾†çš„ç§»åŠ¨è·¯çº¿</span></span><br><span class="line">        movement_plan_funcs = [</span><br><span class="line">            movement_plan_1,</span><br><span class="line">            movement_plan_2,</span><br><span class="line">            <span class="comment"># æ·»åŠ æ›´å¤šè½¦è¾†çš„ç§»åŠ¨è®¡åˆ’</span></span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">        t1.execute_movement_plans(movement_plan_funcs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‰“å°æ‰€æœ‰è½¦è¾†çš„æœ€ç»ˆä½ç½®</span></span><br><span class="line">        <span class="keyword">for</span> vehicle, index, position <span class="keyword">in</span> t1.positions:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ã€Vehicle <span class="subst">&#123;index&#125;</span>ã€‘ Final position: x=<span class="subst">&#123;position[<span class="number">0</span>]:<span class="number">.2</span>f&#125;</span>, y=<span class="subst">&#123;position[<span class="number">1</span>]:<span class="number">.2</span>f&#125;</span>, z=<span class="subst">&#123;position[<span class="number">2</span>]:<span class="number">.2</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n--Simulation interrupted by user.&quot;</span>)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\n--An error occurred: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="5-3åœ°å›¾ä¿¡æ¯è¯»å–">5.3åœ°å›¾ä¿¡æ¯è¯»å–</h3><blockquote><p>ä½¿ç”¨ï¼š<code>python get_map_info.py -s 1</code>ï¼ˆ-s 1è¡¨ç¤ºç¬¬ä¸€ä¸ªç§‘ç›®çš„åœ°å›¾ä¿¡æ¯ï¼Œéœ€è¦å…ˆæ‰“å¼€ä»¿çœŸåœ°å›¾æ‰èƒ½è·å–ä¿¡æ¯ï¼‰</p><p>åœ¨å…·ä½“ä»£ç ä¸­è°ƒç”¨ï¼š</p><ul><li><p>å®šä¹‰å…¨å±€å˜é‡<code>map_info = &#123;&#125;</code>ï¼Œæ–¹ä¾¿åœ¨å…¶ä»–å‡½æ•°ä¸­è°ƒç”¨</p></li><li><p>å¤åˆ¶å¯¹åº”ç§‘ç›®çš„å‡½æ•°ï¼Œå¦‚<code>def get_subject_one_info(world)</code></p></li><li><p>åœ¨mainå‡½æ•°ä¸­æ·»åŠ <code>map_info = get_subject_one_info(world)</code></p></li><li><p>è°ƒç”¨åœ°å›¾ä¿¡æ¯çš„æ–¹å¼ï¼š</p><ul><li><p><code>map_info['BP_Bridge']['local'][0][0]</code>ï¼Œè¡¨ç¤ºç§‘ç›®ä¸€ä¸­ç¬¬ä¸€æ¡æ¡¥çš„x</p></li><li><p><code>map_info['BP_Bridge']['local'][0][1]</code>ï¼Œè¡¨ç¤ºç§‘ç›®ä¸€ä¸­ç¬¬ä¸€æ¡æ¡¥çš„y</p></li><li><p><code>map_info['BP_Bridge']['local'][0]</code>ï¼Œè¡¨ç¤ºç§‘ç›®ä¸€ä¸­ç¬¬ä¸€æ¡æ¡¥çš„x,y,z</p></li><li><p><code>map_info['BP_Bridge']['local'][1]</code>ï¼Œè¡¨ç¤ºç§‘ç›®ä¸€ä¸­ç¬¬äºŒæ¡æ¡¥çš„x,y,z</p></li><li><p><code>map_info['SM_SpeedBump']['local'][0]</code>ï¼Œè¡¨ç¤ºç§‘ç›®ä¸€ä¸­ç¬¬ä¸€æ¡åŒºåŸŸçº¿çš„x,y,z</p></li></ul></li></ul><blockquote><p>å¦‚æœæ˜¯ç§‘ç›®äº”ä¸­è¿˜æœ‰é—¨æ¡†çš„æ—‹è½¬ä¿¡æ¯ï¼Œåˆ™ä¸º<code>map_info['SM_DoorFrame']['rotation']</code>ï¼Œè¡¨ç¤ºç§‘ç›®äº”ä¸­ç¬¬ä¸€æ¡å¤–é—¨æ¡†çš„pitch, yaw, roll</p></blockquote><ol><li>ç§‘ç›®ä¸€</li></ol><table><thead><tr><th>é™æ€èµ„æºå</th><th>åç§°å‰ç¼€</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆSDKæ–¹å¼ï¼‰</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆfbxæ–¹å¼ï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>æ¡¥</td><td><code>BP_Bridge</code></td><td>ç¬¬ä¸€æ®µï¼š<code>(x=-515.309021, y=447.157715)</code></td><td><code>x: -511.30445003032685, y: 447.1577346801758, z: 485.1984389305115</code></td><td>æ•´åº§æ¡¥ç”±12éƒ¨åˆ†ç»„æˆ</td></tr><tr><td>åŒºåŸŸçº¿</td><td><code>SM_SpeedBump</code></td><td>ç¬¬ä¸€æ¡ï¼š<code>x = -1072.7</code>ã€‚ç¬¬äºŒæ¡ï¼š<code>x = -1062.7</code></td><td><code>x: -1072.72, y: 439.79998779296875, z: 486.4460653877258</code></td><td>ä¸€å…±äº”æ¡</td></tr></tbody></table><ol start="2"><li>ç§‘ç›®äºŒ</li></ol><table><thead><tr><th>é™æ€èµ„æºå</th><th>åç§°å‰ç¼€</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆSDKæ–¹å¼ï¼‰</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆfbxæ–¹å¼ï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>ç«åŠ›æ©æŠ¤åŒºåŸŸ</td><td><code>SM_Wall_Single</code></td><td><code>x=1286.280029, y=423.690002, z=486.449982</code></td><td><code>x: 1286.2800677490218, y: 423.69001159667823, z: 487.70000022888183</code></td><td>è·å–åˆ°é®æ©åŒºåŸŸçš„ä¸¤ä¸ªé¡¶ç‚¹ä¿¡æ¯</td></tr><tr><td>è·¯éšœ</td><td><code>SM_Obstacle</code></td><td><code>x=1761.797974, y=450.703613, z=487.442017</code></td><td><code>x: 1761.797890625, y: 450.7036328125, z: 487.44203125</code></td><td>è·¯éšœæœ‰å››ä¸ª</td></tr></tbody></table><ol start="3"><li>ç§‘ç›®å››</li></ol><table><thead><tr><th>é™æ€èµ„æºå</th><th>åç§°å‰ç¼€</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆSDKæ–¹å¼ï¼‰</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆfbxæ–¹å¼ï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>èˆªè·¯ç‚¹ä¿¡æ¯</td><td><code>Waypoint</code></td><td>ç¬¬ä¸€ä¸ªï¼š<code>x=504.899994, y=89.610001</code></td><td><code>x: 504.89998046875, y: 89.6099609375, z: 490.92625</code></td><td>ä¸€å…±ä¸¤ä¸ªèˆªè·¯ç‚¹ã€‚</td></tr></tbody></table><ol start="4"><li>ç§‘ç›®äº”</li></ol><table><thead><tr><th>é™æ€èµ„æºå</th><th>åç§°å‰ç¼€</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆSDKæ–¹å¼ï¼‰</th><th>åæ ‡ä¿¡æ¯ç¤ºä¾‹ï¼ˆfbxæ–¹å¼ï¼‰</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>å¤–é—¨æ¡†</td><td><code>SM_DoorFrame</code></td><td>ç¬¬ä¸€ä¸ªï¼š<code>(x=780.000000, y=937.599976, z=490.551331)é—¨çš„è½¬å‘ï¼šRotation(pitch=0.000000, yaw=0.000000, roll=0.000000)</code></td><td></td><td>ä¸€å…±ä¸¤ä¸ªé—¨ã€‚ fbxæ–¹å¼è¯»å–ç¼ºå°‘ä¸€ä¸ªé—¨æ¡†ä¿¡æ¯ï¼Œå¯ç›´æ¥æŸ¥è¯¢å†…é—¨æ¡†ä¿¡æ¯å®ç°ç©¿è¶Šã€‚</td></tr><tr><td>å†…é—¨æ¡†ï¼ˆéœ€è¦ç©¿è¶Šçš„é—¨æ¡†ï¼‰</td><td><code>BP_DoorInst</code></td><td>è¿™ä¸¤ä¸ªçš„ Xï¼ŒYç›¸åŒï¼ŒZ ä¸åŒï¼Œç»å¯¹å€¼|Z1 - Z2|æ˜¯é—¨çš„é«˜åº¦</td><td><code>x: 780.0, y: 937.6, z: 502.2</code></td><td>ä¸€å…±ä¸¤ä¸ªé—¨ã€‚</td></tr></tbody></table></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">map_info = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_subject_one_info</span>(<span class="params">world</span>):</span><br><span class="line">    subject_one_info = &#123;</span><br><span class="line">        <span class="string">&#x27;Bridges&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: []</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;SpeedBumps&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–æ¡¥çš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">    BP_Bridges = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;BP_Bridge&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> bridge <span class="keyword">in</span> BP_Bridges:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(bridge, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(bridge.transform, <span class="string">&#x27;location&#x27;</span>):</span><br><span class="line">            subject_one_info[<span class="string">&#x27;Bridges&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                bridge.transform.location.x,</span><br><span class="line">                bridge.transform.location.y,</span><br><span class="line">                bridge.transform.location.z</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–åŒºåŸŸçº¿çš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">    SM_SpeedBumps = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;SM_SpeedBump&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> speed_bump <span class="keyword">in</span> SM_SpeedBumps:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(speed_bump, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(speed_bump.transform, <span class="string">&#x27;location&#x27;</span>):</span><br><span class="line">            subject_one_info[<span class="string">&#x27;SpeedBumps&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                speed_bump.transform.location.x,</span><br><span class="line">                speed_bump.transform.location.y,</span><br><span class="line">                speed_bump.transform.location.z</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> subject_one_info</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_subject_two_info</span>(<span class="params">world</span>):</span><br><span class="line">    subject_two_info = &#123;</span><br><span class="line">        <span class="string">&#x27;FireCoverArea&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: []</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;Obstacles&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–ç«åŠ›æ©æŠ¤åŒºåŸŸçš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">    SM_Walls = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;SM_Wall_Single&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> wall <span class="keyword">in</span> SM_Walls:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(wall, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(wall.transform, <span class="string">&#x27;location&#x27;</span>):</span><br><span class="line">            subject_two_info[<span class="string">&#x27;FireCoverArea&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                wall.transform.location.x,</span><br><span class="line">                wall.transform.location.y,</span><br><span class="line">                wall.transform.location.z</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–è·¯éšœçš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">    SM_Obstacles = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;SM_Obstacle&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> obstacle <span class="keyword">in</span> SM_Obstacles:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(obstacle, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(obstacle.transform, <span class="string">&#x27;location&#x27;</span>):</span><br><span class="line">            subject_two_info[<span class="string">&#x27;Obstacles&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                obstacle.transform.location.x,</span><br><span class="line">                obstacle.transform.location.y,</span><br><span class="line">                obstacle.transform.location.z</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> subject_two_info</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_subject_four_info</span>(<span class="params">world</span>):</span><br><span class="line">    subject_four_info = &#123;</span><br><span class="line">        <span class="string">&#x27;Waypoints&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–èˆªè·¯ç‚¹çš„åæ ‡ä¿¡æ¯</span></span><br><span class="line">    Waypoints = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;Waypoint&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> waypoint <span class="keyword">in</span> Waypoints:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(waypoint, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(waypoint.transform, <span class="string">&#x27;location&#x27;</span>):</span><br><span class="line">            subject_four_info[<span class="string">&#x27;Waypoints&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                waypoint.transform.location.x,</span><br><span class="line">                waypoint.transform.location.y,</span><br><span class="line">                waypoint.transform.location.z</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> subject_four_info</span><br><span class="line">            </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_subject_five_info</span>(<span class="params">world</span>):</span><br><span class="line">    subject_five_info = &#123;</span><br><span class="line">        <span class="string">&#x27;OuterDoorFrames&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: [],</span><br><span class="line">            <span class="string">&#x27;rotation&#x27;</span>: []</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">&#x27;InnerDoorFrames&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;location&#x27;</span>: [],</span><br><span class="line">            <span class="string">&#x27;rotation&#x27;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–å¤–é—¨æ¡†çš„ä½ç½®ä¿¡æ¯å’Œè§’åº¦ä¿¡æ¯</span></span><br><span class="line">    SM_DoorFrames = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;SM_DoorFrame&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> door_frame <span class="keyword">in</span> SM_DoorFrames:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(door_frame, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(door_frame.transform, <span class="string">&#x27;location&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(door_frame.transform, <span class="string">&#x27;rotation&#x27;</span>):</span><br><span class="line">            subject_five_info[<span class="string">&#x27;OuterDoorFrames&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                door_frame.transform.location.x,</span><br><span class="line">                door_frame.transform.location.y,</span><br><span class="line">                door_frame.transform.location.z</span><br><span class="line">            ])</span><br><span class="line">            subject_five_info[<span class="string">&#x27;OuterDoorFrames&#x27;</span>][<span class="string">&#x27;rotation&#x27;</span>].append([</span><br><span class="line">                door_frame.transform.rotation.pitch,</span><br><span class="line">                door_frame.transform.rotation.yaw,</span><br><span class="line">                door_frame.transform.rotation.roll</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–å†…é—¨æ¡†çš„ä½ç½®ä¿¡æ¯å’Œè§’åº¦ä¿¡æ¯</span></span><br><span class="line">    BP_DoorInsts = <span class="built_in">list</span>(<span class="built_in">filter</span>(<span class="keyword">lambda</span> x: x.name.startswith(<span class="string">&#x27;BP_DoorInst&#x27;</span>), world.get_environment_objects()))</span><br><span class="line">    <span class="keyword">for</span> door_inst <span class="keyword">in</span> BP_DoorInsts:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(door_inst, <span class="string">&#x27;transform&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(door_inst.transform, <span class="string">&#x27;location&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(door_inst.transform, <span class="string">&#x27;rotation&#x27;</span>):</span><br><span class="line">            subject_five_info[<span class="string">&#x27;InnerDoorFrames&#x27;</span>][<span class="string">&#x27;location&#x27;</span>].append([</span><br><span class="line">                door_inst.transform.location.x,</span><br><span class="line">                door_inst.transform.location.y,</span><br><span class="line">                door_inst.transform.location.z</span><br><span class="line">            ])</span><br><span class="line">            subject_five_info[<span class="string">&#x27;InnerDoorFrames&#x27;</span>][<span class="string">&#x27;rotation&#x27;</span>].append([</span><br><span class="line">                door_inst.transform.rotation.pitch,</span><br><span class="line">                door_inst.transform.rotation.yaw,</span><br><span class="line">                door_inst.transform.rotation.roll</span><br><span class="line">            ])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> subject_five_info</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    argparser = argparse.ArgumentParser(description=__doc__)</span><br><span class="line">    argparser.add_argument(<span class="string">&#x27;-i&#x27;</span>, <span class="string">&#x27;--address&#x27;</span>, default=<span class="string">&#x27;127.0.0.1&#x27;</span>)</span><br><span class="line">    argparser.add_argument(<span class="string">&#x27;-p&#x27;</span>, <span class="string">&#x27;--port&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,default=<span class="number">2000</span>)</span><br><span class="line">    argparser.add_argument(<span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;--number&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,default=<span class="number">1</span>)</span><br><span class="line">    argparser.add_argument(<span class="string">&#x27;-s&#x27;</span>, <span class="string">&#x27;--subject&#x27;</span>,<span class="built_in">type</span>=<span class="built_in">int</span>,default=<span class="number">1</span>)</span><br><span class="line">    args = argparser.parse_args()</span><br><span class="line"></span><br><span class="line">    ue_ip = args.address.strip()</span><br><span class="line">    ue_port = args.port</span><br><span class="line">    num = args.number</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 1. é¦–å…ˆå¼•å…¥sdk</span></span><br><span class="line">        <span class="keyword">from</span> swarmae.SwarmAEClient <span class="keyword">import</span> SwarmAEClient</span><br><span class="line">        <span class="keyword">from</span> swarmae.SwarmAEWorld <span class="keyword">import</span> SwarmAEWorld</span><br><span class="line">        <span class="comment"># 2. è¿æ¥UE</span></span><br><span class="line">        client = SwarmAEClient(ue_ip=ue_ip, ue_port=ue_port)</span><br><span class="line">        <span class="comment"># sdkè¯»å–ä»¿çœŸä¸–ç•Œï¼Œéœ€è¦ 1.0.1 sdk æ‰æ”¯æŒ</span></span><br><span class="line">        timestamp, world, code = client.get_world()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è·å–ç§‘ç›®çš„åœ°å›¾ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> args.subject == <span class="number">1</span>:</span><br><span class="line">            map_info = get_subject_one_info(world)</span><br><span class="line">        <span class="keyword">elif</span> args.subject == <span class="number">2</span>:</span><br><span class="line">            map_info = get_subject_two_info(world)</span><br><span class="line">        <span class="keyword">elif</span> args.subject == <span class="number">4</span>:</span><br><span class="line">            map_info = get_subject_four_info(world)</span><br><span class="line">        <span class="keyword">elif</span> args.subject == <span class="number">5</span>:</span><br><span class="line">            map_info = get_subject_five_info(world)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(map_info)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        main()</span><br><span class="line">    <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><!-- ## 6.Linuxä¸­è¿è¡Œä»¿çœŸç¯å¢ƒ### 6.1å®‰è£…wsl+æ˜¾å¡é©±åŠ¨+å¼€å¯OpenGLæ¸²æŸ“1. å®‰è£…WSL2 Ubuntu20.04ï¼šå‚è€ƒ[https://blog.csdn.net/weixin_57367513/article/details/135001273](https://blog.csdn.net/weixin_57367513/article/details/135001273)2. æ›´æ–°WSL2ï¼šç¡®ä¿ä½ å·²ç»å®‰è£…äº†æœ€æ–°ç‰ˆæœ¬çš„WSL2ã€‚<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --update</span><br></pre></td></tr></table></figure><ol start="3"><li>ç¡®ä¿åœ¨WSL2ä¸­å¯ç”¨äº†CUDAæ”¯æŒã€‚ä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®‰è£…CUDAå·¥å…·åŒ…ï¼š</li></ol><p>â€‹æ·»åŠ NVIDIAçš„APTæºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/cuda-wsl-ubuntu.pin</span><br><span class="line">sudo <span class="built_in">mv</span> cuda-wsl-ubuntu.pin /etc/apt/preferences.d/cuda-repository-pin-600</span><br><span class="line">sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/3bf863cc.pub</span><br><span class="line">sudo add-apt-repository <span class="string">&quot;deb https://developer.download.nvidia.com/compute/cuda/repos/wsl-ubuntu/x86_64/ /&quot;</span></span><br></pre></td></tr></table></figure><p>â€‹æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¹¶å®‰è£…CUDAå·¥å…·åŒ…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install cuda</span><br></pre></td></tr></table></figure><p>â€‹éªŒè¯CUDAæ”¯æŒï¼š å®Œæˆå®‰è£…åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯CUDAæ˜¯å¦æ­£ç¡®å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure><p>â€‹æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹è¯´æ˜æ˜¾å¡é©±åŠ¨å®‰è£…æˆåŠŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(base) laohanba@DESKTOP-37R6FD6:~$ nvidia-smi</span><br><span class="line">Mon Sep  2 16:18:30 2024       </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 560.31.01              Driver Version: 560.81         CUDA Version: 12.6     |</span><br><span class="line">|-----------------------------------------+------------------------+----------------------+</span><br><span class="line">| GPU  Name                 Persistence-M | Bus-Id          Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp   Perf          Pwr:Usage/Cap |           Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                                         |                        |               MIG M. |</span><br><span class="line">|=========================================+========================+======================|</span><br><span class="line">|   0  NVIDIA GeForce RTX 4060 Ti     On  |   00000000:01:00.0  On |                  N/A |</span><br><span class="line">|  0%   40C    P3             34W /  165W |    2420MiB /  16380MiB |     22%      Default |</span><br><span class="line">|                                         |                        |                  N/A |</span><br><span class="line">+-----------------------------------------+------------------------+----------------------+</span><br><span class="line">                                                                                         </span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                              |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                              GPU Memory |</span><br><span class="line">|        ID   ID                                                               Usage      |</span><br><span class="line">|=========================================================================================|</span><br><span class="line">|    0   N/A  N/A        27      G   /Xwayland                                   N/A      |</span><br><span class="line">|    0   N/A  N/A        65      G   /Xwayland                                   N/A      |</span><br><span class="line">+-----------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><ol start="4"><li><p>å¼€å¯OpenGLæ¸²æŸ“</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:kisak/kisak-mesa</span><br><span class="line">sudo apt update &amp;&amp; sudo apt upgrade</span><br></pre></td></tr></table></figure></li></ol><h3 id="5-2ä¿®æ”¹é…ç½®æ–‡ä»¶">5.2ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><blockquote><p>æ­¤å¤„è§Windowséƒ¨åˆ†ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ¨åˆ†æŒ‡ä»¤ä¸åŒ</p></blockquote><h3 id="5-3-æŒ‰æµç¨‹å¯åŠ¨ä»¿çœŸ">5.3 æŒ‰æµç¨‹å¯åŠ¨ä»¿çœŸ</h3><ul><li><p>å¯åŠ¨ä»¿çœŸ</p><pre><code class="language-sh">``` --&gt;</code></pre></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-èµ„æ–™&quot;&gt;1.èµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¯”èµ›å®˜æ–¹é“¾æ¥ï¼š&lt;/strong&gt;&lt;a href=&quot;https://www.osredm.com/competition/JQTJ&quot;&gt;https://www.osredm.com/competitio</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>ã€ESP-IDF5.xã€‘ ESP32/ESP8266é©±åŠ¨SHT3xæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨</title>
    <link href="https://www.mgodmonkey.cn/posts/a2ae83d0.html"/>
    <id>https://www.mgodmonkey.cn/posts/a2ae83d0.html</id>
    <published>2024-08-23T07:11:17.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒ">ç¯å¢ƒ</h2><ul><li>è½¯ä»¶ç¯å¢ƒ<ul><li>VScode</li><li>ESP-IDF5.x</li></ul></li><li>ç¡¬ä»¶ç¯å¢ƒ<ul><li>esp32 / esp8266</li><li>sht3xæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨</li></ul></li></ul><p>SHT3xå‘¨å›´ç”µè·¯è¿æ¥å¦‚ä¸‹</p><p><img src="https://s2.loli.net/2024/08/23/J2VezYiwqmTxsC9.png" alt=""></p><p>ä¸‹é¢æ˜¯SHT3xä¸ESP32-S3çš„å¼•è„šæ¥çº¿ç¤ºä¾‹ï¼ŒESP32æˆ–è€…ESP8266æ ¹æ®å¼€å‘æ¿çš„I2Cå¼•è„šè¿›è¡Œæ¥çº¿</p><table><thead><tr><th>å¼•è„š</th><th>æ¥çº¿</th></tr></thead><tbody><tr><td>VDD</td><td>3.3/5V</td></tr><tr><td>ADDR</td><td>GND</td></tr><tr><td>SDA</td><td>4</td></tr><tr><td>SCL</td><td>5</td></tr></tbody></table><hr><h2 id="è¯´æ˜">è¯´æ˜</h2><blockquote><p>ä»£ç ç¤ºä¾‹è§ï¼š<a href="https://github.com/MGod-monkey/sht3x-esp-idf5x">https://github.com/MGod-monkey/sht3x-esp-idf5x</a></p></blockquote><p>å°†ä¸Šé¢çš„ä»£ç ä¸‹è½½åˆ°æœ¬åœ°å¹¶é€šè¿‡VScodeæ‰“å¼€ï¼Œéœ€è¦å…ˆé€‰æ‹©è‡ªå·±èŠ¯ç‰‡çš„å¹³å°ï¼Œç„¶åç¼–è¯‘</p><p><img src="https://s2.loli.net/2024/08/23/bCW7pufY18lLZv9.png" alt="image-20240823155719287"></p><p>é©±åŠ¨sht3xçš„ä»£ç å°è£…åœ¨<code>components\sht3x\sht3x.h</code>ï¼Œæ¯ä¸ªå‡½æ•°çš„è¯´æ˜å¦‚ä¸‹ï¼š</p><ol><li><p><strong><code>sht3x_init_sensor</code></strong></p><ul><li>åˆå§‹åŒ–ä¸€ä¸ª SHT3x ä¼ æ„Ÿå™¨ã€‚</li><li>åˆ›å»ºä¸€ä¸ªæè¿°ä¼ æ„Ÿå™¨çš„æ•°æ®ç»“æ„å¹¶åˆå§‹åŒ–ä¼ æ„Ÿå™¨è®¾å¤‡ã€‚</li><li>å‚æ•°ï¼š<ul><li><code>bus</code>: ä¼ æ„Ÿå™¨è¿æ¥çš„ I2C æ€»çº¿ã€‚</li><li><code>addr</code>: ä¼ æ„Ÿå™¨çš„ I2C ä»è®¾å¤‡åœ°å€ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæŒ‡å‘ä¼ æ„Ÿå™¨æ•°æ®ç»“æ„çš„æŒ‡é’ˆï¼Œåˆå§‹åŒ–å¤±è´¥æ—¶è¿”å› NULLã€‚</li></ul></li><li><p><strong><code>sht3x_measure</code></strong></p><ul><li>é«˜çº§æµ‹é‡å‡½æ•°ï¼Œæ‰§è¡Œä¸€æ¬¡æµ‹é‡ã€‚</li><li>åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š<ol><li>ä»¥é«˜å¯é æ€§å¯åŠ¨ä¸€æ¬¡å•æ¬¡æµ‹é‡ã€‚</li><li>ä½¿ç”¨ <code>vTaskDelay</code> ç­‰å¾…æµ‹é‡ç»“æœå¯ç”¨ã€‚</li><li>è¿”å›æµ®ç‚¹ç±»å‹çš„ä¼ æ„Ÿå™¨æµ‹é‡å€¼ã€‚</li></ol></li><li>å‚æ•°ï¼š<ul><li><code>dev</code>: æŒ‡å‘ä¼ æ„Ÿå™¨è®¾å¤‡æ•°æ®ç»“æ„çš„æŒ‡é’ˆã€‚</li><li><code>temperature</code>: è¿”å›çš„æ¸©åº¦å€¼ï¼ˆæ‘„æ°åº¦ï¼‰ã€‚</li><li><code>humidity</code>: è¿”å›çš„æ¹¿åº¦å€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæˆåŠŸæ—¶è¿”å› <code>true</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>false</code>ã€‚</li></ul></li><li><p><strong><code>sht3x_start_measurement</code></strong></p><ul><li>å¯åŠ¨å•æ¬¡æµ‹é‡æˆ–å‘¨æœŸæ€§æµ‹é‡ã€‚</li><li>å¯ä»¥é€‰æ‹©å•æ¬¡æµ‹é‡æ¨¡å¼æˆ–å‘¨æœŸæ€§æµ‹é‡æ¨¡å¼ï¼Œä»¥åŠè®¾ç½®æµ‹é‡çš„é‡å¤æ€§ã€‚</li><li>å‚æ•°ï¼š<ul><li><code>dev</code>: æŒ‡å‘ä¼ æ„Ÿå™¨è®¾å¤‡æ•°æ®ç»“æ„çš„æŒ‡é’ˆã€‚</li><li><code>mode</code>: æµ‹é‡æ¨¡å¼ï¼ˆå•æ¬¡æˆ–å‘¨æœŸæ€§ï¼‰ï¼Œå‚è§ <code>sht3x_mode_t</code> ç±»å‹ã€‚</li><li><code>repeat</code>: æµ‹é‡çš„é‡å¤æ€§ï¼Œå‚è§ <code>sht3x_repeat_t</code> ç±»å‹ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæˆåŠŸæ—¶è¿”å› <code>true</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>false</code>ã€‚</li></ul></li><li><p><strong><code>sht3x_get_measurement_duration</code></strong></p><ul><li>è·å–æµ‹é‡æ‰€éœ€çš„ RTOS tick æ•°ã€‚</li><li>è¿”å›ç»™å®šé‡å¤æ€§ä¸‹æ‰§è¡Œä¸€æ¬¡æµ‹é‡æ‰€éœ€çš„æ—¶é—´ã€‚</li><li>ç”¨æˆ·ä»»åŠ¡å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å‡½æ•°è¿”å›çš„æŒç»­æ—¶é—´æ¥ç­‰å¾…æµ‹é‡ç»“æœã€‚</li><li>å‚æ•°ï¼š<ul><li><code>repeat</code>: æµ‹é‡çš„é‡å¤æ€§ï¼Œå‚è§ <code>sht3x_repeat_t</code> ç±»å‹ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæµ‹é‡æŒç»­æ—¶é—´ï¼Œå•ä½ä¸º RTOS ticksã€‚</li></ul></li><li><p><strong><code>sht3x_get_raw_data</code></strong></p><ul><li>ä»ä¼ æ„Ÿå™¨è¯»å–æµ‹é‡ç»“æœå¹¶å­˜å‚¨ä¸ºåŸå§‹æ•°æ®ã€‚</li><li>è¯»å–æ¸©åº¦å’Œå‹åŠ›çš„æµ‹é‡ç»“æœï¼Œæ£€æŸ¥ CRC æ ¡éªŒç å¹¶å­˜å‚¨åœ¨å­—èŠ‚æ•°ç»„ä¸­ã€‚</li><li>å‚æ•°ï¼š<ul><li><code>dev</code>: æŒ‡å‘ä¼ æ„Ÿå™¨è®¾å¤‡æ•°æ®ç»“æ„çš„æŒ‡é’ˆã€‚</li><li><code>raw_data</code>: å­˜å‚¨åŸå§‹æ•°æ®çš„å­—èŠ‚æ•°ç»„ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæˆåŠŸæ—¶è¿”å› <code>true</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>false</code>ã€‚</li></ul></li><li><p><strong><code>sht3x_compute_values</code></strong></p><ul><li>ä»åŸå§‹æ•°æ®è®¡ç®—å‡ºä¼ æ„Ÿå™¨çš„æ¸©åº¦å’Œæ¹¿åº¦å€¼ã€‚</li><li>å‚æ•°ï¼š<ul><li><code>raw_data</code>: åŒ…å«åŸå§‹æ•°æ®çš„å­—èŠ‚æ•°ç»„ã€‚</li><li><code>temperature</code>: è¿”å›çš„æ¸©åº¦å€¼ï¼ˆæ‘„æ°åº¦ï¼‰ã€‚</li><li><code>humidity</code>: è¿”å›çš„æ¹¿åº¦å€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæˆåŠŸæ—¶è¿”å› <code>true</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>false</code>ã€‚</li></ul></li><li><p><strong><code>sht3x_get_results</code></strong></p><ul><li>è·å–ä¼ æ„Ÿå™¨æµ‹é‡ç»“æœå¹¶è¿”å›ä¼ æ„Ÿå™¨å€¼ã€‚</li><li>è¯¥å‡½æ•°ç»“åˆäº† <code>sht3x_read_raw_data</code> å’Œ <code>sht3x_compute_values</code> å‡½æ•°ï¼Œè¯»å–åŸå§‹æ•°æ®å¹¶è®¡ç®—å‡ºä¼ æ„Ÿå™¨çš„æ¸©åº¦å’Œæ¹¿åº¦å€¼ã€‚</li><li>å‚æ•°ï¼š<ul><li><code>dev</code>: æŒ‡å‘ä¼ æ„Ÿå™¨è®¾å¤‡æ•°æ®ç»“æ„çš„æŒ‡é’ˆã€‚</li><li><code>temperature</code>: è¿”å›çš„æ¸©åº¦å€¼ï¼ˆæ‘„æ°åº¦ï¼‰ã€‚</li><li><code>humidity</code>: è¿”å›çš„æ¹¿åº¦å€¼ï¼ˆç™¾åˆ†æ¯”ï¼‰ã€‚</li></ul></li><li>è¿”å›å€¼ï¼šæˆåŠŸæ—¶è¿”å› <code>true</code>ï¼Œå¤±è´¥æ—¶è¿”å› <code>false</code>ã€‚</li></ul></li></ol><p>è·å–SHT3xæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><ul><li><p>æµ‹é‡æ¨¡å¼é€‰æ‹©ï¼šSINGLE_SHOT_HIGH_LEVELã€SINGLE_SHOT_LOW_LEVELæˆ–å‘¨æœŸæ¨¡å¼</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #define SINGLE_SHOT_LOW_LEVEL</span></span><br><span class="line"><span class="comment">// #define SINGLE_SHOT_HIGH_LEVEL</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> defined(SINGLE_SHOT_HIGH_LEVEL)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">user_task</span> <span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">float</span> temperature;</span><br><span class="line">    <span class="type">float</span> humidity;</span><br><span class="line"></span><br><span class="line">    TickType_t last_wakeup = xTaskGetTickCount();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// perform one measurement and do something with the results</span></span><br><span class="line">        <span class="keyword">if</span> (sht3x_measure (sensor, &amp;temperature, &amp;humidity))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.3f SHT3x Sensor: %.2f Â°C, %.2f %%\n&quot;</span>, </span><br><span class="line">        (<span class="type">double</span>)sdk_system_get_time()*<span class="number">1e-3</span>, temperature, humidity);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// wait until 5 seconds are over</span></span><br><span class="line">        vTaskDelayUntil(&amp;last_wakeup, <span class="number">5000</span> / portTICK_PERIOD_MS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">elif</span> defined(SINGLE_SHOT_LOW_LEVEL)</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">user_task</span> <span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">float</span> temperature;</span><br><span class="line">    <span class="type">float</span> humidity;</span><br><span class="line"></span><br><span class="line">    TickType_t last_wakeup = xTaskGetTickCount();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the measurement duration for high repeatability;</span></span><br><span class="line">    <span class="type">uint8_t</span> duration = sht3x_get_measurement_duration(sht3x_high);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Trigger one measurement in single shot mode with high repeatability.</span></span><br><span class="line">        sht3x_start_measurement (sensor, sht3x_single_shot, sht3x_high);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Wait until measurement is ready (constant time of at least 30 ms</span></span><br><span class="line">        <span class="comment">// or the duration returned from *sht3x_get_measurement_duration*).</span></span><br><span class="line">        vTaskDelay (duration);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// retrieve the values and do something with them</span></span><br><span class="line">        <span class="keyword">if</span> (sht3x_get_results (sensor, &amp;temperature, &amp;humidity))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.3f SHT3x Sensor: %.2f Â°C, %.2f %%\n&quot;</span>, </span><br><span class="line">        (<span class="type">double</span>)sdk_system_get_time()*<span class="number">1e-3</span>, temperature, humidity);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// wait until 5 seconds are over</span></span><br><span class="line">        vTaskDelayUntil(&amp;last_wakeup, <span class="number">5000</span> / portTICK_PERIOD_MS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">else</span>  <span class="comment">// PERIODIC MODE</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">user_task</span> <span class="params">(<span class="type">void</span> *pvParameters)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">float</span> temperature;</span><br><span class="line">    <span class="type">float</span> humidity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start periodic measurements with 1 measurement per second.</span></span><br><span class="line">    sht3x_start_measurement (sensor, sht3x_periodic_1mps, sht3x_high);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait until first measurement is ready (constant time of at least 30 ms</span></span><br><span class="line">    <span class="comment">// or the duration returned from *sht3x_get_measurement_duration*).</span></span><br><span class="line">    vTaskDelay (sht3x_get_measurement_duration(sht3x_high));</span><br><span class="line"></span><br><span class="line">    TickType_t last_wakeup = xTaskGetTickCount();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Get the values and do something with them.</span></span><br><span class="line">        <span class="keyword">if</span> (sht3x_get_results (sensor, &amp;temperature, &amp;humidity))</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.3f SHT3x Sensor: %.2f Â°C, %.2f %%\n&quot;</span>, </span><br><span class="line">        (<span class="type">double</span>)sdk_system_get_time()*<span class="number">1e-3</span>, temperature, humidity);</span><br><span class="line">        <span class="comment">// Wait until 2 seconds (cycle time) are over.</span></span><br><span class="line">        vTaskDelayUntil(&amp;last_wakeup, <span class="number">2000</span> / portTICK_PERIOD_MS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><ul><li><p>å•æ¬¡æµ‹é‡æ¨¡å¼</p><ul><li><p>åœ¨å•æ¬¡æµ‹é‡æ¨¡å¼ä¸‹ï¼Œä¸€æ¡æµ‹é‡å‘½ä»¤ä¼šè§¦å‘ç²¾ç¡®é‡‡é›†ä¸€ä¸ªæ•°æ®å¯¹ã€‚æ¯ä¸ªæ•°æ®å¯¹åŒ…æ‹¬ 16 ä½åè¿›åˆ¶çš„æ¸©åº¦å’Œæ¹¿åº¦å€¼ã€‚ç”±äºæµ‹é‡æŒç»­æ—¶é—´é•¿è¾¾ 15 æ¯«ç§’ï¼Œå› æ­¤æµ‹é‡è¿‡ç¨‹è¢«åˆ†æˆå¤šä¸ªæ­¥éª¤ï¼Œä»¥é¿å…åœ¨æµ‹é‡è¿‡ç¨‹ä¸­é˜»å¡ç”¨æˆ·ä»»åŠ¡ï¼š</p><ol><li><p>ä½¿ç”¨å‡½æ•° sht3x_start_measurement è§¦å‘ä¼ æ„Ÿå™¨ï¼Œæ‰§è¡Œä¸€æ¬¡æµ‹é‡ã€‚</p></li><li><p>ä½¿ç”¨å‡½æ•° vTaskDelay ç­‰å¾…æµ‹é‡æŒç»­æ—¶é—´ï¼Œç›´åˆ°è·å¾—æµ‹é‡ç»“æœã€‚ä½¿ç”¨è‡³å°‘ 30 æ¯«ç§’çš„æ’å®šæŒç»­æ—¶é—´æˆ–å‡½æ•° sht3x_get_measurement_duration è¿”å›çš„ä»¥ RTOS ticks ä¸ºå•ä½çš„æŒç»­æ—¶é—´è¿›è¡Œç­‰å¾…ã€‚</p></li><li><p>ä½¿ç”¨å‡½æ•° sht3x_get_results æˆ–å‡½æ•° sht3x_get_raw_data è·å–æµ®ç‚¹ä¼ æ„Ÿå™¨å€¼æˆ–åŸå§‹æ•°æ®ã€‚</p></li></ol></li><li><p>åœ¨å•æ¬¡æ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡éœ€è¦æ–°çš„ä¼ æ„Ÿå™¨å€¼æ—¶ï¼Œç”¨æˆ·ä»»åŠ¡éƒ½å¿…é¡»æ‰§è¡Œæ‰€æœ‰æ­¥éª¤ã€‚</p></li></ul></li></ul><blockquote><p>ä¸ºæ–¹ä¾¿èµ·è§ï¼Œä¸€ä¸ªé«˜çº§å‡½æ•° sht3x_measureï¼ˆsht3x_measureï¼‰åªéœ€ä¸€ä¸ªå‡½æ•°å³å¯å®Œæˆä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤çš„æµ‹é‡ã€‚è¯¥å‡½æ•°æ˜¯ä½¿ç”¨ä¼ æ„Ÿå™¨çš„æœ€ç®€å•æ–¹æ³•ã€‚å®ƒæœ€é€‚åˆä¸æƒ³æ§åˆ¶ä¼ æ„Ÿå™¨ç»†èŠ‚çš„ç”¨æˆ·ã€‚<br>è¿™ç§æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ï¼Œä¼ æ„Ÿå™¨å¯ä»¥åœ¨è¿ç»­æµ‹é‡ä¹‹é—´åˆ‡æ¢åˆ°ç¡çœ æ¨¡å¼ï¼Œä»è€Œæ›´åŠ èŠ‚èƒ½ã€‚å½“æµ‹é‡é€Ÿç‡å°äºæ¯ç§’1æ¬¡æµ‹é‡æ—¶ï¼Œè¿™ç§æ¨¡å¼å°¤å…¶æœ‰ç”¨ã€‚</p></blockquote><ul><li><p>å‘¨æœŸæ¨¡å¼</p><ul><li><p>åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå‘å‡ºçš„ä¸€æ¡æµ‹é‡å‘½ä»¤ä¼šäº§ç”Ÿä¸€ä¸ªæ•°æ®å¯¹æµã€‚æ¯ä¸ªæ•°æ®å¯¹ç”± 16 ä½åè¿›åˆ¶çš„æ¸©åº¦å’Œæ¹¿åº¦å€¼ç»„æˆã€‚æµ‹é‡å‘½ä»¤ä¸€ç»å‘é€è‡³ä¼ æ„Ÿå™¨ï¼Œä¼ æ„Ÿå™¨å°±ä¼šè‡ªåŠ¨ä»¥æ¯ç§’ 0.5ã€1ã€2ã€4 æˆ– 10 æ¬¡çš„æµ‹é‡é€Ÿç‡å®šæœŸæ‰§è¡Œæµ‹é‡ã€‚æ•°æ®å¯¹å¯ä»¥ä»¥ç›¸åŒæˆ–æ›´ä½çš„é€Ÿç‡è·å–ã€‚ä¸å•æ¬¡æµ‹é‡æ¨¡å¼ä¸€æ ·ï¼Œæµ‹é‡è¿‡ç¨‹åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ol><li><p>ä½¿ç”¨å‡½æ•° sht3x_start_measurementï¼Œä»¥ç»™å®šçš„é€Ÿç‡è§¦å‘ä¼ æ„Ÿå™¨ï¼Œå¼€å§‹å‘¨æœŸæ€§æµ‹é‡ã€‚</p></li><li><p>ä½¿ç”¨å‡½æ•° vTaskDelay ç­‰å¾…æµ‹é‡æŒç»­æ—¶é—´ï¼Œç›´åˆ°è·å¾—ç¬¬ä¸€ä¸ªç»“æœã€‚ä½¿ç”¨è‡³å°‘ 30 æ¯«ç§’çš„æ’å®šæŒç»­æ—¶é—´æˆ–å‡½æ•° sht3x_get_measurement_duration è¿”å›çš„ä»¥ RTOS ticks ä¸ºå•ä½çš„æŒç»­æ—¶é—´è¿›è¡Œç­‰å¾…ã€‚</p></li></ol></li></ul></li></ul></li></ul><blockquote><p>ä½¿ç”¨å‡½æ•° sht3x_get_results æˆ–å‡½æ•° sht3x_get_raw_data è·å–æµ®ç‚¹ä¼ æ„Ÿå™¨å€¼æˆ–åŸå§‹æ•°æ®ã€‚<br>ä¸å•æ¬¡æµ‹é‡æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œæ­¥éª¤1å’Œ2åªéœ€æ‰§è¡Œä¸€æ¬¡ã€‚ä¸€æ—¦å¼€å§‹æµ‹é‡ï¼Œç”¨æˆ·ä»»åŠ¡åªéœ€å®šæœŸè·å–æ•°æ®å³å¯ï¼Œä½†ä¼ æ„Ÿå™¨åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¸€ç›´ä¿æŒæ´»è·ƒçŠ¶æ€ï¼Œå› æ­¤èƒ½è€—è¾ƒé«˜</p></blockquote><blockquote><p><strong>æ³¨ï¼šè·å–æµ‹é‡ç»“æœçš„é€Ÿç‡ä¸å¾—å¤§äºä¼ æ„Ÿå™¨çš„å‘¨æœŸæ€§æµ‹é‡é€Ÿç‡ã€‚ä¸ºé¿å…å› ä¼ æ„Ÿå™¨çš„å®šæ—¶å®¹å·®é€ æˆå†²çªï¼Œåº”å°äºè¯¥é€Ÿç‡ã€‚</strong></p></blockquote><ul><li><p>åˆè¯•åŒ–I2Cå¹¶è¯»å–SHT3xæ¸©æ¹¿åº¦çš„å€¼</p><blockquote><p>æ³¨ï¼šå¦‚æœSHT3xçš„ADDRå¼•è„šæ¥çš„ä¸æ˜¯GNDï¼Œè€Œæ˜¯VCCï¼Œåˆ™éœ€è¦å°†åœ°å€æ”¹ä¸ºSHT3x_ADDR_2</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_SCL_IO           GPIO_NUM_5      <span class="comment">/*!&lt; GPIO number used for I2C master clock */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_SDA_IO           GPIO_NUM_4      <span class="comment">/*!&lt; GPIO number used for I2C master data  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_NUM              0              <span class="comment">/*!&lt; I2C master i2c port number, the number of i2c peripheral interfaces available will depend on the chip */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_FREQ_HZ          400000           <span class="comment">/*!&lt; I2C master clock frequency */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_TX_BUF_DISABLE   0                <span class="comment">/*!&lt; I2C master doesn&#x27;t need buffer */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_RX_BUF_DISABLE   0                <span class="comment">/*!&lt; I2C master doesn&#x27;t need buffer */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_TIMEOUT_MS       1000             <span class="comment">/*!&lt; I2C master timeout in milliseconds */</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">app_main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Set UART Parameter.</span></span><br><span class="line">    uart_set_baud(<span class="number">0</span>, <span class="number">115200</span>);</span><br><span class="line">    <span class="comment">// Give the UART some time to settle</span></span><br><span class="line">    vTaskDelay(<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Init I2C bus interfaces at which SHT3x sensors are connected</span></span><br><span class="line">    <span class="type">int</span> i2c_master_port = I2C_MASTER_NUM;</span><br><span class="line"></span><br><span class="line">    <span class="type">i2c_config_t</span> conf = &#123;</span><br><span class="line">        .mode = I2C_MODE_MASTER,</span><br><span class="line">        .sda_io_num = I2C_MASTER_SDA_IO,</span><br><span class="line">        .scl_io_num = I2C_MASTER_SCL_IO,</span><br><span class="line">        .sda_pullup_en = GPIO_PULLUP_ENABLE,</span><br><span class="line">        .scl_pullup_en = GPIO_PULLUP_ENABLE,</span><br><span class="line">        .master.clk_speed = I2C_MASTER_FREQ_HZ,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    i2c_param_config(i2c_master_port, &amp;conf);</span><br><span class="line"></span><br><span class="line">    i2c_driver_install(i2c_master_port, conf.mode, I2C_MASTER_RX_BUF_DISABLE, I2C_MASTER_TX_BUF_DISABLE, <span class="number">0</span>);</span><br><span class="line">        </span><br><span class="line">    <span class="comment">// Create the sensors, multiple sensors are possible.</span></span><br><span class="line">    <span class="keyword">if</span> ((sensor = sht3x_init_sensor(I2C_MASTER_NUM, SHT3x_ADDR_1)))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Create a user task that uses the sensors.</span></span><br><span class="line">        xTaskCreate(user_task, <span class="string">&quot;user_task&quot;</span>, TASK_STACK_DEPTH, <span class="literal">NULL</span>, <span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Could not initialize SHT3x sensor\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>å¦‚æœä¸²å£è¾“å‡ºçš„ç»“æœä¸º<code>Could not initialize SHT3x sensor</code>ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ç¨‹åºæ¥æ‰«æI2Cè®¾å¤‡æ¥ç¡®ä¿SHT3xæ˜¯å¦è¿æ¥æ­£å¸¸</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;driver/i2c.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_SCL_IO           GPIO_NUM_5      <span class="comment">/*!&lt; GPIO number used for I2C master clock */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_SDA_IO           GPIO_NUM_4      <span class="comment">/*!&lt; GPIO number used for I2C master data  */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_NUM              0                          <span class="comment">/*!&lt; I2C master i2c port number, the number of i2c peripheral interfaces available will depend on the chip */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_FREQ_HZ          400000                     <span class="comment">/*!&lt; I2C master clock frequency */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_TX_BUF_DISABLE   0                          <span class="comment">/*!&lt; I2C master doesn&#x27;t need buffer */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_RX_BUF_DISABLE   0                          <span class="comment">/*!&lt; I2C master doesn&#x27;t need buffer */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I2C_MASTER_TIMEOUT_MS       1000                       <span class="comment">/*!&lt; I2C master timeout in milliseconds */</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">i2c_scanner</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">i2c_config_t</span> conf = &#123;</span><br><span class="line">        .mode = I2C_MODE_MASTER,</span><br><span class="line">        .sda_io_num = I2C_MASTER_SDA_IO,</span><br><span class="line">        .scl_io_num = I2C_MASTER_SCL_IO,</span><br><span class="line">        .sda_pullup_en = GPIO_PULLUP_ENABLE,</span><br><span class="line">        .scl_pullup_en = GPIO_PULLUP_ENABLE,</span><br><span class="line">        .master.clk_speed = I2C_MASTER_FREQ_HZ,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    i2c_param_config(I2C_MASTER_NUM, &amp;conf);</span><br><span class="line">    i2c_driver_install(I2C_MASTER_NUM, conf.mode, I2C_MASTER_RX_BUF_DISABLE, I2C_MASTER_TX_BUF_DISABLE, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;I2C scanner. Scanning...\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> address = <span class="number">1</span>; address &lt; <span class="number">127</span>; address++) &#123;</span><br><span class="line">        <span class="type">i2c_cmd_handle_t</span> cmd = i2c_cmd_link_create();</span><br><span class="line">        i2c_master_start(cmd);</span><br><span class="line">        i2c_master_write_byte(cmd, (address &lt;&lt; <span class="number">1</span>) | I2C_MASTER_WRITE, <span class="literal">true</span>);</span><br><span class="line">        i2c_master_stop(cmd);</span><br><span class="line">        <span class="type">esp_err_t</span> ret = i2c_master_cmd_begin(I2C_MASTER_NUM, cmd, <span class="number">1000</span> / portTICK_PERIOD_MS);</span><br><span class="line">        i2c_cmd_link_delete(cmd);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ret == ESP_OK) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;I2C device found at address 0x%02x\n&quot;</span>, address);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Scan completed.\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">app_main</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    i2c_scanner();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸­I2Cåœ°å€æœ‰0x44æˆ–è€…0x45åˆ™è¯´æ˜SHT3xè¿æ¥æ­£å¸¸</p><p><img src="https://s2.loli.net/2024/08/23/MzbXm7RA8DodcKV.png" alt="image-20240823162335559"></p><p>æœ€ç»ˆçš„ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2024/08/23/XyNKSpIQolcJd3v.png" alt="image-20240823161656056"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¯å¢ƒ&quot;&gt;ç¯å¢ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;è½¯ä»¶ç¯å¢ƒ
&lt;ul&gt;
&lt;li&gt;VScode&lt;/li&gt;
&lt;li&gt;ESP-IDF5.x&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;ç¡¬ä»¶ç¯å¢ƒ
&lt;ul&gt;
&lt;li&gt;esp32 / esp8266&lt;/li&gt;
&lt;li&gt;sht3xæ¸©æ¹¿åº¦ä¼ æ„Ÿ</summary>
      
    
    
    
    <category term="esp-idf" scheme="https://www.mgodmonkey.cn/categories/esp-idf/"/>
    
    
    <category term="ESP32" scheme="https://www.mgodmonkey.cn/tags/ESP32/"/>
    
    <category term="esp-idf" scheme="https://www.mgodmonkey.cn/tags/esp-idf/"/>
    
  </entry>
  
  <entry>
    <title>Linux/Ubuntuå®‰è£…å›¾å½¢ç•Œé¢ç‰ˆclash-gui</title>
    <link href="https://www.mgodmonkey.cn/posts/a5d6f412.html"/>
    <id>https://www.mgodmonkey.cn/posts/a5d6f412.html</id>
    <published>2024-06-18T09:40:23.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å®‰è£…Clash">1.å®‰è£…Clash</h2><ol><li><p>é¦–å…ˆï¼Œä¸‹è½½<a href="https://github.com/MGod-monkey/clash-for-all-backup/releases/download/v0.20.39/Clash.for.Windows-0.20.39-x64-linux.tar.gz">Clash.for.Windows-0.20.39-x64-linux.tar.gz</a>ã€ç½‘é€Ÿæ…¢çš„ç”¨giteeè¿›è¡Œä¸‹è½½ï¼š<a href="https://gitee.com/mgod_wu/clash-for-all-backup/releases/tag/v0.20.39">https://gitee.com/mgod_wu/clash-for-all-backup/releases/tag/v0.20.39</a>ã€‘ï¼Œä¸‹è½½å®Œæˆåç»ˆç«¯è¿›å…¥ä¸‹è½½ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œè§£å‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf Clash.for.Windows-0.20.39-x64-linux.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>è§£å‹å®Œæˆåï¼Œå¯ä»¥å°†æ–‡ä»¶å¤¹æ”¹åå¹¶ç§»åˆ°<code>/opt/</code>ï¼šç›®å½•ä¸­ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mv</span> Clash\ <span class="keyword">for</span>\ Windows-0.20.39-x64-linux /opt/clash</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡<code>sudo ls /opt/clash</code>æŸ¥çœ‹ç›®å½•å†…ç»“æ„ï¼š</p><p><img src="https://s2.loli.net/2024/06/18/TQIAzWxSZ5as3rF.png" alt=""></p></li><li><p><code>cfw</code>å°±æ˜¯<code>clash for windows</code>çš„æ„æ€ï¼ŒåŸä½œè€…æŠŠguiç•Œé¢ä¹Ÿç§»æ¤åˆ°äº†linuxä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ‰“å¼€ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /opt/clash</span><br><span class="line">./cfw</span><br></pre></td></tr></table></figure><p>æ‰“å¼€ä¹‹åå°±æ˜¯ä»¥ä¸‹ç•Œé¢ï¼š<br><img src="https://s2.loli.net/2024/06/18/L3DnK28uMkiwjls.png" alt=""></p><p>å‹¾é€‰åº•ä¸‹çš„<code>start with linux</code>ï¼Œè¿™æ ·å°±å¯ä»¥å¼€æœºè·Ÿéšç³»ç»Ÿå¯åŠ¨äº†</p></li><li><p>ä»£ç†åœ°å€çš„å¯¼å…¥åªéœ€è¦åˆ‡æ¢åˆ°<code>Profiles</code>é¡µé¢ï¼Œè¾“å…¥è‡ªå·±è´­ä¹°çš„è®¢é˜…åœ°å€å³å¯ï¼š<br><img src="https://s2.loli.net/2024/06/18/smnlXTxHBgV84oQ.png" alt=""><br>è®¢é˜…å®Œæˆåï¼Œåˆ‡æ¢åˆ°<code>Proxis</code>é¡µé¢å°±å¯ä»¥åˆ‡æ¢èŠ‚ç‚¹ï¼š<br><img src="https://s2.loli.net/2024/06/18/Po7d4r3sflCLYUS.png" alt=""></p></li></ol><h2 id="2-é…ç½®æ¡Œé¢å›¾æ ‡">2. é…ç½®æ¡Œé¢å›¾æ ‡</h2><p><code>clash for windows</code>linuxç‰ˆæœ¬é»˜è®¤æ˜¯æ²¡æœ‰æ¡Œé¢å›¾æ ‡çš„ï¼Œå¦‚æœé€€å‡ºäº†å°±åªèƒ½é‡æ–°é€šè¿‡å‘½ä»¤è¡Œè¿›å…¥ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é…ç½®ä¸€ä¸‹æ¡Œé¢å›¾æ ‡ã€‚</p><ol><li><p>è¿›å…¥<code>~/.local/share/applications</code>ç›®å½•ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.local/share/applications</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»º<code>clash_gui.desktop</code>ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano clash_gui.desktop</span><br></pre></td></tr></table></figure><p>è¾“å…¥ä»¥ä¸‹å†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=clash <span class="keyword">for</span> linux</span><br><span class="line">Icon=/opt/clash/clash.png</span><br><span class="line">Exec=/opt/clash/cfw</span><br><span class="line">Type=Application</span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦æ ¹æ®è‡ªå·±çš„æƒ…å†µä¿®æ”¹çš„åªæœ‰ä»¥ä¸‹ä¸¤ä¸ªå­—æ®µï¼š</p><ul><li><code>Icon</code> æ˜¯æ¡Œé¢å›¾æ ‡æ‰€åœ¨åœ°å€ï¼Œå¯ä»¥è‡ªå·±ç½‘ä¸Šæ‰¾ä¸€ä¸ªclashå›¾æ ‡ä¸‹è½½å³å¯ï¼Œä¾‹å¦‚æˆ‘çš„å›¾æ ‡æ˜¯ï¼š<a href="https://gitee.com/mgod_wu/clash-for-all-backup/raw/main/clash.png">https://gitee.com/mgod_wu/clash-for-all-backup/raw/main/clash.png</a>ï¼Œç„¶åå¤åˆ¶åˆ°è½¯ä»¶ç›®å½•ä¸‹<code>sudo cp clash.png /opt/clash</code></li><li><code>Exec</code> è¡¨ç¤º<code>cfw</code>å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘çš„<code>cfw</code>æ–‡ä»¶æ˜¯åœ¨<code>/opt/clash</code>ç›®å½•ä¸‹ï¼Œæ‰€ä»¥æˆ‘çš„æ‰§è¡Œå‘½ä»¤å¦‚ä¸Šæ‰€æ˜¯ã€‚<br>ç„¶åä¿å­˜é€€å‡ºã€‚</li></ul><p><strong>æ³¨ï¼šç¡®ä¿è·¯å¾„æ­£ç¡®ï¼Œå¦åˆ™å›¾æ ‡å°†ä¸ä¼šæ˜¾ç¤º</strong></p></blockquote></li><li><p>æœ€åå¢åŠ æƒé™:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">chmod</span> a+x clash_gui.desktop</span><br></pre></td></tr></table></figure><p>ç„¶åä¾¿å¯åœ¨åº”ç”¨ç¨‹åºä¸­çœ‹åˆ°clashçš„æ¡Œé¢å›¾æ ‡äº†ï¼Œä¸‹æ¬¡æˆ‘ä»¬ç›´æ¥ç‚¹å‡»æ¡Œé¢å›¾æ ‡è¿›å…¥å³å¯ï¼Œå³é”®å›¾æ ‡è¿˜å¯ä»¥é€‰æ‹©åŠ å…¥å›¾æ ‡ã€‚</p><p><img src="https://s2.loli.net/2024/06/18/ERZXeh89fb7Jpma.png" alt=""></p></li></ol><h2 id="3-å¼€å¯ç³»ç»Ÿä»£ç†">3. å¼€å¯ç³»ç»Ÿä»£ç†</h2><p>ä¸åŒäºwindowsç‰ˆæœ¬çš„clash-guiï¼Œlinuxä¸‹çš„ç³»ç»Ÿä»£ç†éœ€è¦è‡ªå·±åœ¨ç³»ç»Ÿçš„ç½‘ç»œä¸­è¿›è¡Œæ‰‹åŠ¨è®¾ç½®ï¼Œè®¾ç½®è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æ‰“å¼€ubuntuçš„ç³»ç»Ÿè®¾ç½®ï¼Œé€‰æ‹©<code>ç½‘ç»œ</code>â€”&gt;<code>ç½‘ç»œä»£ç†</code></li></ul><p><img src="https://s2.loli.net/2024/06/18/pWan3FIfu2lScTg.png" alt=""></p><ul><li>å°†ç½‘ç»œä»£ç†åˆ‡æ¢ä¸º<code>æ‰‹åŠ¨</code>ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå°†HTTPå’ŒHTTPSä»£ç†ç«¯å£å¡«å†™ä¸ºä¸Šé¢è·å–åˆ°çš„HTTPç«¯å£ï¼ŒSocksä¸»æœºç«¯å£å·ä¹Ÿå¡«å†™æˆå¦‚ä¸‹å½¢å¼ã€‚</li></ul><p><img src="https://s2.loli.net/2024/06/18/964XldcAZ2fwhyv.png" alt=""></p><p>è¿™æ ·ç³»ç»Ÿä»£ç†éƒ¨åˆ†å°±å®Œæˆäº†ï¼Œä¹‹ååªè¦åœ¨clashä¸­é€‰æ‹©èŠ‚ç‚¹é€šå¸¸å°±å¯ä»¥ä½¿ç”¨äº†ã€‚å¦‚æœéœ€è¦å…³é—­ä»£ç†ï¼Œé‚£ä¹ˆåŒæ ·æŠŠ<code>ç½‘ç»œä»£ç†</code>ä»<code>æ‰‹åŠ¨</code>æ”¹ä¸º<code>å…³é—­</code>å³å¯ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-å®‰è£…Clash&quot;&gt;1.å®‰è£…Clash&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;é¦–å…ˆï¼Œä¸‹è½½&lt;a href=&quot;https://github.com/MGod-monkey/clash-for-all-backup/releases/download/v0.20.39/</summary>
      
    
    
    
    <category term="Linux" scheme="https://www.mgodmonkey.cn/categories/Linux/"/>
    
    
    <category term="Linux" scheme="https://www.mgodmonkey.cn/tags/Linux/"/>
    
    <category term="clash" scheme="https://www.mgodmonkey.cn/tags/clash/"/>
    
  </entry>
  
  <entry>
    <title>ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-5-Airsim-PX4ä»¿çœŸç¯å¢ƒæ­å»º</title>
    <link href="https://www.mgodmonkey.cn/posts/982cb875.html"/>
    <id>https://www.mgodmonkey.cn/posts/982cb875.html</id>
    <published>2024-06-11T01:44:00.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>AirSimé¡¹ç›®åœ°å€ï¼š</strong><a href="https://github.com/microsoft/AirSim">https://github.com/microsoft/AirSim</a></p><p><strong>AirSimå®˜æ–¹æ•™ç¨‹ï¼š</strong><a href="https://microsoft.github.io/AirSim/">Home - AirSim (microsoft.github.io)</a></p><p><strong>CSDNå‚è€ƒæ•™ç¨‹:</strong> <a href="https://blog.csdn.net/qq_45709806/article/details/136062458">AirSimå­¦ä¹ ï¼ˆ1ï¼‰å®‰è£…Unreal Engineå’ŒAirSim</a></p><p><strong>è§†é¢‘æ•™ç¨‹ï¼š</strong></p><ul><li><p><a href="https://www.bilibili.com/video/BV1Rz4y1t7Zf">ã€AirSimã€‘æˆ‘æœ‰è‡ªå·±çš„æ— äººæœºå•¦ - bilibili</a></p></li><li><p><a href="https://www.zhihu.com/zvideo/1365229339978682368">Chris Lovettçš„è®²è§£åœ¨è‡ªå·±çš„Windowsä¸Šå®ç°AirSimä»¿çœŸ - çŸ¥ä¹ (zhihu.com)</a></p></li></ul></blockquote><h2 id="1-AirSim-Windowsç¯å¢ƒé…ç½®">1.AirSim-Windowsç¯å¢ƒé…ç½®</h2><blockquote><p><strong>æ³¨ï¼šWindowsç¯å¢ƒéœ€è¦è‡ªè¡Œå®‰è£…VS2022æˆ–ä»¥ä¸Šç‰ˆæœ¬ï¼ŒUnreal Engine &gt;= 4.27ï¼ˆæ¨è4.27ï¼‰ï¼Œä»¥åŠwsl2ï¼ˆåœ¨Windowsä¸Šè¿è¡ŒAirsimï¼Œåœ¨wslæˆ–è€…vmè™šæ‹Ÿæœºä¸Šé€šè¿‡rosæ§åˆ¶æ— äººæœºï¼‰</strong></p><ul><li><p>å®‰è£…è™šæ‹Ÿå¼•æ“</p><ul><li><p>1.<a href="https://www.unrealengine.com/download">ã€ä¸‹è½½å¹¶å®‰è£…EPICã€‘</a> ï¼Œè™½ç„¶è™šå¹»å¼•æ“æ˜¯å¼€æºå’Œå…è´¹ä¸‹è½½çš„ï¼Œä½†ä»ç„¶éœ€è¦æ³¨å†Œ</p></li><li><p>2.è¿è¡Œ<strong>Epic Games Launcher</strong>ï¼Œæ‰“å¼€å·¦ä¾§çª—æ ¼ä¸­çš„ â€œ<strong>è™šå¹»å¼•æ“</strong>â€ é€‰é¡¹å¡ã€‚å•å‡»å³ä¸Šè§’çš„ â€œ<strong>å®‰è£…</strong>â€ æŒ‰é’®ï¼Œè¯¥æŒ‰é’®åº”æ˜¾ç¤ºä¸‹è½½ <strong>UE&gt; = 4.27ï¼ˆæ¨è4.27ï¼‰</strong> çš„é€‰é¡¹ã€‚é€‰æ‹©å®‰è£…ä½ç½®ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å¦‚æœæ‚¨å®‰è£…äº†å¤šä¸ªç‰ˆæœ¬çš„<strong>Unreal</strong>ï¼Œè¯·å•å‡»è¯¥ç‰ˆæœ¬çš„å¯åŠ¨æŒ‰é’®æ—è¾¹çš„å‘ä¸‹ç®­å¤´ï¼Œä»¥ç¡®ä¿å°†æ‚¨ä½¿ç”¨çš„ç‰ˆæœ¬è®¾ç½®ä¸º â€œ<strong>å½“å‰</strong>â€ã€‚</p><p><strong>Note</strong>: å¦‚æœæ‚¨æœ‰UE 4.16æˆ–æ›´æ—§çš„é¡¹ç›®ï¼Œè¯·å‚é˜… [å‡çº§æŒ‡å—](https:// <a href="http://microsoft.github.io/AirSim/unreal_upgrade/">microsoft.github.io/AirSim/unreal_upgrade/</a>) æ¥å‡çº§æ‚¨çš„é¡¹ç›®ã€‚</p></li></ul></li><li><p>å®‰è£…VS2022</p><ul><li>1.<a href="https://mp.weixin.qq.com/s?__biz=MzA4MjU4MTg2Ng==&amp;mid=2247523511&amp;idx=7&amp;sn=57646ed6e7f178334c8a7a3593022f0e&amp;chksm=9f815cb2a8f6d5a406cb4bd9ab4d578c67a8556f9296a579f351df0c895290d3ad479dfcd138&amp;scene=21#wechat_redirect">Visual Studio2022å®‰è£…æ•™ç¨‹ (qq.com)</a>ã€‚ç¡®ä¿é€‰æ‹©å®‰è£…æ—¶å‹¾é€‰äº†<strong>C ++æ¡Œé¢å¼€å‘</strong> å’Œ**Windows 10 SDK 10.0.19041ï¼ˆå¦‚æœæ˜¯Windows11è¿˜éœ€è¦é€‰æ‹©Windows11çš„SDKï¼‰**è¿›è¡Œæ¡Œé¢å¼€å‘ (é»˜è®¤æƒ…å†µä¸‹åº”é€‰æ‹©)ï¼Œç„¶åé€‰æ‹©æœ€æ–°çš„ã€‚<strong>NET Framework SDK</strong>ä¸‹çš„ â€œ<strong>å•ä¸ªç»„ä»¶</strong>â€ é€‰é¡¹å¡ï¼ŒåŒæ—¶å®‰è£…VS 2022ã€‚</li></ul><p><img src="https://s2.loli.net/2024/02/28/37yMhW9EUtpa2cB.png" alt=""></p></li><li><p>Windowså®‰è£…wsl2</p><ul><li><strong>å‚è€ƒè¿™ä¸ªæ•™ç¨‹å®‰è£…ï¼ˆubuntuç‰ˆæœ¬é€‰æ‹©20æœ€å¥½ï¼‰ï¼š</strong><a href="https://zhuanlan.zhihu.com/p/475462241">Windows 11 å®‰è£… WSL2 - çŸ¥ä¹</a></li></ul></li></ul></blockquote><h3 id="1-1Build-Airsim">1.1Build Airsim</h3><ol><li><p>ä¸‹è½½æºç åˆ°æœ¬åœ°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/microsoft/AirSim.git</span><br><span class="line"><span class="comment"># å›½å†…ç½‘ç»œç¯å¢ƒä¸å¥½æ—¶é€‰æ‹©ä¸‹é¢</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.moeyy.xyz/https://github.com/microsoft/AirSim.git</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…ä¾èµ–é¡¹å¹¶ç¼–è¯‘</p><ol><li><p><a href="https://cmake.org/download/">ã€ä¸‹è½½å¹¶å®‰è£…Cmakeã€‘</a>ï¼Œå®‰è£…æ—¶è®°å¾—å‹¾é€‰æ·»åŠ åˆ°ç¯å¢ƒä¸­</p><img src="https://s2.loli.net/2024/02/28/BnefXiZt3bp8lvY.png" style="zoom:50%;" /></li><li><p>å®‰è£…<strong>Cmake</strong>å®Œåé‡å¯ç”µè„‘ä»¥ç”Ÿæ•ˆç¯å¢ƒï¼Œæ‰“å¼€<code>Developer Command Prompt for VS 2022</code>ï¼Œåœ¨Windowsæœç´¢ä¸­æœç´¢ç„¶åä½¿ç”¨ç®¡ç†å‘˜æ‰“å¼€ï¼Œ<code>cd AirSim</code>è®°å¾—cdè¿›å…¥Airsimæ‰€åœ¨çš„ç›®å½•</p></li><li><p>è¾“å…¥<code>.\build.cmd</code>è¿›è¡Œç¼–è¯‘Airsimï¼Œå¦‚æœåœ¨ä¸‹é¢çš„è¿‡ç¨‹ä¸­å¡å£³äº†ï¼Œ<strong>Ctrl+C</strong>ç»ˆæ­¢ç¼–è¯‘ï¼Œç„¶åé‡æ–°ç¼–è¯‘ï¼Œç›´åˆ°ä¸‹è½½å®Œæˆå¹¶æ­£å¸¸ç¼–è¯‘å®Œæˆ</p></li></ol></li></ol><img src="https://s2.loli.net/2024/02/28/3RUyckmza5Twj9b.png" style="zoom:50%;" /><ol start="3"><li><p>ä½¿ç”¨<strong>VS2022</strong>ç¼–è¯‘æ‰“å¼€</p><ol><li><p>ä½¿ç”¨<code>Developer Command Prompt for VS 2022</code>è¿›å…¥<code>AirSim\Unreal\Environments\Blocks</code>ï¼Œæ‰§è¡Œ<code>.\update_from_git.bat</code></p></li><li><p>åŒå‡»æ‰“å¼€<code>Blocks.sln</code>ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨<strong>VS2022</strong></p></li><li><p>å³é”®<code>Block</code>è®¾ä¸ºä¸ºå¯åŠ¨é¡¹ç›®</p><img src="https://s2.loli.net/2024/03/28/6ALzG4JCR3QOdgb.png" style="zoom:80%;" /></li><li><p>ç¼–è¯‘å™¨é€‰æ‹©<code>DebugGame Editor</code>ï¼Œç„¶åå¯åŠ¨<strong>æœ¬åœ°Windowsè°ƒè¯•å™¨</strong>ï¼Œç¼–è¯‘å®Œæˆè‡ªåŠ¨æ‰“å¼€è™šå¹»å¼•æ“</p><p><img src="https://s2.loli.net/2024/03/28/V7Isc4tQrbgJvXk.png" alt=""></p></li><li><p>ç‚¹å‡»è¿è¡Œï¼Œç‚¹å‡»**â€˜æ˜¯â€™<strong>é€‰æ‹©ä»¿çœŸè½¦ï¼Œç‚¹å‡»</strong>â€™å¦â€™**é€‰æ‹©ä»¿çœŸæ— äººæœºï¼Œå½“å‡ºç°ä¸‹é¢çš„ç”»é¢åˆ™è¡¨ç¤ºç¯å¢ƒæ­å»ºæˆåŠŸ</p><img src="https://s2.loli.net/2024/03/28/oEuhpY5cqtKIGbS.png" style="zoom:50%;" /></li></ol></li></ol><h3 id="1-2è‡ªå®šä¹‰åœºæ™¯">1.2è‡ªå®šä¹‰åœºæ™¯</h3><blockquote><p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„è™šæ‹Ÿåœºæ™¯ï¼Œå¹¶é€šè¿‡<strong>Airsim</strong>åŠ è½½</p></blockquote><ol><li><p>æ‰“å¼€<strong>Epic</strong> -&gt; ç‚¹å‡»<strong>è™šå¹»å•†åŸ</strong> -&gt; æœç´¢<strong>ç¯å¢ƒ</strong>ç±»å‹çš„ç´ æï¼ˆæ¨èå…è´¹ï¼šæœç´¢&quot;<strong>Assetsville Townæˆ–City Park</strong>&quot; -&gt; ç­›é€‰ç»“æœé€‰æ‹©å…è´¹ -&gt; æ·»åŠ è‡´è´­ç‰©è½¦è¿›è¡Œè´­ä¹°ï¼‰-&gt; ç‚¹å‡»ä¸Šæ–¹çš„<strong>åº“</strong>ï¼Œé€‰æ‹©åˆšæ‰è´­ä¹°çš„<strong>City Park</strong>åˆ›å»ºå·¥ç¨‹ï¼Œé€‰å®šè·¯å¾„</p><p><img src="https://s2.loli.net/2024/06/11/opNvHEOc7L9dnGV.png" alt="image-20240611162643650"></p><p><img src="https://s2.loli.net/2024/06/11/tlpfGvI9JxaKE2N.png" alt="image-20240611163507427"></p></li><li><p>å¯¼å…¥å®ŒæˆååŒå‡»æ‰“å¼€è¯¥å·¥ç¨‹</p><blockquote><p>æ³¨ï¼šå¦‚æœåŠ è½½è¿‡ç¨‹ä¸­é»‘å±æˆ–è€…å¡ä½å¯ä»¥é‡å¯<strong>Unreal Engine</strong>ï¼Œå¦‚æœå®åœ¨æ‰“å¼€å¤ªå¡æˆ–å¤ªæ…¢å¯ä»¥é€‰æ‹©ä¸Šé¢è´­ä¹°<strong>City Park</strong>ç¬¬äºŒä¸ªé‚£ä¸ªè½»é‡ç‰ˆåœ°å›¾</p></blockquote><p><img src="https://s2.loli.net/2024/06/11/oZ7UkgFCfnQ8TVt.png" alt="image-20240611192338259"></p></li><li><p>å…³é—­å·¥ç¨‹ï¼Œå°†<code>AirSim\Unreal\Plugins</code>æ–‡ä»¶å¤¹å¤åˆ¶åˆ°åˆšæ‰çš„å·¥ç¨‹ç›®å½•ä¸‹ï¼Œç„¶ååŒå‡»<code>CityParkEnvironmentMini.uproject</code>ï¼Œå¼¹å‡º<strong>Rebuild</strong>çª—å£ï¼Œç‚¹å‡»<strong>æ˜¯</strong></p><p><img src="https://s2.loli.net/2024/06/11/8Elr6XORuQLNDof.png" alt="image-20240611195006551"></p></li><li><p>é‡æ–°ç¼–è¯‘å®Œæˆåï¼Œå³ä¸‹è§’å¼¹å‡ºæ›´æ–°æ’ä»¶ï¼Œç‚¹å‡»<strong>ç®¡ç†æ’ä»¶</strong>å³å¯çœ‹åˆ°<strong>AirSimæ’ä»¶</strong>æ·»åŠ åˆ°å·¥ç¨‹ä¸­ï¼Œç„¶åç‚¹å‡»åŠŸèƒ½æ çš„<code>è®¾ç½®</code> -&gt; <code>ä¸–ç•Œåœºæ™¯è®¾ç½®</code> -&gt; æ¸¸æˆæ¨¡å¼é‡è½½é€‰æ‹©<code>AirSimGameMode</code></p><p><img src="https://s2.loli.net/2024/06/11/c2L3lwUdXxyzbDT.png" alt="image-20240611195450875"></p><p><img src="https://s2.loli.net/2024/06/11/I1nkLQ9wtahvN8C.png" alt="image-20240611195844988"></p></li><li><p>ç‚¹å‡»è¿è¡Œï¼Œå¦‚æœå‡ºç°å¼¹çª—ï¼Œé€‰æ‹©<code>æ˜¯</code>å¯åŠ¨è½¦è¾†ä»¿çœŸï¼Œ<code>å¦</code>å¯åŠ¨æ— äººæœºä»¿çœŸï¼ŒæŒ‰<code>F1</code>æŸ¥çœ‹å¸®åŠ©</p><p><img src="https://s2.loli.net/2024/06/11/bmf5LCSIpjDP9Bu.png" alt="image-20240611200347055"></p><ol start="6"><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå‰å¾€<code>C:\User\&#123;ä½ çš„ç”¨æˆ·å&#125;\Documents\AirSim\Settings.json</code>,æ–‡ä»¶é…ç½®é¡¹å‚è€ƒ<a href="https://microsoft.github.io/AirSim/settings/">https://microsoft.github.io/AirSim/settings/</a>ï¼Œä»¥ä¸‹æ˜¯æ¨èçš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦æ­é…ç¬¬äºŒéƒ¨åˆ†çš„è®¾ç½®ä½¿ç”¨ï¼Œå…¶ä¸­<strong>LocalHostIp</strong>ä¸ºWindowsæœ¬æœºçš„IPåœ°å€ï¼Œé€šè¿‡cmdæŒ‡ä»¤è¾“å…¥<code>ipconfig</code>è¿›è¡ŒæŸ¥çœ‹ï¼Œä¸€èˆ¬ä¸º192.168.1.xï¼Œæˆ–è€…å…¶ä»–ï¼Œä½ å¯ä»¥é€šè¿‡<strong>WSL</strong>æˆ–è€…<strong>VMè™šæ‹Ÿæœº</strong>pingä¸€ä¸‹çœ‹çœ‹é€šä¸é€š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;SettingsVersion&quot;</span><span class="punctuation">:</span> <span class="number">1.2</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;SimMode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Multirotor&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ClockType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;SteppableClock&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;Vehicles&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;PX4&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;VehicleType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;PX4Multirotor&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;UseSerial&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;LockStep&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;UseTcp&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;TcpPort&quot;</span><span class="punctuation">:</span> <span class="number">4560</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ControlIp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;remote&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ControlPortLocal&quot;</span><span class="punctuation">:</span> <span class="number">14540</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;ControlPortRemote&quot;</span><span class="punctuation">:</span> <span class="number">14580</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;LocalHostIp&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.1.116&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Sensors&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;Barometer&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;SensorType&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;PressureFactorSigma&quot;</span><span class="punctuation">:</span> <span class="number">0.0001825</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;Imu&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;SensorType&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Enabled&quot;</span> <span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;AngularRandomWalk&quot;</span><span class="punctuation">:</span> <span class="number">0.3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;GyroBiasStabilityTau&quot;</span><span class="punctuation">:</span> <span class="number">500</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;GyroBiasStability&quot;</span><span class="punctuation">:</span> <span class="number">4.6</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;VelocityRandomWalk&quot;</span><span class="punctuation">:</span> <span class="number">0.24</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;AccelBiasStabilityTau&quot;</span><span class="punctuation">:</span> <span class="number">800</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;AccelBiasStability&quot;</span><span class="punctuation">:</span> <span class="number">36</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;Gps&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;SensorType&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Enabled&quot;</span> <span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EphTimeConstant&quot;</span><span class="punctuation">:</span> <span class="number">0.9</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EpvTimeConstant&quot;</span><span class="punctuation">:</span> <span class="number">0.9</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EphInitial&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EpvInitial&quot;</span><span class="punctuation">:</span> <span class="number">25</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EphFinal&quot;</span><span class="punctuation">:</span> <span class="number">0.1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EpvFinal&quot;</span><span class="punctuation">:</span> <span class="number">0.1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EphMin3d&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;EphMin2d&quot;</span><span class="punctuation">:</span> <span class="number">4</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;UpdateLatency&quot;</span><span class="punctuation">:</span> <span class="number">0.2</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;UpdateFrequency&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;StartupDelay&quot;</span><span class="punctuation">:</span> <span class="number">1</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;Distance&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;SensorType&quot;</span><span class="punctuation">:</span> <span class="number">5</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Enabled&quot;</span> <span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;MinDistance&quot;</span><span class="punctuation">:</span> <span class="number">0.2</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;MaxDistance&quot;</span><span class="punctuation">:</span> <span class="number">40</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;X&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;Y&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;Z&quot;</span><span class="punctuation">:</span> <span class="number">-1</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;Yaw&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;Pitch&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span> <span class="attr">&quot;Roll&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;DrawDebugPoints&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;Parameters&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;NAV_RCL_ACT&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;NAV_DLL_ACT&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;COM_OBL_ACT&quot;</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;LPE_LAT&quot;</span><span class="punctuation">:</span> <span class="number">47.641468</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;LPE_LON&quot;</span><span class="punctuation">:</span> <span class="number">-122.140165</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="2-WSL2æˆ–è€…VMè™šæ‹Ÿæœºç¯å¢ƒé…ç½®">2. WSL2æˆ–è€…VMè™šæ‹Ÿæœºç¯å¢ƒé…ç½®</h2><blockquote><p>æ³¨ï¼šWSLæˆ–VMè™šæ‹Ÿæœºéœ€è¦å¦‚ä¸‹ç¯å¢ƒ</p><ul><li>ubuntuç³»ç»Ÿ</li><li>gcc&gt;=8ï¼š<code>gcc -v</code> <code>sudo apt install gcc</code></li><li>ROS1æˆ–è€…ROS2ï¼šå®‰è£…å‚è€ƒ<a href="https://www.mgodmonkey.cn/posts/232d6cf1.html">ROS èµ„æºæ±‡æ€»</a></li><li>PX4ä»¿çœŸï¼šå®‰è£…å‚è€ƒ<a href="https://www.mgodmonkey.cn/posts/cfe889db.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-4-ã€PX4ä¸Gazeboå…¥é—¨ã€‘</a></li><li>QGCä»¥åŠä¸€äº›å¸¸è§çš„è½¯ä»¶ï¼šå®‰è£…å‚è€ƒ<a href="https://www.mgodmonkey.cn/posts/eb82f52e.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-3-ã€ç¯å¢ƒä¸å¸¸ç”¨è½¯ä»¶å®‰è£…ã€‘</a></li></ul></blockquote><ol><li><p>å¤åˆ¶ä¸€ä»½<code>AirSim</code>å·¥ç¨‹ç›®å½•åˆ°<strong>WSL</strong>æˆ–<strong>VMè™šæ‹Ÿæœº</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Ubuntu18</span></span><br><span class="line">sudo apt-get install ros-melodic-tf2-sensor-msgs ros-melodic-tf2-geometry-msgs ros-melodic-mavros*</span><br><span class="line"><span class="comment"># Ubuntu20</span></span><br><span class="line">sudo apt-get install ros-noetic-tf2-sensor-msgs ros-noetic-tf2-geometry-msgs ros-noetic-mavros*</span><br><span class="line"><span class="comment"># åˆè¯•åŒ–AirSim</span></span><br><span class="line"><span class="built_in">cd</span> AirSim</span><br><span class="line">sudo bash ./setup.sh</span><br><span class="line">sudo bash ./build.sh</span><br></pre></td></tr></table></figure></li><li><p>ç¼–è¯‘ROSåŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ROS1</span></span><br><span class="line"><span class="built_in">cd</span> AirSim/ros</span><br><span class="line">catkin_make</span><br><span class="line"><span class="comment"># ROS2</span></span><br><span class="line"><span class="built_in">cd</span> AirSim/ros2</span><br><span class="line">colcon build</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®<code>~/.bashrc</code>ç¯å¢ƒ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ipåœ°å€ä¸ºè¿è¡Œairsimçš„Windowsçš„ip</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;export PX4_SIM_HOST_ADDR=192.168.1.116&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="comment"># è®°å¾—æŸ¥çœ‹ä¸€ä¸‹è‡ªå·±çš„è·¯å¾„å¯¹ä¸å¯¹</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;source ~/Airsim/ros/devel/setup.sh&quot;</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure></li><li><p>å¼€æ”¾é˜²ç«å¢™ï¼ˆå¦‚æœæ²¡æœ‰è£…é˜²ç«å¢™å°±ä¸éœ€è¦è¿™ä¸€æ­¥äº†ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 4560</span><br><span class="line">sudo ufuw allow 10049</span><br></pre></td></tr></table></figure></li></ol></li><li><p>åœ¨Windowä¸­å¯åŠ¨AirSimï¼ˆè®°å¾—ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡æ–°å¯åŠ¨ï¼‰ï¼Œçª—å£æ˜¾ç¤ºç­‰å¾…TCPè¿æ¥</p><p><img src="https://s2.loli.net/2024/06/12/1tAXWDj4BySsT2H.png" alt="image-20240612155513180"></p></li><li><p>åœ¨<strong>WSL</strong>æˆ–è€…<strong>VMè™šæ‹Ÿæœº</strong>ä¸­å¯åŠ¨<code>PX4ä»¿çœŸ</code>å’Œ<code>ROS&amp;rivz</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/PX4-Autopilot</span><br><span class="line">make px4_sitl_default none_iris</span><br></pre></td></tr></table></figure><p>å‡ºç°ä¸‹é¢çš„æç¤ºåˆ™è¯´æ˜PX4ä¸AirSimè¿æ¥æˆåŠŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">PX4 SIM HOST: 192.168.1.117</span><br><span class="line">INFO  [simulator] Simulator using TCP on remote host 192.168.1.117 port 4560</span><br><span class="line">WARN  [simulator] Please ensure port 4560 is not blocked by a firewall.</span><br><span class="line">INFO  [simulator] Waiting <span class="keyword">for</span> simulator to accept connection on TCP port 4560</span><br><span class="line">INFO  [simulator] Simulator connected on TCP port 4560.</span><br><span class="line">INFO  [commander] LED: open /dev/led0 failed (22)</span><br><span class="line">INFO  [init] Mixer: etc/mixers/quad_w.main.mix on /dev/pwm_output0</span><br><span class="line">INFO  [init] setting PWM_AUX_OUT none</span><br><span class="line">INFO  [mavlink] mode: Normal, data rate: 4000000 B/s on udp port 18570 remote port 14550</span><br><span class="line">INFO  [mavlink] mode: Onboard, data rate: 4000000 B/s on udp port 14580 remote port 14540</span><br><span class="line">INFO  [mavlink] mode: Onboard, data rate: 4000 B/s on udp port 14280 remote port 14030</span><br><span class="line">INFO  [mavlink] mode: Gimbal, data rate: 400000 B/s on udp port 13030 remote port 13280</span><br><span class="line">INFO  [logger] logger started (mode=all)</span><br><span class="line">INFO  [logger] Start file <span class="built_in">log</span> (<span class="built_in">type</span>: full)</span><br><span class="line">INFO  [logger] [logger] ./log/2024-06-12/08_20_41.ulg</span><br><span class="line">INFO  [logger] Opened full <span class="built_in">log</span> file: ./log/2024-06-12/08_20_41.ulg</span><br><span class="line">INFO  [mavlink] MAVLink only on localhost (<span class="built_in">set</span> param MAV_&#123;i&#125;_BROADCAST = 1 to <span class="built_in">enable</span> network)</span><br><span class="line">INFO  [mavlink] MAVLink only on localhost (<span class="built_in">set</span> param MAV_&#123;i&#125;_BROADCAST = 1 to <span class="built_in">enable</span> network)</span><br><span class="line">INFO  [px4] Startup script returned successfully</span><br><span class="line">pxh&gt; INFO  [tone_alarm] home <span class="built_in">set</span></span><br><span class="line">INFO  [tone_alarm] notify negative</span><br></pre></td></tr></table></figure><p>å¯åŠ¨<code>ROS&amp;rivz</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roslaunch airsim_ros_pkgs airsim_node.launch output:=screen host:=<span class="variable">$PX4_SIM_HOST_ADDR</span></span><br><span class="line">roslaunch airsim_ros_pkgs rviz.launch</span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>rostopic list</code>æŸ¥çœ‹æœ‰æ²¡æœ‰ä¸€ä¸‹ä¸»é¢˜å³å¯è¯´æ˜æ˜¯å¦è¿æ¥æ­£å¸¸</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">laohanba@ubuntu:~/Airsim$ rostopic list</span><br><span class="line">/airsim_node/PX4/altimeter/Barometer</span><br><span class="line">/airsim_node/PX4/distance/Distance</span><br><span class="line">/airsim_node/PX4/environment</span><br><span class="line">/airsim_node/PX4/global_gps</span><br><span class="line">/airsim_node/PX4/gps/Gps</span><br><span class="line">/airsim_node/PX4/imu/Imu</span><br><span class="line">/airsim_node/PX4/magnetometer/magnetometer</span><br><span class="line">/airsim_node/PX4/odom_local_ned</span><br><span class="line">/airsim_node/PX4/vel_cmd_body_frame</span><br><span class="line">/airsim_node/PX4/vel_cmd_world_frame</span><br><span class="line">/airsim_node/gimbal_angle_euler_cmd</span><br><span class="line">/airsim_node/gimbal_angle_quat_cmd</span><br><span class="line">/airsim_node/origin_geo_point</span><br><span class="line">/rosout</span><br><span class="line">/rosout_agg</span><br><span class="line">/tf</span><br><span class="line">/tf_static</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å„ä¸ªè¯é¢˜å’Œè®¢é˜…è€…åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li><p>Publishers:<a href="https://microsoft.github.io/AirSim/airsim_ros_pkgs/#publishers">#</a></p><ul><li><p><code>/airsim_node/origin_geo_point</code> <a href="https://github.com/microsoft/AirSim/tree/main/ros/src/airsim_ros_pkgs/msg/GPSYaw.msg">airsim_ros_pkgs/GPSYaw</a> ä¸å…¨çƒ NED æ¡†æ¶ç›¸å¯¹åº”çš„ GPS åæ ‡ã€‚è¿™å°†åœ¨ airsim çš„ <a href="https://microsoft.github.io/AirSim/settings/">settings.json</a> æ–‡ä»¶ä¸­çš„ <code>OriginGeopoint</code> é”®ä¸‹è¿›è¡Œè®¾ç½®</p></li><li><p><code>/airsim_node/VEHICLE_NAME/global_gps</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/NavSatFix.html">sensor_msgs/NavSatFix</a> è¿™æ˜¯æ— äººæœºåœ¨ airsim ä¸­çš„å½“å‰ GPS åæ ‡</p></li><li><p><code>/airsim_node/VEHICLE_NAME/odom_local_ned</code> <a href="https://docs.ros.org/api/nav_msgs/html/msg/Odometry.html">nav_msgs/Odometry</a> NED æ¡†æ¶ï¼ˆé»˜è®¤åç§°ï¼šoddom_local_nedï¼Œå‘å°„åç§°å’Œæ¡†æ¶ç±»å‹å¯é…ç½®ï¼‰ä¸­ä¸èµ·é£ç‚¹çš„æµ‹è·ã€‚</p></li><li><p><code>/airsim_node/VEHICLE_NAME/CAMERA_NAME/IMAGE_TYPE/camera_info</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/CameraInfo.html">sensor_msgs/CameraInfo</a></p></li><li><p><code>/airsim_node/VEHICLE_NAME/CAMERA_NAME/IMAGE_TYPE</code> <a href="https://docs.ros.org/api/sensor_msgs/html/msg/Image.html">sensor_msgs/Image</a> RGB æˆ–æµ®ç‚¹å›¾åƒï¼Œå–å†³äº settings.json ä¸­è¦æ±‚çš„å›¾åƒç±»å‹ã€‚</p></li><li><p><code>/tf</code> <a href="https://docs.ros.org/api/tf2_msgs/html/msg/TFMessage.html">tf2_msgs/TFMessage</a></p></li><li><p><code>/airsim_node/VEHICLE_NAME/altimeter/SENSOR_NAME</code> <a href="https://github.com/microsoft/AirSim/blob/main/ros/src/airsim_ros_pkgs/msg/Altimeter.msg">airsim_ros_pkgs/Altimeter</a> è¿™æ˜¯é«˜åº¦è®¡å½“å‰çš„é«˜åº¦ã€å‹åŠ›å’Œæ¸©åº¦è¯»æ•° <a href="https://en.wikipedia.org/wiki/QNH">QNH</a></p></li><li><p><code>/airsim_node/VEHICLE_NAME/imu/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/Imu.html">sensor_msgs::Imu</a> IMU ä¼ æ„Ÿå™¨æ•°æ®</p></li><li><p><code>/airsim_node/VEHICLE_NAME/magnetometer/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/MagneticField.html">sensor_msgs::MagneticField</a> æµ‹é‡ç£åœºçŸ¢é‡/ç½—ç›˜</p></li><li><p><code>/airsim_node/VEHICLE_NAME/distance/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/Range.html">sensor_msgs::Range</a> æµ‹é‡ä¸æ´»åŠ¨è€…çš„è·ç¦»ï¼Œå¦‚çº¢å¤–çº¿æˆ–çº¢å¤–ä¿¡å·</p></li><li><p><code>/airsim_node/VEHICLE_NAME/lidar/SENSOR_NAME</code> <a href="http://docs.ros.org/api/sensor_msgs/html/msg/PointCloud2.html">sensor_msgs::PointCloud2</a> æ¿€å…‰é›·è¾¾ç‚¹äº‘</p></li></ul></li><li><p>Subscribers:<a href="https://microsoft.github.io/AirSim/airsim_ros_pkgs/#subscribers">#</a></p><ul><li><p><code>/airsim_node/vel_cmd_body_frame</code> <a href="https://github.com/microsoft/AirSim/tree/main/ros/src/airsim_ros_pkgs/msg/VelCmd.msg">airsim_ros_pkgs/VelCmd</a> å¿½ç•¥ <code>vehicle_name</code> å­—æ®µï¼Œå°†å…¶ç•™ç©ºã€‚ä»Šåæˆ‘ä»¬å°†å¯¹å¤šæ¶æ— äººæœºä½¿ç”¨ <code>vehicle_name</code> å­—æ®µ</p></li><li><p><code>/airsim_node/vel_cmd_world_frame</code> <a href="https://github.com/microsoft/AirSim/tree/main/ros/src/airsim_ros_pkgs/msg/VelCmd.msg">airsim_ros_pkgs/VelCmd</a> å¿½ç•¥ <code>vehicle_name</code> å­—æ®µï¼Œå°†å…¶ç•™ç©ºã€‚ä»Šåæˆ‘ä»¬å°†å¯¹å¤šæ¶æ— äººæœºä½¿ç”¨ <code>vehicle_name</code> å­—æ®µ</p></li><li><p><code>/gimbal_angle_euler_cmd</code> <a href="https://github.com/microsoft/AirSim/tree/main/ros/src/airsim_ros_pkgs/msg/GimbalAngleEulerCmd.msg">airsim_ros_pkgs/GimbalAngleEulerCmd</a> ä»¥æ¬§æ‹‰è§’ä¸ºå•ä½çš„ä¸‡å‘èŠ‚è®¾å®šç‚¹</p></li><li><p><code>/gimbal_angle_quat_cmd</code> <a href="https://github.com/microsoft/AirSim/tree/main/ros/src/airsim_ros_pkgs/msg/GimbalAngleQuatCmd.msg">airsim_ros_pkgs/GimbalAngleQuatCmd</a> ä»¥å››å…ƒæ•°è¡¨ç¤ºçš„ä¸‡å‘èŠ‚è®¾å®šç‚¹</p></li><li><p><code>/airsim_node/VEHICLE_NAME/car_cmd</code> <a href="https://github.com/microsoft/AirSim/blob/main/ros/src/airsim_ros_pkgs/msg/CarControls.msg">airsim_ros_pkgs/CarControls</a> æ²¹é—¨ã€åˆ¹è½¦ã€è½¬å‘å’Œæ¡£ä½é€‰æ‹©æ§åˆ¶ã€‚å¯æ§åˆ¶è‡ªåŠ¨å’Œæ‰‹åŠ¨å˜é€Ÿç®±ï¼Œä½¿ç”¨æ–¹æ³•è¯·å‚è§ <a href="https://github.com/microsoft/AirSim/blob/main/ros/src/airsim_ros_pkgs/scripts/car_joy"><code>car_joy.py</code></a> è„šæœ¬</p></li></ul></li><li><p>Services:<a href="https://microsoft.github.io/AirSim/airsim_ros_pkgs/#services">#</a></p><ul><li><p><code>/airsim_node/VEHICLE_NAME/land</code> <a href="https://docs.ros.org/api/std_srvs/html/srv/Empty.html">airsim_ros_pkgs/Takeoff</a></p></li><li><p><code>/airsim_node/takeoff</code> <a href="https://docs.ros.org/api/std_srvs/html/srv/Empty.html">airsim_ros_pkgs/Takeoff</a></p></li><li><p><code>/airsim_node/reset</code> <a href="https://docs.ros.org/api/std_srvs/html/srv/Empty.html">airsim_ros_pkgs/Reset</a> é‡ç½®<em>æ‰€æœ‰</em>æ— äººæœº</p></li></ul></li><li><p>Parameters:<a href="https://microsoft.github.io/AirSim/airsim_ros_pkgs/#parameters">#</a></p><ul><li><p><code>/airsim_node/world_frame_id</code> [string] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼šworld_ned è®¾ç½®ä¸º &quot;world_enu &quot;å¯è‡ªåŠ¨åˆ‡æ¢åˆ° ENU æ¡†æ¶</p></li><li><p><code>/airsim_node/odom_frame_id</code> [string] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼š odom_local_ned å¦‚æœå°† world_frame_id è®¾ç½®ä¸º â€œworld_enuâ€ï¼Œåˆ™é»˜è®¤ odom åç§°å°†æ”¹ä¸º â€œodom_local_enuâ€</p></li><li><p><code>/airsim_node/coordinate_system_enu</code> [boolean] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼šfalse å¦‚æœå°† world_frame_id è®¾ç½®ä¸º â€œworld_enuâ€ï¼Œè¯¥è®¾ç½®å°†é»˜è®¤ä¸º true</p></li><li><p><code>/airsim_node/update_airsim_control_every_n_sec</code> [double] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼š0.01 ç§’ã€‚è®¡æ—¶å™¨å›è°ƒé¢‘ç‡ï¼Œç”¨äºä» airsim æ›´æ–°æ— äººæœº Odom å’ŒçŠ¶æ€ï¼Œä»¥åŠå‘é€æ§åˆ¶å‘½ä»¤ã€‚å½“å‰ RPClib ä¸è™šå¹»å¼•æ“çš„æ¥å£æœ€å¤§é¢‘ç‡ä¸º 50 èµ«å…¹ã€‚ROS ä¸­çš„å®šæ—¶å™¨å›è°ƒä»¥æœ€å¤§é€Ÿç‡è¿è¡Œï¼Œå› æ­¤æœ€å¥½ä¸è¦è§¦åŠæ­¤å‚æ•°</p></li><li><p><code>/airsim_node/update_airsim_img_response_every_n_sec</code> [double] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼š0.01 ç§’ã€‚ä» airsim ä¸­æ‰€æœ‰æ‘„åƒæœºæ¥æ”¶å›¾åƒçš„å®šæ—¶å™¨å›è°ƒé¢‘ç‡ã€‚é€Ÿåº¦å–å†³äºè¯·æ±‚å›¾åƒçš„æ•°é‡å’Œåˆ†è¾¨ç‡ã€‚ROS ä¸­çš„å®šæ—¶å›è°ƒä»¥æœ€å¤§å¯èƒ½çš„é€Ÿåº¦è¿è¡Œï¼Œå› æ­¤æœ€å¥½ä¸è¦è§¦åŠæ­¤å‚æ•°</p></li><li><p><code>/airsim_node/publish_clock</code> [double] Set in: <code>$(airsim_ros_pkgs)/launch/airsim_node.launch</code> é»˜è®¤å€¼ï¼šfalse è®¾ç½®ä¸º true æ—¶ï¼Œå°†å‘å¸ƒ ros /clock ä¸»é¢˜</p></li></ul></li></ul></blockquote><blockquote><p><strong>æ³¨ï¼šå¯åŠ¨PX4è¿æ¥æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡QGCåœ°é¢ç«™ä¸€é”®èµ·é£æ— äººæœº</strong></p><p><img src="https://s2.loli.net/2024/06/12/Lg1T7aX4spxC2ze.gif" alt="gif3"></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;AirSimé¡¹ç›®åœ°å€ï¼š&lt;/strong&gt;&lt;a href=&quot;https://github.com/microsoft/AirSim&quot;&gt;https://github.com/microsoft/AirSim&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;st</summary>
      
    
    
    
    <category term="ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº" scheme="https://www.mgodmonkey.cn/categories/%E4%BB%8E0%E5%85%A5%E9%97%A8%E8%87%AA%E4%B8%BB%E7%A9%BA%E4%B8%AD%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
    <category term="ä»¿çœŸ" scheme="https://www.mgodmonkey.cn/tags/%E4%BB%BF%E7%9C%9F/"/>
    
  </entry>
  
  <entry>
    <title>é¦™æ©™æ´¾Aiproåˆä½“éªŒ</title>
    <link href="https://www.mgodmonkey.cn/posts/64c6093c.html"/>
    <id>https://www.mgodmonkey.cn/posts/64c6093c.html</id>
    <published>2024-05-29T07:32:22.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h1>é¦™æ©™æ´¾AIproåˆä½“éªŒ</h1><img src="http://www.orangepi.cn/img/aipro/aipro-1.png" style="zoom:60%;" /><h2 id="1-å¼€å‘æ¿èµ„æ–™">1.å¼€å‘æ¿èµ„æ–™</h2><ul><li><strong>å¼€å‘æ¿èµ„æº</strong><ul><li><strong>äº§å“ä»‹ç»ä¸»é¡µï¼š</strong><a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/details/Orange-Pi-AIpro.html">http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/details/Orange-Pi-AIpro.html</a></li><li><strong>å¼€å‘æ¿æ¡ˆä¾‹æºç ï¼š</strong><a href="https://gitee.com/ascend/EdgeAndRobotics">https://gitee.com/ascend/EdgeAndRobotics</a></li><li><strong>å·¥å…·&amp;åŸç†å›¾&amp;æ¡ˆä¾‹æºç &amp;å¼€å‘æ‰‹å†Œ</strong>ï¼š<a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-AIpro.html">http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-AIpro.html</a></li><li><strong>è½¬å­˜çš„é•œåƒèµ„æº</strong>ï¼š<a href="https://pan.quark.cn/s/7f885d318cdf">å¤¸å…‹ç½‘ç›˜</a> æå–ç ï¼šXTw3</li></ul></li><li><strong>è®ºå›èµ„æº</strong><ul><li><strong>Orange Piè®ºå›ï¼š</strong><a href="http://forum.orangepi.cn/">http://forum.orangepi.cn/</a></li><li><strong>æ˜‡è…¾è®ºå›â€“é¦™æ©™æ´¾AIproå­¦ä¹ èµ„æºä¸€ç«™å¼å¯¼èˆª</strong>ï¼š<a href="https://www.hiascend.com/forum/thread-0285140173361311056-1-1.html">https://www.hiascend.com/forum/thread-0285140173361311056-1-1.html</a></li></ul></li></ul><h2 id="2-ç®€æ˜“å¼€ç®±">2.ç®€æ˜“å¼€ç®±</h2><ol><li><p>æ€€ç€æ¿€åŠ¨çš„å¿ƒæ‰“å¼€å¿«é€’ç›’ï¼Œé‡Œé¢èµ«ç„¶èººç€<strong>é¦™æ©™æ´¾AIpro</strong>å…¨å®¶ç¦ï¼šä¸€ä¸ª65Wçš„å……ç”µå¤´ï¼Œä¸€æ ¹æ•°æ®çº¿ï¼Œä¸€ä¸ªOrange Pi AIpro(8G)æœ¬ä½“ï¼ŒçœŸæ­£åšåˆ°äº†å¼€ç®±å³ç”¨ï¼ˆé›¶å”®ç‰ˆç”µæºå’Œæ‰‡çƒ­æ¨¡å—éœ€è¦å•ç‹¬è´­ä¹°ï¼‰</p><img src="https://s2.loli.net/2024/05/23/rOxE7wDAa1fLdh8.png" style="zoom:80%;" /><img src="https://s2.loli.net/2024/05/23/ZO7tc8Qe1r3NlLF.png" style="zoom:80%;" /></li><li><p>æ­£é¢æ¥å£ä¸€è§ˆå›¾å¦‚ä¸‹ï¼Œæ¥å£æœå‰ä»å·¦è¾¹å¾€å³ä¾æ¬¡æ˜¯Type-Cç”µæºæ¥å£ï¼ŒHDMI1 2.0ï¼Œ3.5mméŸ³é¢‘æ¥å£ï¼ŒHDMI0 2.0ï¼ŒType-C 3.0ï¼Œä¸¤ä¸ªä¸ªUSB3.0å’Œä¸€ä¸ªåƒå…†ç½‘å£ï¼Œä¸¤ä¸ªæ ‡å‡†ç‰ˆçš„HDMIçœå»äº†é¢å¤–è´­ä¹°å…¶ä»–å‹å·çš„HDMIçº¿ï¼Œè¿™ä¸ªå¥½è¯„ã€‚æ¿å¡ä¸Šè¿˜æœ‰ä¸€ä¸ªMicro USBï¼Œæ–¹ä¾¿ä¸²å£è°ƒè¯•ï¼Œä¸€ä¸ªMIPI DSIæ¥å£(MIPI-DSIæ˜¯ä¸€ç§åº”ç”¨äºæ˜¾ç¤ºæŠ€æœ¯çš„ä¸²è¡Œæ¥å£ï¼Œå…¼å®¹DPIã€DBIå’ŒDCS)ç”¨äºè¿æ¥æ¶²æ™¶å±ï¼Œä¸¤ä¸ªMIPI  CSIæ¥å£(MIPI-CSIæ˜¯ä¸€ç§åº”ç”¨äºæ‘„åƒå¤´çš„ä¸²è¡Œæ¥å£)ç”¨äºè¿æ¥æ‘„åƒå¤´ã€‚æ¥å£ç±»å‹ä¸°å¯Œä¸”å…¨ï¼Œå”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯USBæ¥å£å¤ªå°‘äº†ï¼Œå¦‚æœUSBè®¾å¤‡å¤šä¸€ç‚¹å°±å®Œå…¨ä¸å¤Ÿç”¨äº†ï¼Œéœ€è¦é¢å¤–æ¥æ‰©å±•åæ¥ä½¿ç”¨ã€‚</p></li></ol><img src="https://image.mgodmonkey.cn/file/af0a8b2e91ab900789a42.png" style="zoom:80%;" /><ol start="3"><li>èƒŒé¢æ¥å£ä¸€è§ˆå›¾å¦‚ä¸‹ï¼ŒèƒŒé¢ä¸»è¦æ˜¯ä¸€äº›å‚¨å­˜è®¾å¤‡æ¥å£ï¼Œå¸¸ç”¨çš„TFå¡æ§½ï¼Œæ”¯æŒ2280è§„æ ¼NVMe SSDçš„PCle3.0 M2æ¥å£(æ‰‹å†Œè¯´ç›®å‰åªæ”¯æŒä¸‰æ˜Ÿçš„SSDå›ºæ€ï¼Œå…¶ä½™å›ºæ€æ”¯æŒéœ€è¦åç»­ç‰ˆæœ¬æ›´æ–°)å’ŒeMMCæ¥å£(eMMCå‚¨å­˜æ¨¡å—å¯ä»¥åœ¨é¦™æ©™æ´¾çš„æ·˜å®åº—ä¸­è´­ä¹°ï¼š<a href="https://item.taobao.com/item.htm?abbucket=20&amp;id=726393710516&amp;ns=1&amp;priceTId=2147809317164340588936115ea1d4&amp;spm=a21n57.1.item.5.6fc5523caHNAab">è´­ä¹°é“¾æ¥</a>)</li></ol><p><img src="https://image.mgodmonkey.cn/file/17ad582a479ab58d4ff20.png" alt="img"></p><h2 id="3-åˆæ­¥ä½¿ç”¨ä¸ç¯å¢ƒé…ç½®">3.åˆæ­¥ä½¿ç”¨ä¸ç¯å¢ƒé…ç½®</h2><h3 id="3-1-é•œåƒçƒ§å½•ä¸è®¾å¤‡å¯åŠ¨">3.1 é•œåƒçƒ§å½•ä¸è®¾å¤‡å¯åŠ¨</h3><ol><li><p>è£…å¤‡ä¸€å¼ <strong>32G</strong>ä»¥ä¸Šçš„TFå¡(TFå¡çš„ä¼ è¾“é€Ÿç‡å¿…é¡»ä¸º<strong>class10</strong>ä»¥ä¸Š)ï¼Œç”¨äºçƒ§å½•ç³»ç»Ÿï¼Œåœ¨<a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-AIpro.html">å®˜æ–¹ä¸‹è½½é¡µé¢</a>ä¸­ä¸‹è½½**<a href="https://www.balena.io/etcher/">çƒ§å½•è½¯ä»¶BalenaEtcher</a>**ï¼Œ<strong>Ubuntu</strong> / <strong>openeuler</strong>é•œåƒ(ç™¾åº¦äº‘ç›˜é™é€Ÿå¯ä»¥ä»æˆ‘çš„<a href="https://pan.quark.cn/s/7f885d318cdf">å¤¸å…‹ç½‘ç›˜</a>ä¸‹è½½ï¼Œæå–ç ï¼šXTw3)ï¼Œç”¨çƒ§å½•è½¯ä»¶å°†é•œåƒçƒ§å½•è¿›å»ç„¶åæ’åˆ°èƒŒé¢TFå¡æ§½å³å¯</p><p><img src="https://s2.loli.net/2024/05/25/54vO7V6fwE3XhSG.png" alt="image-20240525104643353"></p></li><li><p>æ¥ä¸Š<strong>20V PD-65W</strong>ç”µæºï¼Œç”µæºæ¥å£æ˜¯åœ¨è¿œç¦»ç½‘å£æœ€è¾¹ä¸Šçš„Type-cæ¥å£ï¼Œç”¨HDMIçº¿è¿æ¥æ˜¾ç¤ºå±è·ŸHDMI0(é è¿‘USB3.0ä¸€ä¾§çš„HDMIï¼Œå¦‚æœHDMI0æ²¡æ¥ï¼Œåªæ¥HDMI1æ²¡æœ‰æ˜¾ç¤º)ï¼Œè¿æ¥é”®é¼ ï¼Œä¸‹é¢å°±æ˜¯æ¿å­æ’æ»¡å„ç§ç®¡åçš„æ ·å­</p></li></ol><img src="https://s2.loli.net/2024/05/25/vGxbOnlULuSwYCy.png" alt="image-20240525111025569" style="zoom:80%;" /><ol start="3"><li><p>ç»æµ‹è¯•ï¼Œå¾…æœºç”µæµ0.13Aï¼ŒåŠŸç‡2.6Wåœ¨å·¦å³ï¼Œå¯åŠ¨ç”µæµ0.55Aï¼ŒåŠŸç‡11Wï¼Œå¼€æœºè¿è¡Œç”µæµ0.37Aï¼ŒåŠŸç‡7.3Wå·¦å³(å€¼å¾—ä¸€æçš„æ˜¯å¼€æœºé£æ‰‡é»˜è®¤å¯åŠ¨æœ€é«˜é€Ÿï¼Œè¿™ç§æƒ…å†µæˆ‘åªåœ¨æœåŠ¡å™¨ä¸»æœºä¸Šè§è¿‡ï¼Œï¼Œï¼Œ)</p><img src="https://s2.loli.net/2024/05/25/Yw2HWXGpZCS4m9a.png" alt="image-20240525173851777" style="zoom: 67%;" /></li><li><p>å¦‚æœæ’ç”µæ²¡æœ‰è‡ªå¯ï¼ŒæŒ‰ä¸€ä¸‹Reseté”®(ç›¸å½“äºå¼€æœºé”®)ï¼Œå¦‚æœå¼€æœºé»‘å±ï¼Œæ£€æŸ¥ä¸€ä¸‹å¯åŠ¨æ¨¡å¼æ˜¯å¦ä¸ºTFå¡å¯åŠ¨ï¼Œæ£€æŸ¥èƒŒé¢çš„ä¸¤ä¸ªæ‹¨åŠ¨å¼€å…³çš„ä½ç½®ï¼Œ<strong>é¦™æ©™æ´¾AIpro</strong>æ”¯æŒä¸‰ç§å¯åŠ¨è®¾å¤‡è¿›è¡Œå¯åŠ¨ï¼Œå…¶ä½™ä¸¤ç§å¯åŠ¨è®¾å¤‡å¯åŠ¨æ–¹å¼è‡ªè¡ŒæŸ¥çœ‹ç”¨æˆ·æ‰‹å†Œ</p><table><thead><tr><th style="text-align:center">æ‹¨åŠ¨å¼€å…³BOOT1</th><th style="text-align:center">æ‹¨åŠ¨å¼€å…³BOOT2</th><th style="text-align:center">å¯¹åº”å¯åŠ¨è®¾å¤‡</th></tr></thead><tbody><tr><td style="text-align:center">å·¦</td><td style="text-align:center">å·¦</td><td style="text-align:center">æœªä½¿ç”¨</td></tr><tr><td style="text-align:center">å³</td><td style="text-align:center">å·¦</td><td style="text-align:center">STAT SSDå’ŒNVMe SSD</td></tr><tr><td style="text-align:center">å·¦</td><td style="text-align:center">å³</td><td style="text-align:center">eMMC</td></tr><tr><td style="text-align:center">å³</td><td style="text-align:center">å³</td><td style="text-align:center">TFå¡</td></tr></tbody></table></li></ol><h3 id="3-2-å¼€æœºä¸‰éƒ¨æ›²">3.2 å¼€æœºä¸‰éƒ¨æ›²</h3><ol><li><p>å¼€å±é»˜è®¤ç”¨æˆ·åä¸º<code>HwHiAiUser</code>ï¼Œå¯†ç ä¸º<code>Mind@123</code>ï¼Œå¼€æœºç¬¬ä¸€ä»¶äº‹å°±æ˜¯ä¿®æ”¹å¯†ç </p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root <span class="comment"># rooté»˜è®¤å¯†ç ä¹Ÿæ˜¯Mind@123</span></span><br><span class="line">sudo passwd HwHiAiUser</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒä»¶äº‹å°±æ˜¯æŸ¥çœ‹ç³»ç»Ÿå†…æ ¸å’ŒCPUæ¶æ„ï¼Œæ–¹ä¾¿åç»­å®‰è£…è½¯ä»¶æ—¶åšå‚è€ƒï¼ˆlinuxå†…æ ¸ä¸º<strong>5.10.0</strong>,ç³»ç»Ÿæ¶æ„ä¸º<strong>aarch64</strong>ï¼Œè½¯ä»¶ä¸‹è½½<strong>ARM64 / ARMv8 / aarch64</strong>ç‰ˆæœ¬å³å¯ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">(base) HwHiAiUser@orangepiaipro:~/Desktop$ <span class="built_in">uname</span> -a</span><br><span class="line">Linux orangepiaipro 5.10.0+ <span class="comment">#1 SMP Mon Feb 26 15:29:07 CST 2024 aarch64 aarch64 aarch64 GNU/Linux</span></span><br><span class="line">(base) HwHiAiUser@orangepiaipro:~/Desktop$ lscpu</span><br><span class="line">Architecture:          aarch64</span><br><span class="line">  CPU op-mode(s):      64-bit</span><br><span class="line">  Byte Order:          Little Endian</span><br><span class="line">CPU(s):                4</span><br><span class="line">  On-line CPU(s) list: 0-3</span><br><span class="line">Vendor ID:             0x00</span><br><span class="line">  Model:               2</span><br><span class="line">  Thread(s) per core:  1</span><br><span class="line">  Core(s) per cluster: 4</span><br><span class="line">  Socket(s):           -</span><br><span class="line">  Cluster(s):          1</span><br><span class="line">  Stepping:            0x1</span><br><span class="line">  BogoMIPS:            96.00</span><br><span class="line">  Flags:               fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp a</span><br><span class="line">                       simdhp cpuid asimdrdm jscvt fcma dcpop sha3 asimddp sha51</span><br><span class="line">                       2 sve asimdfhm ssbs sb</span><br><span class="line">NUMA:                  </span><br><span class="line">  NUMA node(s):        3</span><br><span class="line">  NUMA node0 CPU(s):   0-3</span><br><span class="line">  NUMA node1 CPU(s):   </span><br><span class="line">  NUMA node2 CPU(s):   </span><br><span class="line">Vulnerabilities:       </span><br><span class="line">  Itlb multihit:       Not affected</span><br><span class="line">  L1tf:                Not affected</span><br><span class="line">  Mds:                 Not affected</span><br><span class="line">  Meltdown:            Not affected</span><br><span class="line">  Mmio stale data:     Not affected</span><br><span class="line">  Retbleed:            Not affected</span><br><span class="line">  Spec store bypass:   Mitigation; Speculative Store Bypass disabled via prctl</span><br><span class="line">  Spectre v1:          Mitigation; __user pointer sanitization</span><br><span class="line">  Spectre v2:          Not affected</span><br><span class="line">  Srbds:               Not affected</span><br><span class="line">  Tsx async abort:     Not affected</span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ä»¶äº‹è‡ªç„¶æ˜¯å®‰è£…<strong>nomachine</strong>å’Œ<strong>ssh</strong>äº†ï¼Œè¿™æ ·å°±å¯ä»¥å®Œå…¨æ‘†è„±é”®é¼ å’Œæ˜¾ç¤ºå±ç‹¬ç«‹ä½¿ç”¨äº†ã€‚æ¨èä¼˜å…ˆå®‰è£…<strong>nomachine</strong>ï¼Œå› ä¸º<strong>nomachine</strong>ä¼šè‡ªåŠ¨æ‰«æå±€åŸŸç½‘å†…çš„è®¾å¤‡ï¼Œè¿™æ ·å°±å¯ä»¥çŸ¥é“<strong>é¦™æ©™æ´¾Aipro</strong>çš„IPåœ°å€äº†</p><ol><li><p>Windowsä¸Šå®‰è£…Windowsç‰ˆæœ¬çš„<strong>nomachine</strong>(ä¸‹è½½é“¾æ¥ï¼š<a href="https://downloads.nomachine.com/windows/?id=3">å‰å¾€</a>)ï¼Œä¸‹è½½å®ŒæˆåŒå‡»å®‰è£…å³å¯</p></li><li><p>é¦™æ©™æ´¾Aiproä¸Šå®‰è£…<strong>ARMv8</strong>ç‰ˆæœ¬<strong>debåŒ…</strong>çš„<strong>nomachine</strong>(ä¸‹è½½é“¾æ¥: <a href="https://downloads.nomachine.com/download/?id=118&amp;distro=ARM">å‰å¾€</a>)ï¼Œä¸‹è½½å®Œæˆé€šè¿‡ä¸‹é¢çš„æŒ‡ä»¤å®‰è£…å³å¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dpkg -i nomachine_8.xxx_arm64.deb<span class="comment"># æ ¹æ®è‡ªå·±ä¸‹è½½çš„æ–‡ä»¶åç§°å’Œè·¯å¾„è¿›è¡Œå®‰è£…</span></span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…å¹¶å¯åŠ¨åï¼Œåœ¨Windowsçš„nomachineä¸Šå³å¯çœ‹åˆ°é¦™æ©™æ´¾Aiproè®¾å¤‡ï¼Œè¿™æ—¶å°±å¯ä»¥å®Œå…¨æ‘†è„±æ˜¾ç¤ºå±å’Œé”®é¼ äº†</p><img src="https://s2.loli.net/2024/05/25/SZA6lkoMJfGs82P.png" alt="image-20240525182858207" style="zoom:67%;" /></li><li><p>åŒå‡»è¿æ¥<strong>é¦™æ©™æ´¾Aipro</strong>ï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç </p><blockquote><p>æ³¨ï¼šå¦‚æœå‡ºç°é»‘å±æˆ–è€…æ— æ³•æ§åˆ¶çš„æƒ…å†µï¼Œå¯ä»¥å…ˆè¯•è¯•è¿æ¥æ˜¾ç¤ºå±åèƒ½å¦æ­£å¸¸ä½¿ç”¨ï¼Œå¦‚æœèƒ½å¯ä»¥åœ¨æ·˜å®ä¹°ä¸ªHDMIè¯±éª—å™¨æ¥ä½¿ç”¨</p></blockquote><img src="https://s2.loli.net/2024/05/25/6WpQK89ZseGVtDM.png" alt="image-20240525183103552" style="zoom:67%;" /></li><li><p>è®¾ç½®é¦™æ©™æ´¾å¼€æœºè‡ªåŠ¨è§£é”å±å¹•è¿›å…¥æ¡Œé¢ï¼ˆå¦‚æœä¸åšè¿™ä¸€æ­¥ï¼Œå°±æ¯æ¬¡éƒ½éœ€è¦è¿æ¥æ˜¾ç¤ºå±ç™»å½•ç”¨æˆ·åæ‰èƒ½ä½¿ç”¨nomachineè¿›è¡Œæ§åˆ¶ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/lightdm/lightdm.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨`[Seat:*]`éƒ¨åˆ†æ·»åŠ ä»¥ä¸‹è¡Œï¼Œç„¶åä¿å­˜é€€å‡º</span></span><br><span class="line">autologin-user=HwHiAiUser</span><br><span class="line">autologin-user-timeout=0</span><br><span class="line"></span><br><span class="line">sudo visudo</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æœ«å°¾ä¿®æ”¹æˆå¦‚ä¸‹ï¼Œè¿™æ ·ä½ çš„é¦™æ©™æ´¾å°±èƒ½å¼€æœºè‡ªåŠ¨ç™»å½•è¿›å…¥æ¡Œé¢äº†</span></span><br><span class="line">HwHiAiUser ALL=(ALL) NOPASSWD: ALL</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…sshå¹¶é€šè¿‡<strong>mobaxterm</strong><a href="https://mobaxterm.mobatek.net/">ã€ä¸‹è½½åœ°å€ã€‘</a>è¿›è¡Œè¿æ¥ï¼Œé€šè¿‡<code>sudo apt install openssh-server</code>æ¥å®‰è£…sshæœåŠ¡ï¼Œé€šè¿‡<strong>nomachine</strong>å³é”®é¦™æ©™æ´¾Aipro-&gt;<strong>Connection info</strong>æ¥æŸ¥çœ‹é¦™æ©™æ´¾Aiproçš„è®¾å¤‡IPï¼Œé˜²æ­¢æ¯æ¬¡IPä¸ä¸€æ ·çš„é—®é¢˜</p><img src="https://s2.loli.net/2024/05/25/SDPxueBrHUaqblG.png" alt="image-20240525184559052" style="zoom: 67%;" /><img src="https://s2.loli.net/2024/05/25/9wqr8TVSWpBkxOo.png" alt="image-20240525185803890" style="zoom: 80%;" /></li></ol></li></ol><h3 id="3-3-å¸¸ç”¨çš„ç¼–ç¨‹ç¯å¢ƒ">3.3 å¸¸ç”¨çš„ç¼–ç¨‹ç¯å¢ƒ</h3><blockquote><p>ç»è¿‡æµ‹è¯•ï¼Œå‘ç°å®˜æ–¹çš„é•œåƒå·²ç»é»˜è®¤å®‰è£…äº†pythonï¼Œc/c++ç¯å¢ƒï¼Œå¹¶ä¸”aptè½¯ä»¶æºå·²ç»æ¢æˆäº†åä¸ºé•œåƒæºï¼Œçœå»äº†å¾ˆå¤šéº»çƒ¦ï¼Œè¿™ç‚¹å¥½è¯„</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(base) HwHiAiUser@orangepiaipro:~$ gcc --version</span><br><span class="line">gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0</span><br><span class="line"></span><br><span class="line">(base) HwHiAiUser@orangepiaipro:~$ g++ --version</span><br><span class="line">g++ (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0</span><br><span class="line"></span><br><span class="line">(base) HwHiAiUser@orangepiaipro:~$ make --version</span><br><span class="line">GNU Make 4.3</span><br><span class="line"></span><br><span class="line">(base) HwHiAiUser@orangepiaipro:~$ python --version</span><br><span class="line">Python 3.9.2</span><br><span class="line"></span><br><span class="line">(base) HwHiAiUser@orangepiaipro:~$ <span class="built_in">which</span> python</span><br><span class="line">/usr/local/miniconda3/bin/python</span><br></pre></td></tr></table></figure><p><strong>ROSç¯å¢ƒå®‰è£…ï¼š</strong></p><blockquote><p>å› ä¸ºæˆ‘ç›®å‰å­¦ä¹ çš„æ˜¯è‡ªä¸»ç©ºä¸­æœºå™¨äººç›¸å…³çš„çŸ¥è¯†ï¼Œå› æ­¤æ„Ÿè§‰è¿™ç§å°å‹ä¸»æœºæ›´é€‚åˆåº”ç”¨åœ¨æ™ºèƒ½è½¦ï¼Œæ— äººæœºä¸Šï¼Œæ‰€ä»¥å°±éœ€è¦å®‰è£…<strong>ROSç¯å¢ƒ</strong>ï¼ŒUbuntu22.04ç‰ˆæœ¬ç›®å‰åªæ”¯æŒå®‰è£…<strong>ROS2</strong>ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œ**ROSç¯å¢ƒå®‰è£…&gt; **æ¨èå‚è€ƒæˆ‘çš„åšå®¢ç½‘ç«™è¿›è¡Œä¸€é”®å®‰è£…ï¼š<a href="https://www.mgodmonkey.cn/posts/232d6cf1.html">ROSèµ„æºæ±‡æ€»-MGodmonkeyçš„ä¸–ç•Œ</a></p></blockquote><h2 id="4-æ¡ˆä¾‹æµ‹è¯•">4.æ¡ˆä¾‹æµ‹è¯•</h2><h3 id="4-1-ROS2-PyQtå°æµ·é¾Ÿæ§åˆ¶">4.1 ROS2-PyQtå°æµ·é¾Ÿæ§åˆ¶</h3><blockquote><p>è¿™æ˜¯å½“åˆæˆ‘å…¥é—¨å­¦ä¹ ROSç»“åˆPyQtæ­å»ºå¯è§†åŒ–ç•Œé¢å†™çš„ä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‰å¾€ï¼š<a href="https://www.mgodmonkey.cn/posts/37a8d87e.html">ã€ROS2-PyQtå°æ¡ˆä¾‹ã€‘</a>è¿›è¡Œå¤åˆ»</p></blockquote><h4 id="ç¯å¢ƒ">ç¯å¢ƒ:</h4><ul><li>ROS2ï¼šfoxy</li><li>pythonï¼š3.8.10</li><li>PyQtï¼š5.10.12</li></ul><h4 id="1-åˆè¯•åŒ–å·¥ä½œç©ºé—´">1. åˆè¯•åŒ–å·¥ä½œç©ºé—´</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/dev_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/dev_ws/src</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/MGod-monkey/ros2_pyqt_turtlesim_key.git</span><br></pre></td></tr></table></figure><h4 id="2-ç¼–è¯‘ä¸è¿è¡Œ">2. ç¼–è¯‘ä¸è¿è¡Œ</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/dev_ws</span><br><span class="line">colcon build</span><br><span class="line"><span class="built_in">source</span> install/setup.sh</span><br><span class="line">ros2 run ros2_pyqt_turtlesim_key ros2_pyqt_turtlesim_key</span><br></pre></td></tr></table></figure><h4 id="3-å…¶ä»–">3.å…¶ä»–</h4><p>æ‚¨å¯ä»¥é€šè¿‡<strong>Qt designer</strong>æ‰“å¼€ â€˜ros2_pyqt_turtlesim_key/key.uiâ€™ æ–‡ä»¶æ¥ç¼–è¾‘å›¾å½¢ç•Œé¢ï¼Œå¹¶é€šè¿‡ä»¥ä¸‹å‘½ä»¤å°† â€˜.uiâ€™ æ–‡ä»¶è½¬æ¢ä¸ºpythonæ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyuic5 -o key_ui.py key.ui</span><br></pre></td></tr></table></figure><p><strong>åœ¨é¦™æ©™æ´¾Aiproä¸Šè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼Œè¿˜æ˜¯å¾ˆæµç•…çš„</strong></p><img src="https://s2.loli.net/2024/05/28/YpNbTB9rOjVFwqU.gif" alt="gif1" style="zoom:67%;" /><h3 id="4-1-å›¾åƒç‰¹å¾åŒ¹é…">4.1 å›¾åƒç‰¹å¾åŒ¹é…</h3><blockquote><p>å› ä¸ºä¹‹å‰å®åœ¨æ²¡æœ‰è·‘è¿‡ä»€ä¹ˆAIç›¸å…³çš„æ¡ˆä¾‹ï¼Œå¼€å‘æ¿ä¹Ÿç©çš„å°‘ï¼Œåªèƒ½å…ˆè·‘æˆ‘æœ¬ç§‘æ¯•è®¾æ—¶å€™åšçš„å›¾åƒç‰¹å¾åŒ¹é…æ¡ˆä¾‹æ¥è¯•è¯•æ°´äº†(å°å°æä¸€å˜´ï¼Œæˆ‘è¿™æ¯•è®¾æ‹¿äº†æ ¡ä¼˜äºŒç­‰hh)ï¼Œæ„Ÿå…´è¶£çš„åŒæ ·å¯ä»¥å‰å¾€ï¼š<a href="https://github.com/MGod-monkey/FeatureMatchToolbox.git">ã€https://github.com/MGod-monkey/FeatureMatchToolbox.gitã€‘</a>è¿›è¡Œå¤åˆ»</p></blockquote><ol><li><p><strong>è½¯ä»¶åœ¨é¦™æ©™æ´¾Aiproä¸Šè¿è¡Œç‰¹å¾åŒ¹é…ç®—æ³•çš„æ•ˆæœ</strong></p><p><img src="https://s2.loli.net/2024/05/28/kN3YzJLGudxE1RB.gif" alt="gif4"></p></li><li><p><strong>å„ç‰¹å¾åŒ¹é…ç®—æ³•åœ¨é¦™æ©™æ´¾Aiproä¸Šè¿è¡Œçš„è€—æ—¶å’Œæ•ˆæœå›¾å¦‚ä¸‹ï¼Œæ€»ä½“æ¥è¯´æ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„</strong></p></li></ol><p><img src="https://s2.loli.net/2024/05/28/qNbVvilFGjSoRsh.png" alt="image-20240528195531214"></p><p>3.<strong>è¿è¡ŒSuperGuleç®—æ³•è¿›è¡Œå®æ—¶çš„åŒ¹é…</strong></p><blockquote><p>å®é™…è¿è¡Œä¸‹æ¥ï¼Œåœ¨å¤„ç†640x480å›¾åƒæ—¶æœ‰13fpså·¦å³ï¼Œè¿™æ•ˆæœå·²ç»è¿œè¿œè¶…å‡ºäº†æˆ‘åŸæœ¬çš„é¢„æœŸäº†ï¼Œä¿—è¯è¯´1å¸§èƒ½ç©ï¼Œ2å¸§æµç•…ï¼Œ3å¸§ç”µç«ï¼Œï¼Œï¼Œ</p></blockquote><p><img src="https://s2.loli.net/2024/05/29/YVpIxSjOiEMzHTs.gif" alt="gif6.gif"></p><h2 id="æœ€å">æœ€å</h2><p>â€‹    éå¸¸æ„Ÿè°¢é¦™æ©™æ´¾å®˜æ–¹å¯¹æœ¬æ¬¡æµ‹è¯„çš„å¤§åŠ›èµ„åŠ©ï¼Œè¯´å®è¯å½“åˆå®˜æ–¹æ‰¾åˆ°æˆ‘çš„æ—¶å€™æˆ‘çš„éå¸¸éœ‡æƒŠçš„ï¼Œå› ä¸ºæˆ‘æœ¬èº«å¹¶ä¸æ˜¯ä¸“ä¸šçš„æµ‹è¯„åšä¸»ï¼Œåªæ˜¯å–œæ¬¢åœ¨è®ºå›ä¸Šåˆ†äº«å­¦ä¹ ç»éªŒå’ŒçŸ¥è¯†çš„å°ç™½ç™½ï¼Œå› æ­¤å†æ¬¡æ„Ÿè°¢é¦™æ©™æ´¾å®˜æ–¹å¯¹æˆ‘ä¿¡ä»» ï¼Œå‰æ®µæ—¶é—´çœ‹åˆ°æ ‘è“æ´¾5Bå‘å¸ƒï¼Œå››è·¯ Arm Cortex-A76 @ 2.4GHzï¼Œ512KBäºŒçº§ç¼“å­˜ï¼Œ2MB L3 é«˜é€Ÿç¼“å­˜ï¼ŒåŒ 4kp60 HDMI æ˜¾ç¤ºè¾“å‡ºï¼Œï¼Œï¼Œï¼Œå¿ƒé‡Œæ˜¯ç‹ ç‹ æ‚¸åŠ¨äº†ä¸€ä¸‹ï¼Œä½†çœ‹åˆ°ç°åœ¨å›½äº§æ´¾ä¹Ÿåœ¨æ…¢æ…¢ä¸Šèµ¶ï¼Œå¿ƒé‡Œä¹Ÿæ˜¯éå¸¸å–œæ‚¦çš„ï¼ˆè™½ç„¶æœ¬æ¬¡çš„é¦™æ©™æ´¾å’Œåä¸ºåˆä½œç ”å‘çš„é¦™æ©™æ´¾Aiproè·Ÿæ ‘è“æ´¾ä¸æ˜¯ä¸€ä¸ªèµ›é“çš„ï¼‰</p><p>å¸Œæœ›æœ¬æ¬¡é¦™æ©™æ´¾Aiproå…¥é—¨åšå®¢åˆ†äº«èƒ½ç»™æ­£åœ¨å…¥é—¨é¦™æ©™æ´¾çš„çœ‹å®¢ä¸€ä¸ªç»éªŒåˆ†äº«ï¼Œå¸Œæœ›é¦™æ©™æ´¾çš„ç”Ÿæ€è¶Šæ¥è¶Šå¥½ï¼Œé¦™æ©™æ´¾ğŸ®<strong>b</strong>ï¼Œåä¸ºğŸ®<strong>b</strong></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;é¦™æ©™æ´¾AIproåˆä½“éªŒ&lt;/h1&gt;
&lt;img src=&quot;http://www.orangepi.cn/img/aipro/aipro-1.png&quot; style=&quot;zoom:60%;&quot; /&gt;
&lt;h2 id=&quot;1-å¼€å‘æ¿èµ„æ–™&quot;&gt;1.å¼€å‘æ¿èµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;st</summary>
      
    
    
    
    <category term="æµ‹è¯„" scheme="https://www.mgodmonkey.cn/categories/%E6%B5%8B%E8%AF%84/"/>
    
    <category term="é¦™æ©™æ´¾" scheme="https://www.mgodmonkey.cn/categories/%E6%B5%8B%E8%AF%84/%E9%A6%99%E6%A9%99%E6%B4%BE/"/>
    
    
    <category term="æµ‹è¯„" scheme="https://www.mgodmonkey.cn/tags/%E6%B5%8B%E8%AF%84/"/>
    
  </entry>
  
  <entry>
    <title>CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼šåŠ¨æ€ç›®æ ‡æ£€æµ‹ä¸è·Ÿè¸ª</title>
    <link href="https://www.mgodmonkey.cn/posts/2c607ad2.html"/>
    <id>https://www.mgodmonkey.cn/posts/2c607ad2.html</id>
    <published>2024-04-09T06:22:14.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><em><strong>*æè¿°*</strong></em>ï¼šæ¬¢è¿æ¥åˆ°CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè‡ªä¸»æ— äººé£è¡Œå™¨ (UAV) çš„å¤šåŠŸèƒ½æ¨¡å—åŒ–æ¡†æ¶ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬ä¸åŒçš„ç»„ä»¶ (æ¨¡æ‹Ÿå™¨ï¼Œæ„ŸçŸ¥ï¼Œæ˜ å°„ï¼Œè§„åˆ’å’Œæ§åˆ¶)ï¼Œä»¥å®ç°è‡ªä¸»å¯¼èˆªï¼ŒæœªçŸ¥æ¢ç´¢å’Œç›®æ ‡æ£€æŸ¥ã€‚</p><p><em><strong>*è§†é¢‘æ¼”ç¤º*</strong></em>: <a href="https://youtu.be/sWTQ4cnQCIE?si=809MQPjWSI2Bq4rj">YouTube</a>, <a href="https://www.bilibili.com/video/BV1KN4y1i7FV/?share_source=copy_web&amp;vd_source=1333db331406abb1b5d4cece1e253427&amp;t=0">BiliBili</a></p></blockquote><h2 id="1-è®ºæ–‡è§£æ">1. è®ºæ–‡è§£æ</h2><div class="row">    <embed src="https://mybog.s3.bitiful.net/ros/word/Onboard_Dynamic-Object_Detection_and_Tracking_for_Autonomous_Robot_Navigation_With_RGB-D_Camera.pdf" width="100%" height="550" type="application/pdf"></div><div class="note info flat"><p>ç›¸å…³è®ºæ–‡ï¼š<a class="btn-anzhiyu " href="https://mybog.s3.bitiful.net/ros/word/Perception_and_Avoidance_of_Multiple_Small_Fast_Moving_Objects_for_Quadrotors_With_Only_Low-Cost_RGBD_Camera.pdf"   title="å‰å¾€ä¸‹è½½"><i class="anzhiyufont anzhiyu-icon-circle-arrow-right"></i><span>å‰å¾€ä¸‹è½½</span></a></p><p>è®ºæ–‡ä»£ç ï¼š<a href="https://github.com/Zhefan-Xu/onboard_detector">https://github.com/Zhefan-Xu/onboard_detector</a></p></div><blockquote><h3 id="Chatpaper">Chatpaper</h3><h4 id="Basic-Information">Basic Information:</h4><ul><li>Title: Onboard Dynamic-Object Detection and Tracking for Autonomous Robot Navigation With RGB-D Camera (åŸºäºRGB-Dç›¸æœºçš„æœºè½½åŠ¨æ€ç‰©ä½“æ£€æµ‹å’Œè·Ÿè¸ªç”¨äºè‡ªä¸»æœºå™¨äººå¯¼èˆª)</li><li>Authors: Zhefan Xu, Xiaoyang Zhan, Yumeng Xiu, Christopher Suzuki, Kenji Shimada</li><li>Affiliation: Department of Mechanical Engineering, Carnegie Mellon University, Pittsburgh, PA 15213 USA (ç¾å›½å¡å†…åŸºæ¢…éš†å¤§å­¦æœºæ¢°å·¥ç¨‹ç³»)</li><li>Keywords: RGB-D perception, vision-based navigation, visual tracking, 3D object detection, collision avoidance</li><li>URLs: <a href="https://doi.org/10.1109/LRA.2023.3334683">Paper</a>, <a href="https://github.com/Zhefan-Xu/onboard_detector">GitHub</a></li></ul><h4 id="è®ºæ–‡ç®€è¦">è®ºæ–‡ç®€è¦ :</h4><ul><li>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºRGB-Dç›¸æœºçš„è½»é‡çº§3DåŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•ï¼Œç”¨äºå…·æœ‰æœ‰é™è®¡ç®—èƒ½åŠ›çš„å°å‹æœºå™¨äººã€‚è¯¥æ–¹æ³•é‡‡ç”¨äº†æ–°é¢–çš„é›†æˆæ£€æµ‹ç­–ç•¥ï¼Œç»“åˆå¤šä¸ªè®¡ç®—æ•ˆç‡é«˜ä½†å‡†ç¡®ç‡è¾ƒä½çš„æ£€æµ‹å™¨ï¼Œå®ç°å®æ—¶é«˜å‡†ç¡®æ€§çš„éšœç¢ç‰©æ£€æµ‹ã€‚æ­¤å¤–ï¼Œè¿˜å¼•å…¥äº†ä¸€ç§åŸºäºç‰¹å¾çš„æ•°æ®å…³è”å’Œè·Ÿè¸ªæ–¹æ³•ï¼Œåˆ©ç”¨ç‚¹äº‘çš„ç»Ÿè®¡ç‰¹å¾æ¥é˜²æ­¢åŒ¹é…é”™è¯¯ã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œè¯¥æ–¹æ³•åœ¨å°å‹å››æ—‹ç¿¼é£è¡Œå™¨ä¸Šå®ç°äº†æœ€ä½çš„ä½ç½®è¯¯å·®å’Œå¯æ¯”è¾ƒçš„é€Ÿåº¦è¯¯å·®ï¼Œè¯æ˜äº†è¯¥æ–¹æ³•åœ¨å¯¼èˆªåŠ¨æ€ç¯å¢ƒä¸­èƒ½å¤Ÿæœ‰æ•ˆæ”¹å˜æœºå™¨äººçš„è½¨è¿¹ã€‚</li></ul><h4 id="èƒŒæ™¯ä¿¡æ¯">èƒŒæ™¯ä¿¡æ¯:</h4><ul><li>è®ºæ–‡èƒŒæ™¯: åœ¨æ‹¥æŒ¤çš„å®¤å†…ç¯å¢ƒä¸­éƒ¨ç½²è‡ªä¸»æœºå™¨äººé€šå¸¸éœ€è¦å®ƒä»¬å…·å¤‡å‡†ç¡®çš„åŠ¨æ€éšœç¢ç‰©æ„ŸçŸ¥èƒ½åŠ›ã€‚ç„¶è€Œï¼Œä»¥å¾€åœ¨è‡ªåŠ¨é©¾é©¶é¢†åŸŸçš„è®¸å¤šç ”ç©¶éƒ½æ˜¯é’ˆå¯¹3Dç‰©ä½“æ£€æµ‹é—®é¢˜è¿›è¡Œçš„ï¼Œä½¿ç”¨äº†æ¥è‡ªé‡å‹æ¿€å…‰é›·è¾¾ä¼ æ„Ÿå™¨çš„å¯†é›†ç‚¹äº‘æ•°æ®ï¼Œè€Œè¿™äº›åŸºäºå­¦ä¹ çš„æ•°æ®å¤„ç†æ–¹æ³•çš„é«˜è®¡ç®—æˆæœ¬ä½¿å¾—è¿™äº›æ–¹æ³•ä¸é€‚ç”¨äºå°å‹æœºå™¨äººï¼Œä¾‹å¦‚å…·æœ‰å°å‹æœºè½½è®¡ç®—æœºçš„åŸºäºè§†è§‰çš„æ— äººæœºã€‚å› æ­¤ï¼Œéœ€è¦é’ˆå¯¹è®¡ç®—èƒ½åŠ›æœ‰é™çš„å°å‹æœºå™¨äººå¼€å‘ä¸€ç§è½»é‡çº§çš„åŸºäºRGB-Dç›¸æœºçš„åŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•ã€‚</li><li>è¿‡å»æ–¹æ¡ˆ: ä»¥å¾€çš„æ–¹æ³•ä¸­ï¼Œæœ‰äº›é‡‡ç”¨äº†å•ä¸€çš„æ£€æµ‹å™¨ï¼Œä½†è¿™äº›æ–¹æ³•åœ¨è®¡ç®—æ•ˆç‡å’Œå‡†ç¡®æ€§ä¹‹é—´å­˜åœ¨æƒè¡¡ã€‚å¦ä¸€äº›æ–¹æ³•åˆ™ä½¿ç”¨äº†æ·±åº¦å›¾åƒè¿›è¡Œéšœç¢ç‰©æ£€æµ‹ï¼Œä½†æ·±åº¦ç›¸æœºçš„èŒƒå›´å’Œè§†é‡æœ‰é™ï¼Œä½¿å¾—ä¸€äº›æ–¹æ³•åªèƒ½åœ¨çŸ­è·ç¦»èŒƒå›´å†…è¿›è¡Œéšœç¢ç‰©è·Ÿè¸ªã€‚æ­¤å¤–ï¼Œæ·±åº¦ç›¸æœºçš„å™ªå£°ä¹Ÿä¼šå½±å“æ£€æµ‹ç®—æ³•çš„å‡†ç¡®æ€§å’Œå¯é æ€§ã€‚</li><li>è®ºæ–‡çš„Motivation: é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºRGB-Dç›¸æœºçš„è½»é‡çº§3DåŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•ã€‚è¯¥æ–¹æ³•é‡‡ç”¨äº†å¤šä¸ªè®¡ç®—æ•ˆç‡é«˜ä½†å‡†ç¡®ç‡è¾ƒä½çš„æ£€æµ‹å™¨çš„é›†æˆç­–ç•¥ï¼Œå®ç°äº†å®æ—¶é«˜å‡†ç¡®æ€§çš„éšœç¢ç‰©æ£€æµ‹ã€‚æ­¤å¤–ï¼Œè¿˜å¼•å…¥äº†ä¸€ç§åŸºäºç‰¹å¾çš„æ•°æ®å…³è”å’Œè·Ÿè¸ªæ–¹æ³•ï¼Œåˆ©ç”¨ç‚¹äº‘çš„ç»Ÿè®¡ç‰¹å¾æ¥é˜²æ­¢åŒ¹é…é”™è¯¯ã€‚æœ€åï¼Œè¯¥ç³»ç»Ÿè¿˜å¼•å…¥äº†ä¸€ä¸ªå­¦ä¹ æ¨¡å—ï¼Œç”¨äºå¢å¼ºæ£€æµ‹èŒƒå›´å’ŒåŠ¨æ€éšœç¢ç‰©è¯†åˆ«ã€‚é€šè¿‡åœ¨å°å‹å››æ—‹ç¿¼é£è¡Œå™¨ä¸Šçš„å®éªŒéªŒè¯ï¼Œè¯¥æ–¹æ³•åœ¨æœºå™¨äººçš„æœºè½½è®¡ç®—æœºä¸Šå®ç°äº†æœ€ä½çš„ä½ç½®è¯¯å·®å’Œå¯æ¯”è¾ƒçš„é€Ÿåº¦è¯¯å·®ï¼Œè¯æ˜äº†è¯¥æ–¹æ³•åœ¨å¯¼èˆªåŠ¨æ€ç¯å¢ƒä¸­èƒ½å¤Ÿæœ‰æ•ˆæ”¹å˜æœºå™¨äººçš„è½¨è¿¹ã€‚</li></ul><h4 id="æ–¹æ³•">æ–¹æ³•:</h4><ul><li>a. ç†è®ºèƒŒæ™¯:<ul><li>ä»‹ç»äº†åœ¨æ‹¥æŒ¤çš„å®¤å†…ç¯å¢ƒä¸­ï¼Œè‡ªä¸»æœºå™¨äººéœ€è¦å‡†ç¡®çš„åŠ¨æ€éšœç¢ç‰©æ„ŸçŸ¥çš„éœ€æ±‚ï¼Œä»¥åŠä½¿ç”¨è½»é‡çº§3DåŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•çš„æŠ€æœ¯è·¯çº¿ã€‚</li></ul></li><li>b. æŠ€æœ¯è·¯çº¿:<ul><li>æå‡ºäº†åŸºäºRGB-Dç›¸æœºçš„è½»é‡çº§3DåŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•ï¼Œåˆ©ç”¨é›†æˆæ£€æµ‹ç­–ç•¥å’ŒåŸºäºç‰¹å¾çš„æ•°æ®å…³è”å’Œè·Ÿè¸ªæ–¹æ³•å®ç°å®æ—¶é«˜ç²¾åº¦éšœç¢ç‰©æ£€æµ‹ã€‚</li></ul></li></ul><h4 id="ç»“æœ">ç»“æœ:</h4><ul><li>a. è¯¦ç»†çš„å®éªŒè®¾ç½®:<ul><li>åœ¨åŠ¨æ€ç¯å¢ƒä¸­ä½¿ç”¨ä¸¤å°å®šåˆ¶çš„å››è½´é£è¡Œå™¨è¿›è¡Œå®éªŒï¼Œæ­è½½Intel NUCå’ŒNVIDIA Jetson Xavier NXåµŒå…¥å¼è®¡ç®—æœºï¼Œç®—æ³•åœ¨é£è¡Œå™¨çš„åµŒå…¥å¼è®¡ç®—æœºä¸Šå®æ—¶è¿è¡Œã€‚</li></ul></li><li>b. è¯¦ç»†çš„å®éªŒç»“æœ:<ul><li>DODTæ–¹æ³•åœ¨åŸºå‡†ç®—æ³•ä¸­è¡¨ç°å‡ºæœ€ä½çš„ä½ç½®è¯¯å·®å’Œç¬¬äºŒä½çš„é€Ÿåº¦è¯¯å·®ï¼Œé›†æˆæ£€æµ‹é™ä½äº†è¯¯æŠ¥ç‡å¹¶æé«˜äº†éšœç¢ç‰©ä½ç½®å’Œé€Ÿåº¦ä¼°è®¡çš„å‡†ç¡®æ€§ã€‚å­¦ä¹ æ¨¡å—å¢å¼ºäº†æ£€æµ‹èŒƒå›´ã€‚å®éªŒç»“æœæ˜¾ç¤ºç®—æ³•åœ¨Intel NUCå’ŒXavier NXå¹³å°ä¸Šå®ç°äº†å®æ—¶æ€§èƒ½ï¼ŒYOLO-MADæ£€æµ‹å™¨å ç”¨äº†å¤§éƒ¨åˆ†å¤„ç†æ—¶é—´ã€‚ç‰©ç†å®éªŒå±•ç¤ºäº†æˆåŠŸæ£€æµ‹å’Œè·Ÿè¸ªåŠ¨æ€éšœç¢ç‰©åœ¨æœºå™¨äººå¯¼èˆªä»»åŠ¡ä¸­çš„åº”ç”¨ã€‚</li></ul></li></ul></blockquote><h3 id="1-1-é—®é¢˜æ±‡æ€»">1.1 é—®é¢˜æ±‡æ€»</h3><ol><li><p>å…³äºå›¾2çš„ç³»ç»Ÿæ¡†æ¶ï¼š</p><ul><li>ç³»ç»Ÿæ¡†æ¶åŒ…æ‹¬ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šæ£€æµ‹æ¨¡å—ã€è·Ÿè¸ªæ¨¡å—å’Œè¯†åˆ«æ¨¡å—ã€‚</li><li>æ£€æµ‹æ¨¡å—ç”±éå­¦ä¹ å’Œå­¦ä¹ ä¸¤éƒ¨åˆ†ç»„æˆï¼Œéå­¦ä¹ éƒ¨åˆ†åˆ©ç”¨æ·±åº¦å›¾åƒå’Œä¸¤ä¸ªéå­¦ä¹ æ£€æµ‹å™¨è¿›è¡Œé€šç”¨éšœç¢ç‰©æ£€æµ‹ã€‚</li><li>å­¦ä¹ æ¨¡å—ä½¿ç”¨å¯¹é½çš„RGB-Då›¾åƒè¿›è¡Œç›´æ¥åŠ¨æ€éšœç¢ç‰©æ£€æµ‹ï¼Œç»“æœä¸éå­¦ä¹ æ¨¡å—ç»“åˆã€‚</li><li>è·Ÿè¸ªæ¨¡å—ä½¿ç”¨ç²¾ç»†åŒ–çš„3Dè¾¹ç•Œæ¡†æ¥ä¼°è®¡éšœç¢ç‰©çŠ¶æ€ã€‚</li><li>è¯†åˆ«æ¨¡å—æ ¹æ®çŠ¶æ€å’Œè·Ÿè¸ªå†å²å°†éšœç¢ç‰©åˆ†ç±»ä¸ºé™æ€æˆ–åŠ¨æ€ã€‚</li><li>ç³»ç»Ÿè¾“å‡ºåŠ¨æ€éšœç¢ç‰©è¾¹ç•Œæ¡†ï¼Œå¹¶åœ¨é™æ€åœ°å›¾ä¸­æ¸…é™¤åŠ¨æ€éšœç¢ç‰©åŒºåŸŸä»¥è¿›è¡Œå¯¼èˆªã€‚ Pages: [â€œa. system overviewâ€, â€œd. data association and trackingâ€, â€œe. dynamic obstacle identificationâ€]</li></ul></li><li><p>å…³äºU-depthæ£€æµ‹å™¨å’ŒDBSCANæ£€æµ‹å™¨çš„å®šä¹‰ï¼Œæ–¹æ³•å’Œä½œç”¨:</p><ul><li><p><strong>U-depthæ£€æµ‹å™¨</strong>ï¼š</p><ul><li>å®šä¹‰ï¼šU-depthæ£€æµ‹å™¨æ˜¯ä¸€ç§åŸºäºæ·±åº¦å›¾åƒçš„æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹å’Œè·Ÿè¸ªåŠ¨æ€éšœç¢ç‰©ã€‚å®ƒé€šè¿‡ç”ŸæˆU-depthå›¾å’ŒV-depthå›¾ï¼Œç»“åˆæ·±åº¦ä¿¡æ¯æ¥ä¼°è®¡éšœç¢ç‰©çŠ¶æ€ï¼Œå®ç°å¯¹é™æ€éšœç¢ç‰©çš„å®‰å…¨å¯¼èˆªã€‚</li><li>æ–¹æ³•ï¼šåˆ©ç”¨æ·±åº¦å›¾åƒç”ŸæˆU-depthå›¾å’ŒV-depthå›¾ï¼Œé€šè¿‡ä¼°è®¡éšœç¢ç‰©çš„é€Ÿåº¦å’Œç»´åº¦æ¥æ£€æµ‹å’Œè·Ÿè¸ªåŠ¨æ€éšœç¢ç‰©ï¼Œå°†å…¶è¡¨ç¤ºä¸º3Dæ¤­çƒä½“ã€‚é‡‡ç”¨YOLOæ£€æµ‹å™¨æ¥æœ‰æ•ˆé¿å¼€å¿«é€Ÿå’Œå°å‹åŠ¨æ€éšœç¢ç‰©ï¼Œç»“åˆå›¾åƒå·®å¼‚æ¥è¯†åˆ«RGBå›¾åƒä¸­çš„æ‰€æœ‰åŠ¨æ€ç‚¹ã€‚</li><li>ä½œç”¨ï¼šU-depthæ£€æµ‹å™¨çš„ä½œç”¨åœ¨äºæé«˜éšœç¢ç‰©ç»´åº¦ä¼°è®¡çš„å‡†ç¡®æ€§ï¼Œç»“åˆå æ®åœ°å›¾æ¥å¯¼èˆªåŠ¨æ€ç¯å¢ƒï¼Œæœ‰æ•ˆé¿å¼€åŠ¨æ€éšœç¢ç‰©ï¼Œä»è€Œå®ç°æœºå™¨äººçš„å®‰å…¨å¯¼èˆªã€‚</li></ul></li><li><p><strong>DBSCANæ£€æµ‹å™¨</strong>ï¼š</p><ul><li>å®šä¹‰ï¼šDBSCANæ£€æµ‹å™¨æ˜¯ä¸€ç§åŸºäºç‚¹äº‘çš„æ–¹æ³•ï¼Œç›´æ¥åˆ©ç”¨ç‚¹äº‘çš„å‡ ä½•ä¿¡æ¯æ¥æ£€æµ‹3Déšœç¢ç‰©ã€‚å®ƒé€šè¿‡ç‚¹äº‘èšç±»æ–¹æ³•ç»“åˆYOLOæ£€æµ‹å™¨è¿›è¡Œäººä½“æ£€æµ‹ï¼Œæå‡ºä½¿ç”¨ç‚¹äº‘ç‰¹å¾å‘é‡å’Œå¯¹è±¡è·Ÿè¸ªç‚¹æ¥è¯†åˆ«æ­£ç¡®çš„å¯¹è±¡åŒ¹é…å’Œä¼°è®¡å…¶çŠ¶æ€ã€‚<ul><li>æ–¹æ³•ï¼šé‡‡ç”¨ç‚¹äº‘èšç±»æ–¹æ³•ç»“åˆYOLOæ£€æµ‹å™¨è¿›è¡Œå®¤å†…åŠ¨æ€éšœç¢ç‰©é¿è®©ï¼Œåˆ©ç”¨ç‚¹äº‘ç‰¹å¾å‘é‡å’Œå¯¹è±¡è·Ÿè¸ªç‚¹æ¥è¯†åˆ«æ­£ç¡®çš„å¯¹è±¡åŒ¹é…å’Œä¼°è®¡å…¶çŠ¶æ€ã€‚</li><li>ä½œç”¨ï¼šDBSCANæ£€æµ‹å™¨çš„ä½œç”¨åœ¨äºæé«˜éšœç¢ç‰©è·Ÿè¸ªçš„ç¨³å¥æ€§ï¼Œé€šè¿‡ç‚¹äº‘ä¿¡æ¯ç›´æ¥æ£€æµ‹3Déšœç¢ç‰©ï¼Œä»è€Œå®ç°åŠ¨æ€éšœç¢ç‰©çš„é¿è®©å’Œå®‰å…¨å¯¼èˆªã€‚ Pages: [â€œd. data association and trackingâ€, â€œe. dynamic obstacle identificationâ€, â€œb. 3d-obstacle detectorsâ€]</li></ul></li></ul></li></ul></li></ol><h2 id="2-ç¯å¢ƒæ­å»º">2.ç¯å¢ƒæ­å»º</h2><h3 id="2-1-CERLABæ— äººæœºæ¡†æ¶æ­å»º">2.1 CERLABæ— äººæœºæ¡†æ¶æ­å»º</h3><blockquote><p><strong>å‚è€ƒ</strong>ï¼š<a href="https://www.mgodmonkey.cn/posts/349e2e18.html">CERLAB æ— äººæœºè‡ªä¸»æ¡†æ¶ï¼šç¯å¢ƒæ­å»º | MGodmonkey ã®ä¸–ç•Œ</a></p></blockquote><h3 id="2-2-yolo-madç¯å¢ƒå®‰è£…ï¼ˆå¯é€‰ï¼‰">2.2 yolo-madç¯å¢ƒå®‰è£…ï¼ˆå¯é€‰ï¼‰</h3><blockquote><p><strong>è¯´æ˜</strong>ï¼šå¦‚æœç”¨åˆ°<strong>yolo-mad</strong>æ£€æµ‹å™¨ä½œä¸ºè¾…åŠ©ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ•™ç¨‹æ­å»º<strong>yolo-mad</strong>ç¯å¢ƒ</p></blockquote><ul><li>å®‰è£…torch</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™æ˜¯ubuntu20-torch-cpuç‰ˆæœ¬çš„ï¼Œå…¶ä½™ç³»ç»Ÿæˆ–è€…GPUç‰ˆæœ¬çš„å‚è€ƒå®˜ç½‘æ•™ç¨‹</span></span><br><span class="line"><span class="comment"># æœ‰ç¼“å­˜æŒ‡ä»¤ï¼ˆç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å»ºè®®æœ‰ç¼“å­˜ï¼‰</span></span><br><span class="line">pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu</span><br><span class="line"><span class="comment"># æ— ç¼“å­˜æŒ‡ä»¤</span></span><br><span class="line">pip3 install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu --no-cache-dir</span><br></pre></td></tr></table></figure><blockquote><p><strong>å‚è€ƒ</strong>ï¼š<a href="https://pytorch.org/get-started/locally/">Start Locally | PyTorch</a></p><p><strong>é—®é¢˜æ±‡æ€»</strong>ï¼š</p><ol><li><p>ç½‘ç»œè¶…æ—¶ã€urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host=â€˜<a href="http://files.pythonhosted.org">files.pythonhosted.org</a>â€™, port=443): Read timed outã€‘ï¼šä¸‹è½½è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°timeoutçš„æƒ…å†µï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡å¤åˆ¶ä¸Šé¢çš„ç½‘å€ï¼Œé€šè¿‡å„ç§æ–¹æ³•å…ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶åé€šè¿‡<code>pip3 install ~/torch-2.2.2+cpu-cp38-cp38-linux_x86_64.whl torchvision torchaudio --index-url https://download.pytorch.org/whl/cpu</code>ï¼Œå“ªä¸ªè¶…æ—¶ä¸‹è½½å“ªä¸ªåˆ°æœ¬åœ°å®‰è£…ï¼Œæˆ–è€…å¤´é“ä¸€ç›´é‡è¯•ï¼Œè¿Ÿæ—©æœ‰ä¸€æ¬¡æˆåŠŸçš„ğŸ˜‰</p><p><img src="https://s2.loli.net/2024/04/15/Z6vlJuo19Imqzt4.png" alt=""></p></li><li><p>ã€ERROR: Package â€˜networkxâ€™ requires a different Python: 3.8.10 not in â€˜&gt;=3.9â€™ã€‘ï¼šnetworkxç‰ˆæœ¬ä¸å…¼å®¹3.8ï¼Œéœ€è¦é€šè¿‡<code>pip3 install networkx -i https://pypi.tuna.tsinghua.edu.cn/simple</code>æ‰‹åŠ¨å®‰è£…network3.1ç‰ˆæœ¬çš„åº“</p></li></ol></blockquote><h3 id="2-3-è¿è¡ŒDemo">2.3 è¿è¡ŒDemo</h3><ol><li>ä¸‹è½½<strong>rosbag</strong>åŒ…ï¼šã€<a href="https://pan.quark.cn/s/fc253670a15f">å¤¸å…‹ç½‘ç›˜ï¼šsingle-object.bag</a>ã€‘ã€<a href="https://pan.quark.cn/s/0871121dadc3">å¤¸å…‹ç½‘ç›˜ï¼šmulti-objects.bag</a>ã€‘</li><li>å°†python3è®¾ç½®ä¸ºç³»ç»Ÿé»˜è®¤pythonç‰ˆæœ¬ï¼š<code>sudo ln -sf /usr/bin/python3 /usr/local/bin/python</code></li><li>è¿è¡Œä»£ç </li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">roscore</span><br><span class="line"><span class="comment"># å•äººè¿åŠ¨</span></span><br><span class="line">rosbag play -l single-object.bag</span><br><span class="line"><span class="comment"># å¤šäººè¿åŠ¨</span></span><br><span class="line">rosbag play -l multi-objects.bag</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œæ²¡æœ‰yolo-madä½œä¸ºè¾…åŠ©çš„æ£€æµ‹å™¨</span></span><br><span class="line">roslaunch onboard_detector run_detector.launch</span><br><span class="line"><span class="comment"># è¿è¡Œyolo-madä½œä¸ºè¾…åŠ©ï¼ˆæ„Ÿè§‰æ•ˆæœæ¯”ä¸Šé¢çš„è¿˜å·®ï¼‰</span></span><br><span class="line">roslaunch onboard_detector detector_with_learning_module.launch</span><br></pre></td></tr></table></figure><h3 id="2-4-åœ¨è‡ªå·±è®¾å¤‡ä¸Šè¿è¡Œï¼ˆå¾…è¡¥å……å¾…æ›´æ–°ï¼‰">2.4 åœ¨è‡ªå·±è®¾å¤‡ä¸Šè¿è¡Œï¼ˆå¾…è¡¥å……å¾…æ›´æ–°ï¼‰</h3><blockquote><p>è¯·è°ƒæ•´ä½ çš„æ‘„åƒå¤´è®¾å¤‡ä¸‹çš„é…ç½®æ–‡ä»¶ï¼Œä½äº <code>cfg/detector_param.yaml</code>ã€‚åŒæ—¶ï¼Œä¿®æ”¹ <code>scripts/yolo_detector/yolo_detector.py</code> ä¸­çš„å½©è‰²å›¾åƒè¯é¢˜åç§°ã€‚ä»å‚æ•°æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç®—æ³•æœŸæœ›ä»æœºå™¨äººè·å–ä»¥ä¸‹æ•°æ®ï¼š</p><ul><li><p>æ·±åº¦å›¾åƒï¼š<code>/camera/depth/image_rect_raw</code></p></li><li><p>æœºå™¨äººå§¿æ€ï¼š<code>/mavros/local_position/pose</code></p></li><li><p>æœºå™¨äººé‡Œç¨‹è®¡ï¼ˆå¯é€‰ï¼‰ï¼š<code>/mavros/local_position/odom</code></p></li><li><p>å½©è‰²å›¾åƒï¼ˆå¦‚æœåº”ç”¨äº†YOLOåˆ™ä¸ºå¯é€‰ï¼‰ï¼š<code>/camera/color/image_rect_raw</code></p></li><li><p>å¯¹é½æ·±åº¦å›¾åƒï¼ˆå¯é€‰ï¼‰ï¼š<code>/camera/aligned_depth_to_color/image_raw</code></p></li></ul></blockquote><ol><li>ä¿®æ”¹æ·±åº¦ç›¸æœºlaunchæ–‡ä»¶</li></ol><blockquote><p>å¯¹é½æ·±åº¦å›¾åƒé»˜è®¤ä¸ç”Ÿæˆï¼Œå› æ­¤éœ€è¦ä¿®æ”¹launchæ–‡ä»¶ç»§ç»­ä¿®æ”¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roscd realsense2_camera/launch</span><br><span class="line">nano rs_camera.launch</span><br></pre></td></tr></table></figure><p>å°†<code>align_depth</code>å‚æ•°ä¿®æ”¹ä¸º<code>true</code>ï¼Œç„¶å<strong>Ctrl+O</strong>&amp;<strong>Ctrl+X</strong>ä¿å­˜é€€å‡º</p><img src="https://s2.loli.net/2024/04/19/V5dNOREYgC8L3m9.png"  /></blockquote><ol start="2"><li><p>è¿è¡ŒFast-Drone-250æˆ–Vins-Fusionç­‰è·å–æ— äººæœºä½å§¿</p><blockquote><p>å‚è€ƒï¼š<a href="https://github.com/ZJU-FAST-Lab/Fast-Drone-250">ã€https://github.com/ZJU-FAST-Lab/Fast-Drone-250ã€‘</a>ä¸Šçš„æ•™ç¨‹æ­å»ºç¯å¢ƒ</p><ol><li>ä¿®æ”¹<strong>odom</strong>ä¸»é¢˜ï¼šè¿›å…¥<code>onboard_detector/cfg/detector_param.yaml</code>æ–‡ä»¶ï¼Œå°†<code>localization_mode</code>ä¿®æ”¹ä¸º<code>1</code>ï¼Œå°†<code>odom_topic</code>ä¿®æ”¹ä¸º<code>/vins_fusion/imu_propagate</code></li><li>å¯åŠ¨<strong>Vins-Fusion</strong></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ~/Fast-Drone-250/shfiles/rspx4.sh</span><br></pre></td></tr></table></figure><ol start="3"><li><p>ä¿®æ”¹æ·±åº¦ç›¸æœºçš„å‚æ•°ï¼š<code>rostopic echo /camera/infra1/camera_info</code>ï¼Œå°†KçŸ©é˜µä¸­çš„fx,fy,cx,cyå¡«å…¥<code>onboard_detector/cfg/detector_param.yaml</code>æ–‡ä»¶ä¸­çš„<code>depth_intrinsics</code>çŸ©é˜µä¸­</p></li><li><p>å¯åŠ¨launch</p></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œæ²¡æœ‰yolo-madä½œä¸ºè¾…åŠ©çš„æ£€æµ‹å™¨</span></span><br><span class="line">roslaunch onboard_detector run_detector.launch</span><br><span class="line"><span class="comment"># è¿è¡Œyolo-madä½œä¸ºè¾…åŠ©ï¼ˆæ„Ÿè§‰æ•ˆæœæ¯”ä¸Šé¢çš„è¿˜å·®ï¼‰</span></span><br><span class="line">roslaunch onboard_detector detector_with_learning_module.launch</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2024/05/07/YIcH5jlXbem1pfv.png" style="zoom: 80%;" /></blockquote></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;*æè¿°*&lt;/strong&gt;&lt;/em&gt;ï¼šæ¬¢è¿æ¥åˆ°CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè‡ªä¸»æ— äººé£è¡Œå™¨ (UAV) çš„å¤šåŠŸèƒ½æ¨¡å—åŒ–æ¡†æ¶ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬ä¸åŒçš„ç»„ä»¶ (æ¨¡æ‹Ÿå™¨ï¼Œæ„ŸçŸ¥ï¼Œæ˜ å°„ï¼Œè§„åˆ’å’Œæ§åˆ¶)ï¼Œä»¥å®ç°è‡ªä¸»å¯¼èˆªï¼ŒæœªçŸ¥æ¢ç´¢å’Œç›®æ ‡æ£€</summary>
      
    
    
    
    <category term="CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶" scheme="https://www.mgodmonkey.cn/categories/CERLAB%E6%97%A0%E4%BA%BA%E6%9C%BA%E8%87%AA%E4%B8%BB%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼šç¯å¢ƒæ­å»º</title>
    <link href="https://www.mgodmonkey.cn/posts/349e2e18.html"/>
    <id>https://www.mgodmonkey.cn/posts/349e2e18.html</id>
    <published>2024-03-26T00:42:50.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h1>CERLAB UAV Autonomy Framework</h1><blockquote><p><strong>æè¿°</strong>ï¼šæ¬¢è¿æ¥åˆ°CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè‡ªä¸»æ— äººé£è¡Œå™¨ (UAV) çš„å¤šåŠŸèƒ½æ¨¡å—åŒ–æ¡†æ¶ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬ä¸åŒçš„ç»„ä»¶ (æ¨¡æ‹Ÿå™¨ï¼Œæ„ŸçŸ¥ï¼Œæ˜ å°„ï¼Œè§„åˆ’å’Œæ§åˆ¶)ï¼Œä»¥å®ç°è‡ªä¸»å¯¼èˆªï¼ŒæœªçŸ¥æ¢ç´¢å’Œç›®æ ‡æ£€æŸ¥ã€‚</p><p><strong>è§†é¢‘æ¼”ç¤º</strong>: <a href="https://youtu.be/sWTQ4cnQCIE?si=809MQPjWSI2Bq4rj">YouTube</a>, <a href="https://www.bilibili.com/video/BV1KN4y1i7FV/?share_source=copy_web&amp;vd_source=1333db331406abb1b5d4cece1e253427&amp;t=0">BiliBili</a></p></blockquote><h2 id="1-æ¨¡å—ä»‹ç»">1.æ¨¡å—ä»‹ç»</h2><p><code>autonomous_flight</code>: é›†æˆäº†ç”¨äºå„ç§ä»»åŠ¡çš„æ‰€æœ‰å…¶ä»–æ¨¡å—çš„è‡ªä¸»é£è¡ŒåŒ…ã€‚<a href="https://github.com/Zhefan-Xu/autonomous_flight">è¯¦ç»†ä¿¡æ¯</a><br><code>global_planner</code>: è‡ªä¸»æœºå™¨äººçš„å…¨çƒèˆªç‚¹è§„åˆ’å™¨åº“ã€‚<a href="https://github.com/Zhefan-Xu/global_planner">è¯¦ç»†ä¿¡æ¯</a><br><code>map_manager</code>: è‡ªä¸»æœºå™¨äººçš„3Dæ˜ å°„åº“ã€‚<a href="https://github.com/Zhefan-Xu/map_manager">è¯¦ç»†ä¿¡æ¯</a><br><code>onboard_detector</code>: è‡ªä¸»æœºå™¨äººçš„åŠ¨æ€éšœç¢ç‰©æ£€æµ‹å’Œè·Ÿè¸ªç®—æ³•ã€‚<a href="https://github.com/Zhefan-Xu/onboard_detector">è¯¦ç»†ä¿¡æ¯</a><br><code>remote_control</code>: Rvizé…ç½®å’Œå¯åŠ¨æ–‡ä»¶ï¼Œä¾¿äºå¯è§†åŒ–ã€‚<a href="https://github.com/Zhefan-Xu/onboard_detector">è¯¦ç»†ä¿¡æ¯</a><br><code>time_optimizer</code>: è‡ªä¸»æœºå™¨äººçš„æœ€ä¼˜è½¨è¿¹æ—¶é—´åˆ†é…åº“ã€‚<a href="https://github.com/Zhefan-Xu/time_optimizer">è¯¦ç»†ä¿¡æ¯</a><br><code>tracking_controller</code>: è‡ªä¸»æœºå™¨äººçš„è½¨è¿¹è·Ÿè¸ªæ§åˆ¶å™¨ã€‚<a href="https://github.com/Zhefan-Xu/tracking_controller">è¯¦ç»†ä¿¡æ¯</a><br><code>trajectory_planner</code>: è‡ªä¸»æœºå™¨äººçš„è½¨è¿¹è§„åˆ’åº“ã€‚<a href="https://github.com/Zhefan-Xu/trajectory_planner">è¯¦ç»†ä¿¡æ¯</a><br><code>uav_simulator</code>: åŸºäºè½»å‹Gazebo/ROSçš„æ— äººæœºæ¨¡æ‹Ÿå™¨ã€‚<a href="https://github.com/Zhefan-Xu/uav_simulator">è¯¦ç»†ä¿¡æ¯</a></p><h2 id="2-å®‰è£…æŒ‡å¼•">2.å®‰è£…æŒ‡å¼•</h2><p>è¯¥å·¥ç¨‹å·²ç»åœ¨å¸¦æœ‰<strong>ROS Melodic</strong>çš„<strong>Ubuntu 18.04</strong>å’Œå¸¦æœ‰<strong>ROS Noetic</strong>çš„<strong>Ubuntu 20.04</strong>ä¸Šè¿›è¡Œäº†æµ‹è¯•ï¼Œå®ƒå–å†³äºROSåŒ…: <a href="https://wiki.ros.org/octomap">octomap</a>ï¼Œ<a href="https://wiki.ros.org/mavros">mavros</a>å’Œ<a href="https://wiki.ros.org/vision_msgs">vision_msgs</a>ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…è½¯ä»¶åŒ…:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># step1: å®‰è£…ä¾èµ–</span></span><br><span class="line">sudo apt install ros-<span class="variable">$&#123;ROS_DISTRO&#125;</span>-octomap* &amp;&amp; sudo apt install ros-<span class="variable">$&#123;ROS_DISTRO&#125;</span>-mavros* &amp;&amp; sudo apt install ros-<span class="variable">$&#123;ROS_DISTRO&#125;</span>-vision-msgs</span><br><span class="line"><span class="built_in">cd</span> /opt/ros/noetic/lib/mavros</span><br><span class="line">sudo ./install_geographiclib_datasets.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># step 2: å…‹éš†å·¥ç¨‹åˆ°å·¥ä½œç©ºé—´</span></span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/Zhefan-Xu/CERLAB-UAV-Autonomy.git</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯é€‰: åˆ‡æ¢åˆ°autonomous_flightçš„æ¨¡æ‹Ÿåˆ†æ”¯</span></span><br><span class="line"><span class="comment"># é»˜è®¤åˆ†æ”¯ç”¨äºå®é™…é£è¡Œå’ŒPX4æ¨¡æ‹Ÿ</span></span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src/CERLAB-UAV-Autonomy/autonomous_flight</span><br><span class="line">git checkout simulation</span><br><span class="line"></span><br><span class="line"><span class="comment"># step 3: ç¼–è¯‘</span></span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws</span><br><span class="line">catkin_make</span><br><span class="line"><span class="built_in">source</span> ~/catkin_ws/devel/setup.bash</span><br><span class="line"><span class="comment"># ä¸€å®šä¸€å®šä¸€å®šè¦sourceä¸‹é¢è¿™æ¡å•Šï¼ï¼ï¼è¡€çš„æ•™è®­ï¼Œæ§åˆ¶ä¸äº†å°±æ˜¯å› ä¸ºæ²¡æœ‰sourceè¿™ä¸ª</span></span><br><span class="line"><span class="built_in">source</span> ~/catkin_ws/src/CERLAB-UAV-Autonomy/uav_simulator/gazeboSetup.bash</span><br></pre></td></tr></table></figure><h2 id="3-PX4ä»¿çœŸ-å®é£">3.PX4ä»¿çœŸ&amp;å®é£</h2><blockquote><p>è¯¥CERLABæ— äººæœºæ¡†æ¶è‡ªå¸¦ä¸¤ä¸ªä»¿çœŸæ¨¡æ‹Ÿå™¨ï¼Œ<strong>autonomous_flight</strong>å’Œ<strong>PX4</strong>ä»¿çœŸï¼Œå¦‚æœéœ€è¦åˆ‡æ¢<strong>autonomous_flight</strong>ä»¿çœŸï¼Œåˆ™éœ€è¦é€šè¿‡ä¸Šé¢çš„æ–¹å¼åˆ‡æ¢åˆ†æ”¯</p><p><strong>è‡ªä¸»èµ·é£é€‰é¡¹</strong>ï¼š</p><ul><li><code>Takeoff/Hovering</code>: èµ·é£å’Œæ‚¬åœåœ¨æŒ‡å®šé«˜åº¦ã€‚</li><li><code>Takeoff/Tracking Circle</code>: èµ·é£å’Œè·Ÿè¸ªå…·æœ‰ç»™å®šåŠå¾„å’Œé€Ÿåº¦çš„åœ†å½¢è½¨è¿¹ã€‚</li><li><code>Navigation</code>: é™æ€ç¯å¢ƒä¸­çš„è‡ªä¸»å¯¼èˆªã€‚</li><li><code>Dynamic Navigation</code>: åŠ¨æ€ç¯å¢ƒä¸­çš„è‡ªä¸»å¯¼èˆªã€‚</li><li><code>Inspection (Octomap)</code>: ä½¿ç”¨Octomapçš„è‡ªä¸»è¡¨é¢æ£€æŸ¥ã€‚</li><li><code>Inspection (Dynamic Map)</code>: ä½¿ç”¨åŠ¨æ€åœ°å›¾è¿›è¡Œè‡ªä¸»è¡¨é¢æ£€æŸ¥ã€‚</li><li><code>Dynamic Exploration</code>: æœªçŸ¥å’ŒåŠ¨æ€ç¯å¢ƒä¸­çš„è‡ªä¸»æ¢ç´¢ã€‚</li></ul></blockquote><h3 id="3-1å®‰è£…PX4ä»¿çœŸç¯å¢ƒ">3.1å®‰è£…PX4ä»¿çœŸç¯å¢ƒ</h3><blockquote><p><strong>ç¯å¢ƒå®‰è£…å‚è€ƒ</strong>ï¼š<a href="https://www.mgodmonkey.cn/posts/cfe889db.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-4-ã€PX4ä¸Gazeboå…¥é—¨ã€‘ | MGodmonkeyã®ä¸–ç•Œ</a></p><p><strong>æ³¨</strong>ï¼š</p><p><img src="https://s2.loli.net/2024/03/26/bExvNX1oTVmqhiA.png" alt=""></p><p>å¦‚æœé€šè¿‡ä¿®æ”¹<code>.bashrc</code>æ¥æ›´æ–°ç¯å¢ƒå˜é‡ï¼Œè¯·ç¡®ä¿<strong>PX4</strong>ç¯å¢ƒè·¯å¾„åœ¨<code>source ~/catkin_ws/devel/setup.bash</code>ä¸‹é¢ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™</p></blockquote><h3 id="3-2è¿è¡ŒDemo">3.2è¿è¡ŒDemo</h3><p>é¦–å…ˆå¯åŠ¨æ— äººæœºæ¨¡æ‹Ÿå™¨ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨é¢„å®šä¹‰çš„<strong>gazebo</strong>ä¸­çœ‹åˆ°å››è½´é£è¡Œå™¨ã€‚</p><p>è¯¥é¡¹ç›®ä¸­æœ‰ä¸¤ç§ä»¿çœŸå™¨ï¼Œä¸€ä¸ªæ˜¯PX4ä»¿çœŸï¼Œå³æ§åˆ¶é€šè¿‡PX4å›ºä»¶æ§åˆ¶ï¼Œä¸€ä¸ªæ˜¯è‡ªå®šä¹‰æ§åˆ¶ä»¿çœŸï¼Œé»˜è®¤å…‹éš†ä¸‹æ¥ä»£ç çš„æ˜¯PX4ä»¿çœŸåˆ†æ”¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨PX4ä»¿çœŸ</span></span><br><span class="line">roslaunch uav_simulator px4_start.launch</span><br></pre></td></tr></table></figure><blockquote><p>è‹¥é¦–æ¬¡å¯åŠ¨gazeboä»¿çœŸé»‘å±å¾ˆä¹…ï¼Œåˆ™æ˜¯åŠ è½½æ¨¡å‹è¿‡ä¹…ï¼Œå¯ä»¥æå‰ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.gazebo/</span><br><span class="line"><span class="built_in">mkdir</span> -p ~/.gazebo/models <span class="comment"># å¦‚æœmodelsç›®å½•å­˜åœ¨ï¼Œåˆ™ä¸éœ€è¦åˆ›å»º</span></span><br><span class="line"><span class="built_in">cd</span> ~/.gazebo/models/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½æ¨¡å‹å¹¶è§£å‹</span></span><br><span class="line">wget http://file.ncnynl.com/ros/gazebo_models.txt</span><br><span class="line">wget -i gazebo_models.txt</span><br><span class="line"><span class="built_in">ls</span> model.tar.g* | xargs -n1 tar xzvf</span><br></pre></td></tr></table></figure></blockquote><p>a. ç®€å•èµ·é£å’Œæ‚¬åœ <code>Takeoff/Hovering</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun autonomous_flight takeoff_and_hover_node  <span class="comment"># takeoff at 1.0 meter height</span></span><br></pre></td></tr></table></figure><p>b. èµ·é£å’Œè·Ÿè¸ªä¸€åœˆ <code>Takeoff/Tracking Circle</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch autonomous_flight takeoff_and_track_circle.launch  <span class="comment"># takeoff and tracking a circular trajectory</span></span><br></pre></td></tr></table></figure><p>c. é™æ€ç¯å¢ƒå¯¼èˆª <code>Navigation</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roslaunch remote_control navigation_rviz.launch </span><br><span class="line">roslaunch autonomous_flight navigation.launch <span class="comment"># æ–°å»ºä¸€ä¸ªçª—å£æ¥è¿è¡Œè¿™ä¸ª</span></span><br></pre></td></tr></table></figure><p>d. åŠ¨æ€ç¯å¢ƒå¯¼èˆª <code>Dynamic Navigation</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roslaunch remote_control dynamic_navigation_rviz.launch   </span><br><span class="line">roslaunch autonomous_flight dynamic_navigation.launch <span class="comment"># æ–°å»ºä¸€ä¸ªçª—å£æ¥è¿è¡Œè¿™ä¸ª</span></span><br></pre></td></tr></table></figure><p>e. ä½¿ç”¨octomapè¿›è¡Œé™æ€ç¯å¢ƒæ£€æŸ¥ <code>Inspection (Octomap)</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roslaunch octomap_server octomap_mapping.launch <span class="comment"># è¯·ç‰¢è®°ä¸º ros ä¸»é¢˜/è½¬æ¢ä¿®æ”¹å‚æ•°</span></span><br><span class="line">roslaunch autonomous_flight inspection.launch</span><br></pre></td></tr></table></figure><p>f. ä½¿ç”¨åŠ¨æ€åœ°å›¾è¿›è¡ŒåŠ¨æ€ç¯å¢ƒæ£€æŸ¥ <code>Inspection (Dynamic Map)</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch autonomous_flight dynamic_inspection.launch    <span class="comment"># autonomous surface inspection</span></span><br></pre></td></tr></table></figure><p>g. æœªçŸ¥å’ŒåŠ¨æ€ç¯å¢ƒæ¢ç´¢ <code>Dynamic Exploration</code>:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">roslaunch remote_control exploration_rviz.launch  </span><br><span class="line">roslaunch autonomous_flight dynamic_exploration.launch <span class="comment"># æ–°å»ºä¸€ä¸ªçª—å£æ¥è¿è¡Œè¿™ä¸ª</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨ï¼š</strong></p><p>PX4ä»¿çœŸä¸‹æ— æ³•æ§åˆ¶çš„æƒ…å†µä¸‹</p><ul><li><p>å¯åŠ¨ä»¿çœŸï¼Œæ‰“å¼€QGCåœ°é¢ç«™ï¼Œåœ¨å‚æ•°ä¸­æœç´¢<code>COM_RCL_EXCEPT</code></p></li><li><p>å°†<code>COM_RCL_EXCEPT</code>å‚æ•°æ”¹ä¸º<code>4</code>å¹¶ä¿å­˜</p></li></ul><img src="https://s2.loli.net/2024/01/12/31SIkYCRsGbg69F.png" style="zoom: 80%;" /></blockquote><h3 id="3-3å‚æ•°è°ƒæ•´">3.3å‚æ•°è°ƒæ•´</h3><p>æ‰€æœ‰å‚æ•°éƒ½åœ¨<strong>autonomous_flight/cfg</strong>æ–‡ä»¶å¤¹ä¸­ã€‚ä¾‹å¦‚ï¼ŒåŠ¨æ€å¯¼èˆªçš„å‚æ•°å¯ä»¥åœ¨<strong>autonomous_flight/cfg/dynamic_navgation/*.yaml</strong>ä¸­æ‰¾åˆ°</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;CERLAB UAV Autonomy Framework&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;æè¿°&lt;/strong&gt;ï¼šæ¬¢è¿æ¥åˆ°CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºè‡ªä¸»æ— äººé£è¡Œå™¨ (UAV) çš„å¤šåŠŸèƒ½æ¨¡å—åŒ–æ¡†æ¶ã€‚è¯¥æ¡†æ¶åŒ…æ‹¬ä¸åŒçš„ç»„ä»¶ (æ¨¡æ‹Ÿå™¨ï¼Œæ„Ÿ</summary>
      
    
    
    
    <category term="CERLABæ— äººæœºè‡ªä¸»æ¡†æ¶" scheme="https://www.mgodmonkey.cn/categories/CERLAB%E6%97%A0%E4%BA%BA%E6%9C%BA%E8%87%AA%E4%B8%BB%E6%A1%86%E6%9E%B6/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>wslè¿æ¥USBè®¾å¤‡</title>
    <link href="https://www.mgodmonkey.cn/posts/961f6207.html"/>
    <id>https://www.mgodmonkey.cn/posts/961f6207.html</id>
    <published>2024-02-15T08:57:16.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>å‚è€ƒæ•™ç¨‹ï¼š</strong><a href="https://learn.microsoft.com/zh-cn/windows/wsl/connect-usb">è¿æ¥ USB è®¾å¤‡ | Microsoft Learn</a></p></blockquote><h3 id="1-å®‰è£…usbipd-win">1.å®‰è£…usbipd-win</h3><p>WSL æœ¬èº«å¹¶ä¸æ”¯æŒè¿æ¥ USB è®¾å¤‡ï¼Œå› æ­¤ä½ éœ€è¦å®‰è£…å¼€æºusbipd-winé¡¹ç›®ã€<a href="https://github.com/dorssel/usbipd-win/releases">ä¸‹è½½Releases Â· dorssel/usbipd-win (github.com)</a>ã€‘</p><h3 id="2-å…±äº«USBè®¾å¤‡">2.å…±äº«USBè®¾å¤‡</h3><p>é€šè¿‡ä»¥<em>ç®¡ç†å‘˜</em>æ¨¡å¼æ‰“å¼€<strong>PowerShell</strong>æˆ–è€…<strong>CMD</strong>å¹¶è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåˆ—å‡ºæ‰€æœ‰è¿æ¥åˆ°Windowsçš„USBè®¾å¤‡ã€‚ åˆ—å‡ºè®¾å¤‡åï¼Œé€‰æ‹©å¹¶å¤åˆ¶è¦é™„åŠ åˆ°WSLçš„è®¾å¤‡æ€»çº¿ IDã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files\usbipd-win</span><br><span class="line">usbipd list</span><br></pre></td></tr></table></figure><p>åœ¨é™„åŠ  USB è®¾å¤‡ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨å‘½ä»¤ <code>usbipd bind</code> æ¥å…±äº«è®¾å¤‡ï¼Œä»è€Œå…è®¸å®ƒé™„åŠ åˆ° WSLã€‚ è¿™éœ€è¦ç®¡ç†å‘˜æƒé™ã€‚ é€‰æ‹©è¦åœ¨ WSL ä¸­ä½¿ç”¨çš„è®¾å¤‡æ€»çº¿ IDï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚ è¿è¡Œå‘½ä»¤åï¼Œè¯·å†æ¬¡ä½¿ç”¨å‘½ä»¤ <code>usbipd list</code> éªŒè¯è®¾å¤‡æ˜¯å¦å·²å…±äº«ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usbipd bind <span class="literal">--busid</span> &lt;busid&gt;</span><br></pre></td></tr></table></figure><p>è‹¥è¦é™„åŠ USBè®¾å¤‡ï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ã€‚ï¼ˆä¸å†éœ€è¦ä½¿ç”¨æå‡çš„ç®¡ç†å‘˜æç¤ºï¼‰ç¡®ä¿WSLå‘½ä»¤æç¤ºç¬¦å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œä»¥ä½¿WSL2è½»å‹VMä¿æŒæ´»åŠ¨çŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œåªè¦USBè®¾å¤‡è¿æ¥åˆ°WSLï¼ŒWindowså°†æ— æ³•ä½¿ç”¨å®ƒã€‚é™„åŠ åˆ°WSLåï¼Œä»»ä½•ä½œä¸ºWSL2è¿è¡Œçš„åˆ†å‘ç‰ˆæœ¬éƒ½å¯ä»¥ä½¿ç”¨USBè®¾å¤‡ã€‚ä½¿ç”¨ <code>usbipd list</code> éªŒè¯è®¾å¤‡æ˜¯å¦å·²é™„åŠ ã€‚åœ¨WSLæç¤ºç¬¦ä¸‹ï¼Œè¿è¡Œ<code>lsusb</code>ä»¥éªŒè¯USBè®¾å¤‡æ˜¯å¦å·²åˆ—å‡ºï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨Linuxå·¥å…·ä¸ä¹‹äº¤äº’ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usbipd attach <span class="literal">--wsl</span> <span class="literal">--busid</span> &lt;busid&gt;</span><br></pre></td></tr></table></figure><p>æ‰“å¼€Ubuntuï¼ˆæˆ–é¦–é€‰çš„WSLå‘½ä»¤è¡Œï¼‰ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºé™„åŠ çš„USBè®¾å¤‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsusb</span><br></pre></td></tr></table></figure><img src="https://s2.loli.net/2024/02/15/3IhF6wLBKpYSOkq.png" alt="image.png" style="zoom:80%;" /><p><img src="https://s2.loli.net/2024/02/15/mFsLwY7QE4Rvhp3.png" alt="image.png"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒæ•™ç¨‹ï¼š&lt;/strong&gt;&lt;a href=&quot;https://learn.microsoft.com/zh-cn/windows/wsl/connect-usb&quot;&gt;è¿æ¥ USB è®¾å¤‡ | Microsoft Learn&lt;/a&gt;&lt;/p</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://www.mgodmonkey.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="wsl" scheme="https://www.mgodmonkey.cn/tags/wsl/"/>
    
    <category term="é—®é¢˜å¤§å…¨" scheme="https://www.mgodmonkey.cn/tags/%E9%97%AE%E9%A2%98%E5%A4%A7%E5%85%A8/"/>
    
  </entry>
  
  <entry>
    <title>DVXploreräº‹ä»¶ç›¸æœºå…¥é—¨</title>
    <link href="https://www.mgodmonkey.cn/posts/4528cc75.html"/>
    <id>https://www.mgodmonkey.cn/posts/4528cc75.html</id>
    <published>2024-02-14T08:33:50.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>DVå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://inivation.gitlab.io/dv/dv-docs/docs/getting-started.html#ubuntu-linux">Get Started Â· DV (inivation.gitlab.io)</a></p><p>DVäº‹ä»¶ç›¸æœºçš„ROSåŒ…ï¼š<a href="https://github.com/uzh-rpg/rpg_dvs_ros">https://github.com/uzh-rpg/rpg_dvs_ros</a></p><p>äº‹ä»¶ç›¸æœºçš„èµ„æºæ±‡æ€»ï¼š<a href="https://github.com/uzh-rpg/event-based_vision_resources">https://github.com/uzh-rpg/event-based_vision_resources</a></p></blockquote><h2 id="1-DVäº‹ä»¶ç›¸æœºROSåŒ…é©±åŠ¨ç¨‹åºå®‰è£…">1.DVäº‹ä»¶ç›¸æœºROSåŒ…é©±åŠ¨ç¨‹åºå®‰è£…</h2><p><strong>æ³¨æ„ï¼šå°†ä»¥ä¸‹æŒ‡ä»¤ä¸­æåŠçš„ä»»ä½•noeticæ›¿æ¢ä¸ºæ‚¨å½“å‰ROSå‘è¡Œç‰ˆçš„åç§°</strong></p><ul><li>å®‰è£…ROSä¾èµ–</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-camera-info-manager</span><br><span class="line">sudo apt-get install ros-noetic-image-view</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…libcaer</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:inivation-ppa/inivation</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install libcaer-dev</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…catkinå·¥å…·</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python3-catkin-tools</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºå·¥ä½œç©ºé—´ï¼ˆæŒ‡ä»¤å‚è€ƒï¼š<a href="https://www.mgodmonkey.cn/posts/f1cb77fb.html">ROSæŒ‡ä»¤å¤§å…¨</a>ï¼‰</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line"><span class="built_in">mkdir</span> -p catkin_ws/src</span><br><span class="line"><span class="built_in">cd</span> catkin_ws</span><br><span class="line">catkin config --init --mkdirs --extend /opt/ros/noetic --merge-devel --cmake-args -DCMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure><ul><li>å…‹éš†å°†ç”¨äºç”Ÿæˆ DVS/DAVIS é©±åŠ¨ç¨‹åºåŒ…çš„åŒ… ï¼ˆ<a href="https://github.com/catkin/catkin_simple%EF%BC%89%EF%BC%9A%60catkin_simple%60">https://github.com/catkin/catkin_simpleï¼‰ï¼š`catkin_simple`</a></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/catkin/catkin_simple.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/uzh-rpg/rpg_dvs_ros.git</span><br></pre></td></tr></table></figure><ul><li>ç¼–è¯‘åŒ…</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws</span><br><span class="line">catkin_make <span class="comment"># ç¼–è¯‘å·¥ä½œåŒºå†…çš„æ‰€æœ‰åŠŸèƒ½åŒ…</span></span><br><span class="line"><span class="comment"># æˆ–è€…é€‰æ‹©æ€§çš„ç¼–è¯‘ä¸‹é¢çš„åŠŸèƒ½åŒ…</span></span><br><span class="line">catkin build dvs_renderer <span class="comment"># æ¸²æŸ“å™¨ï¼ˆå›¾ç‰‡æŸ¥çœ‹å™¨ï¼‰</span></span><br><span class="line">catkin build dvs_ros_driver <span class="comment"># DVS128</span></span><br><span class="line">catkin build davis_ros_driver <span class="comment"># DAVIS</span></span><br><span class="line">catkin build dvxplorer_ros_driver <span class="comment"># DVXplorer</span></span><br></pre></td></tr></table></figure><ul><li>æ›´æ–°ç¯å¢ƒ</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/catkin_ws/devel/setup.bash</span><br></pre></td></tr></table></figure><h2 id="2-æµ‹è¯•DVç›¸æœº">2.æµ‹è¯•DVç›¸æœº</h2><p>è¿æ¥DVç›¸æœºå¹¶é€šè¿‡å¯åŠ¨ä¸‹é¢çš„<code>launch</code>æ¥å¯åŠ¨DVç›¸æœº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">roslaunch dvs_renderer dvs_mono.launch <span class="comment"># DVS128</span></span><br><span class="line">roslaunch dvs_renderer davis_mono.launch <span class="comment"># DAVIS</span></span><br><span class="line">roslaunch dvs_renderer dvxplorer_mono.launch <span class="comment"># DVXplorer</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä½¿ç”¨çš„æ˜¯DVXplorerç›¸æœºï¼Œä¸»é¢˜åˆ‡æ¢åˆ°<code>/dvs_rendering</code>ï¼Œå¹¶åœ¨é•œå¤´å‰æ™ƒåŠ¨å³å¯æ˜¾ç¤ºä¸‹é¢çš„ç”»é¢</p><p><img src="https://s2.loli.net/2024/02/16/W8z4cTmKDEquGaN.png" alt="image.png"></p><h2 id="3-ä½¿ç”¨DV-GUIæ¥å¯åŠ¨DVç›¸æœºï¼ˆå¯é€‰ï¼‰">3.ä½¿ç”¨DV-GUIæ¥å¯åŠ¨DVç›¸æœºï¼ˆå¯é€‰ï¼‰</h2><p><strong>DV-GUI</strong>æ˜¯<a href="https://inivation.com/buy">ç”¨äº iniVation <strong>åŠ¨æ€è§†è§‰ä¼ æ„Ÿå™¨ ï¼ˆDVS/DAVISï¼‰</strong></a> çš„è½¯ä»¶ï¼Œå¯ä»¥é€šè¿‡è¿æ¥åˆ°DVç›¸æœºå¹¶æ˜¾ç¤ºå…¶è¾“å‡ºã€‚å®ƒä¹Ÿæ˜¯å®˜æ–¹è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºä¸ºåŸºäºäº‹ä»¶çš„ç›¸æœºç¼–å†™åº”ç”¨è½¯ä»¶ã€‚ç›®å‰æ”¯æŒçš„æ“ä½œç³»ç»Ÿæœ‰Winã€Macosã€Ubuntuã€Fedoraã€Arch linuxã€æ ‘è“æ´¾ç­‰</p><ul><li><p><code>Windows</code></p><ul><li>ä¸‹è½½å¹¶å®‰è£…DVï¼š<a class="btn-anzhiyu " href="https://release.inivation.com/gui/latest-win-stable"   title="å‰å¾€ä¸‹è½½"><i class="anzhiyufont anzhiyu-icon-circle-arrow-right"></i><span>å‰å¾€ä¸‹è½½</span></a></li><li>Windowsä¸‹DVè½¯ä»¶æœ‰bugï¼Œéœ€è¦ä¿®æ”¹ç³»ç»Ÿæ˜¾ç¤ºè¯­è¨€ä¸º<strong>English</strong>ï¼Œè¿™æ­¥ä¸€å®šè¦å¼„ï¼Œä¸ç„¶æ— æ³•æ­£å¸¸ä½¿ç”¨ï¼š<a href="https://support.microsoft.com/zh-cn/windows/%E5%9C%A8-windows-%E4%B8%AD%E7%AE%A1%E7%90%86%E6%98%BE%E7%A4%BA%E8%AF%AD%E8%A8%80%E8%AE%BE%E7%BD%AE-219f28b0-9881-cd4c-75ca-dba919c52321">åœ¨ Windows ä¸­ç®¡ç†æ˜¾ç¤ºè¯­è¨€è®¾ç½® - Microsoft æ”¯æŒ</a></li></ul></li><li><p><code>Ubuntu</code></p></li></ul><blockquote><p>æˆ‘ä»¬åœ¨x86_64ã€arm64å’Œarmhfæ¶æ„ä¸Šä¸ºFocal ï¼ˆ20.04 LTSï¼‰ å’ŒJammy ï¼ˆ22.04 LTSï¼‰æä¾›äº†ä¸€ä¸ª <a href="https://launchpad.net/~inivation-ppa/+archive/ubuntu/inivation">PPA å­˜å‚¨åº“</a>ã€‚è¯·æ³¨æ„ï¼Œ<code>dv-gui</code>ä»…åœ¨ x86_64ä¸Šå¯ç”¨ï¼Œ<code>dv-runtime</code>åœ¨æ‰€æœ‰æ”¯æŒçš„æ¶æ„ä¸Šå¯ç”¨ã€‚</p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:inivation-ppa/inivation</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install dv-gui</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>dv-gui</code>æŒ‡ä»¤æ¥å¯åŠ¨è½¯ä»¶</p><img src="https://s2.loli.net/2024/02/16/8uTgrkLSoHPbsCX.png" alt="image-20240216212114411" style="zoom:67%;" /><blockquote><p><strong>æ³¨</strong>ï¼šå¦‚æœè®¾å¤‡æ— æ³•è¯†åˆ«ï¼Œæˆ–è€…æ— æ³•æŸ¥æ‰¾ï¼Œè¯·ç¡®ä¿DVç›¸æœºæ˜¯å¦æ­£å¸¸è¿è¡Œå¹¶è¿æ¥åˆ°ç”µè„‘ä¸Šï¼Œå°è¯•æ‹”æ’USBæ¥é‡å¯DVç›¸æœºï¼›å¦‚æœä½ åœ¨WSLä¸­ä½¿ç”¨<code>DV-GUI</code>ï¼Œè¯·ç¡®ä¿USBè®¾å¤‡èƒ½å¤Ÿåœ¨WSLä¸­æ­£å¸¸è¯†åˆ«ï¼ŒWSLä¸­æ·»åŠ USBè®¾å¤‡å‚è€ƒæ•™ç¨‹ï¼š<a href="https://www.mgodmonkey.cn/posts/961f6207.html">wslè¿æ¥USBè®¾å¤‡</a></p><p><img src="https://s2.loli.net/2024/02/16/8bK2F54u6mpecqJ.png" alt="image.png"></p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;DVå®˜æ–¹æ–‡æ¡£ï¼š&lt;a href=&quot;https://inivation.gitlab.io/dv/dv-docs/docs/getting-started.html#ubuntu-linux&quot;&gt;Get Started Â· DV (inivation.g</summary>
      
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://www.mgodmonkey.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="äº‹ä»¶ç›¸æœº" scheme="https://www.mgodmonkey.cn/tags/%E4%BA%8B%E4%BB%B6%E7%9B%B8%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>å¿«é€ŸåŠ¨æ€è§†è§‰ï¼šä½¿ç”¨äº‹ä»¶å’Œæ·±åº¦æ„Ÿåº”æ£€æµ‹å’Œè·Ÿè¸ªåŠ¨æ€å¯¹åƒ</title>
    <link href="https://www.mgodmonkey.cn/posts/732e43d6.html"/>
    <id>https://www.mgodmonkey.cn/posts/732e43d6.html</id>
    <published>2023-09-11T11:28:17.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<div class="row">    <embed src="https://mybog.s3.bitiful.net/ros/word/FAST-Dynamic-Vision.pdf" width="100%" height="550" type="application/pdf"></div><div class="note info flat"><blockquote><p>ç›¸å…³è®ºæ–‡ï¼š<a class="btn-anzhiyu " href="https://mybog.s3.bitiful.net/ros/word/FAST-Dynamic-Vision.pdf"   title="å‰å¾€ä¸‹è½½"><i class="anzhiyufont anzhiyu-icon-circle-arrow-right"></i><span>å‰å¾€ä¸‹è½½</span></a></p><p>è®ºæ–‡ä»£ç ï¼š<a href="https://github.com/ZJU-FAST-Lab/FAST-Dynamic-Vision">ZJU-FAST-Lab/FAST-Dynamic-Vision: Detecting and Tracking Dynamic Objects with Event and Depth Sensing (github.com)</a></p></blockquote></div><blockquote><h3 id="Basic-Information">Basic Information:</h3><ul><li>Title: FAST-Dynamic-Vision: Detection and Tracking Dynamic Objects with Event and Depth Sensing (FAST-Dynamic-Vision: åŸºäºäº‹ä»¶å’Œæ·±åº¦æ„ŸçŸ¥çš„åŠ¨æ€ç‰©ä½“æ£€æµ‹ä¸è·Ÿè¸ª)</li><li>Authors: Botao He, Haojia Li, Siyuan Wu, Dong Wang, Zhiwei Zhang, Qianli Dong, Chao Xu, Fei Gao</li><li>Affiliation: State Key Laboratory of Industrial Control Technology, Institute of Cyber-Systems and Control, Zhejiang University, Hangzhou, China (æµ™æ±Ÿå¤§å­¦å·¥ä¸šæ§åˆ¶æŠ€æœ¯å›½å®¶é‡ç‚¹å®éªŒå®¤)</li><li>Keywords: aerial autonomy, unmanned aerial vehicles (UAVs), dynamic object detection, trajectory prediction, event camera, depth sensing</li><li>URLs: <a href="https://arxiv.org/abs/2103.05903v2">Paper</a>, <a href="https://github.com/ZJU-FAST-Lab/FAST-Dynamic-Vision">GitHub Code</a></li></ul><h3 id="è®ºæ–‡ç®€è¦">è®ºæ–‡ç®€è¦ :</h3><ul><li>æœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäºäº‹ä»¶å’Œæ·±åº¦æ„ŸçŸ¥çš„å¿«é€ŸåŠ¨æ€ç‰©ä½“æ£€æµ‹å’Œè·Ÿè¸ªç³»ç»Ÿï¼Œé€šè¿‡å‡†ç¡®çš„è‡ªæˆ‘è¿åŠ¨è¡¥å¿ã€é«˜æ•ˆçš„å›å½’ç®—æ³•å’Œå¼‚æ­¥èåˆäº‹ä»¶å’Œæ·±åº¦ä¿¡æ¯çš„ä¼˜åŒ–æ–¹æ³•ï¼Œå®ç°äº†ä½å»¶è¿Ÿå’Œé«˜ç²¾åº¦çš„å¿«é€ŸåŠ¨æ€ç‰©ä½“æ„ŸçŸ¥ã€‚é€šè¿‡å¤§é‡å®éªŒéªŒè¯äº†è¯¥ç³»ç»Ÿçš„æ€§èƒ½ï¼Œå¹¶å°†ä»£ç å¼€æºä»¥ä¾›ç›¸å…³ç ”ç©¶ä½¿ç”¨ã€‚</li></ul><h3 id="èƒŒæ™¯ä¿¡æ¯">èƒŒæ™¯ä¿¡æ¯:</h3><ul><li>è®ºæ–‡èƒŒæ™¯: è¿‘å¹´æ¥ï¼Œæ— äººæœºçš„é£è¡Œè‡ªä¸»æ€§å–å¾—äº†å¾ˆå¤§çš„è¿›å±•ï¼Œä½¿å¾—æ— äººæœºèƒ½å¤Ÿåœ¨å¤æ‚ç¯å¢ƒä¸­çµæ´»é£è¡Œï¼Œå¦‚çŸ¿å±±å‹˜æ¢ç­‰ã€‚ç„¶è€Œï¼Œåœ¨åŠ¨æ€ç¯å¢ƒä¸­ï¼Œç‰¹åˆ«æ˜¯é¢å¯¹é«˜é€Ÿç‰©ä½“æ—¶çš„æ„ŸçŸ¥ä»ç„¶æ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ï¼Œé™åˆ¶äº†æ— äººæœºè¿›ä¸€æ­¥åº”ç”¨çš„å¯èƒ½æ€§ã€‚</li><li>è¿‡å»æ–¹æ¡ˆ: ä¼ ç»Ÿçš„æ„ŸçŸ¥æ–¹æ³•å¯¹äºå¿«é€Ÿç§»åŠ¨ç‰©ä½“çš„æ„ŸçŸ¥å­˜åœ¨å»¶è¿Ÿé—®é¢˜ï¼Œæ— æ³•æ»¡è¶³å®æ—¶æ€§è¦æ±‚ã€‚äº‹ä»¶ç›¸æœºä½œä¸ºä¸€ç§å…·æœ‰å¾®ç§’çº§æ—¶é—´åˆ†è¾¨ç‡çš„å¼‚æ­¥ä¼ æ„Ÿå™¨ï¼Œå…·æœ‰å¾ˆå¤§çš„æ½œåŠ›æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç„¶è€Œï¼Œç›®å‰è¿˜ç¼ºä¹å®Œæ•´çš„æ„ŸçŸ¥ç³»ç»Ÿæ¥å®ç°å¿«é€ŸåŠ¨æ€ç‰©ä½“çš„æ£€æµ‹å’Œè·Ÿè¸ªã€‚</li><li>è®ºæ–‡çš„Motivation: é‰´äºä¸Šè¿°é—®é¢˜ï¼Œæœ¬æ–‡é‡‡ç”¨äº†äº‹ä»¶ç›¸æœºä½œä¸ºæ„ŸçŸ¥ä¼ æ„Ÿå™¨ï¼Œå¹¶è®¾è®¡äº†ä¸€ä¸ªå®Œæ•´çš„æ„ŸçŸ¥ç³»ç»Ÿã€‚é¦–å…ˆï¼Œé€šè¿‡èåˆæƒ¯æ€§æµ‹é‡å•å…ƒï¼ˆIMUï¼‰å’Œæ·±åº¦æ•°æ®ï¼Œæå‡ºäº†ä¸€ç§å…ˆè¿›çš„è‡ªæˆ‘è¿åŠ¨è¡¥å¿ç®—æ³•ï¼Œä»¥å‡å°‘ç”±è‡ªèº«è¿åŠ¨å¼•èµ·çš„èƒŒæ™¯äº‹ä»¶ã€‚ç„¶åï¼Œé€šè¿‡å›å½’ç®—æ³•å®ç°äº†åŠ¨æ€ç‰©ä½“çš„æ£€æµ‹ã€‚æœ€åï¼Œé€šè¿‡å¼‚æ­¥èåˆäº‹ä»¶å’Œæ·±åº¦ä¿¡æ¯ï¼Œæå‡ºäº†ä¸€ç§ä¼˜åŒ–æ–¹æ³•æ¥é¢„æµ‹ç‰©ä½“çš„è½¨è¿¹ã€‚é€šè¿‡å¤§é‡å®éªŒéªŒè¯äº†è¯¥ç³»ç»Ÿçš„æ€§èƒ½ï¼Œä¸ºå¿«é€ŸåŠ¨æ€ç‰©ä½“çš„é¿éšœæä¾›äº†åšå®çš„åŸºç¡€ã€‚</li></ul><h3 id="æ–¹æ³•">æ–¹æ³•:</h3><ul><li><p>a. ç†è®ºèƒŒæ™¯:</p><ul><li>æœ¬æ–‡ä»‹ç»äº†ä¸€ç§ç”¨äºæ£€æµ‹å’Œè·Ÿè¸ªå¿«é€Ÿç§»åŠ¨åŠ¨æ€ç‰©ä½“çš„æ„ŸçŸ¥ç³»ç»Ÿï¼Œå…·æœ‰ä½å»¶è¿Ÿå’Œé«˜ç²¾åº¦ã€‚</li></ul></li><li><p>b. æŠ€æœ¯è·¯çº¿:</p><ul><li><p>æœ¬æ–‡æå‡ºäº†ä¸€ç§å‡†ç¡®çš„è‡ªæˆ‘è¿åŠ¨è¡¥å¿ç®—æ³•ï¼Œè€ƒè™‘äº†æ—‹è½¬å’Œå¹³ç§»è¿åŠ¨ã€‚</p></li><li><p>ä½¿ç”¨äº‹ä»¶ç›¸æœºè®¾è®¡äº†ä¸€ç§é«˜æ•ˆçš„åŠ¨æ€ç‰©ä½“æ£€æµ‹å›å½’ç®—æ³•ã€‚</p></li><li><p>æå‡ºäº†ä¸€ç§åŸºäºä¼˜åŒ–çš„æ–¹æ³•ï¼Œå°†äº‹ä»¶å’Œæ·±åº¦ç›¸æœºèåˆç”¨äºè½¨è¿¹é¢„æµ‹ã€‚</p></li></ul></li></ul><h3 id="ç»“æœ">ç»“æœ:</h3><ul><li><p>a. è¯¦ç»†çš„å®éªŒè®¾ç½®:</p><ul><li>åœ¨æ”¹è£…çš„é£è¡Œå¹³å°ä¸Šè¿›è¡Œäº†å®éªŒï¼Œè¯¥å¹³å°é…å¤‡äº†iniVation DVXploreråŠ¨æ€è§†è§‰ä¼ æ„Ÿå™¨å’ŒIntel Realsense D435iæ·±åº¦ç›¸æœºã€‚</li><li>å®éªŒå¹³å°è¿˜åŒ…æ‹¬è¿è¡ŒUbuntu 16.04çš„DJI Manifold2-Cè®¡ç®—æœºå’Œè¿è¡ŒPX4é£è¡Œå †æ ˆçš„CUAV Noraè‡ªåŠ¨é©¾é©¶é£è¡Œæ§åˆ¶å™¨ã€‚</li></ul></li><li><p>b. è¯¦ç»†çš„å®éªŒç»“æœ:</p><ul><li>åœ¨UAVä»¥è¶…è¿‡5 m/sçš„é€Ÿåº¦é£è¡Œçš„é«˜åŠ¨æ€åœºæ™¯ä¸­è¯„ä¼°äº†ç³»ç»Ÿã€‚</li><li>ä¸å•ç›®æ–¹æ³•ç›¸æ¯”ï¼Œè¯¥ç³»ç»Ÿåœ¨æ—¶é—´æ¶ˆè€—å’Œç§»åŠ¨ç‰©ä½“ä¸èƒŒæ™¯ä¹‹é—´çš„å¯¹æ¯”åº¦æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚</li><li>å°†ä¼°è®¡çš„è½¨è¿¹ç²¾åº¦ä¸å•ç›®æ–¹æ³•è¿›è¡Œäº†æ¯”è¾ƒï¼Œèåˆæ–¹æ³•æ˜¾ç¤ºå‡ºæ›´é«˜çš„ç²¾åº¦ã€‚</li></ul></li></ul><h3 id="æ€»ç»“">æ€»ç»“:</h3><p>è¿™ç¯‡è®ºæ–‡ä¸»è¦ä»‹ç»äº†ä¸€ç§ä½¿ç”¨äº‹ä»¶ç›¸æœºå’Œæ·±åº¦ç›¸æœºè¿›è¡Œå¿«é€Ÿç§»åŠ¨ç‰©ä½“æ£€æµ‹å’Œè·Ÿè¸ªçš„æ–¹æ³•ã€‚é¦–å…ˆï¼Œé€šè¿‡è®¡ç®—äº‹ä»¶ç›¸æœºä¸­äº‹ä»¶çš„å¹³å‡æ—¶é—´æˆ³ï¼Œç¡®å®šå…·æœ‰æœ€å¤§å¹³å‡æ—¶é—´æˆ³çš„åŒºåŸŸï¼Œè¯¥åŒºåŸŸä»£è¡¨å›¾åƒå¹³é¢ä¸Šé€Ÿåº¦æœ€å¿«çš„åŒºåŸŸã€‚ç„¶åï¼Œå¼•å…¥è¿­ä»£é«˜æ–¯æ‹Ÿåˆç®—æ³•è¿›è¡Œç›®æ ‡æ£€æµ‹ï¼Œè·å–ç›®æ ‡çš„è¾¹ç•Œæ¡†ã€‚ä¸ºäº†ç¡®ä¿è¾¹ç•Œæ¡†çš„å‡†ç¡®æ€§ï¼Œè¿˜æå‡ºäº†ç§»åŠ¨åŒºåŸŸæ£€ç´¢æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œä½¿ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨åœ¨äºŒç»´å¹³é¢ä¸Šè·Ÿè¸ªç›®æ ‡çš„ä½ç½®ï¼Œå¹¶æ ¹æ®æ£€æµ‹ç»“æœåœ¨æ·±åº¦å›¾ä¸Šè¿›è¡Œç›®æ ‡åˆ†å‰²ã€‚ç„¶åï¼Œé€šè¿‡æœ€å°åŒ–é‡æŠ•å½±æ®‹å·®æ¥ä¼˜åŒ–ç›®æ ‡çš„è½¨è¿¹ã€‚æœ€åï¼Œä¸ºäº†éªŒè¯ä¼°è®¡ç»“æœï¼Œè®¾è®¡äº†ä¸€ä¸ªåœºæ™¯ï¼Œå…¶ä¸­ä¸€ä¸ªæ— äººæœºè‡ªä¸»æ£€æµ‹å¹¶é¿å¼€å‘å…¶é£æ¥çš„ç‰©ä½“ã€‚è®ºæ–‡çš„å…¶ä½™éƒ¨åˆ†æŒ‰ç…§ä»¥ä¸‹æ–¹å¼ç»„ç»‡ï¼šç¬¬IV-AèŠ‚ä»‹ç»äº†é«˜çº§è‡ªè¿åŠ¨è¡¥å¿ç®—æ³•ï¼›ç„¶åè®¨è®ºäº†åœ¨è¯¥æ¡†æ¶ä¸­ä½¿ç”¨çš„ç›®æ ‡æ£€æµ‹å’Œè·Ÿè¸ªæ–¹æ³•ï¼ˆç¬¬IV-BèŠ‚ï¼‰ï¼›åœ¨ç¬¬IV-CèŠ‚ä¸­ï¼Œæ‰§è¡Œäº†èåˆäº‹ä»¶æµå’Œæ·±åº¦ä¿¡æ¯çš„ä¸‰ç»´è½¨è¿¹ä¼°è®¡å™¨ï¼›ç¬¬VèŠ‚æè¿°äº†å®é™…é£è¡Œå®éªŒå¹¶ä¸å…¶ä»–æ–¹æ³•è¿›è¡Œäº†æ¯”è¾ƒã€‚</p></blockquote><h2 id="1-æ¼”ç¤ºè§†é¢‘">1.æ¼”ç¤ºè§†é¢‘</h2><div align=center class="video">    <iframe src="//player.bilibili.com/player.html?aid=672080863&bvid=BV11U4y1p7EF&cid=308804055&p=1&autoplay=0&high_quality=1"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div>## 2.ç¯å¢ƒæ­å»º<h3 id="2-1-å®éªŒå¹³å°">2.1 å®éªŒå¹³å°</h3><ol><li><strong>æ— äººæœºå¹³å°</strong>ï¼šDJI Manifold2-C</li><li><strong>åŠ¨æ€è§†è§‰ä¼ æ„Ÿå™¨</strong>ï¼šIniVation DVXplorer</li><li><strong>æ·±åº¦ç›¸æœº</strong>ï¼šIntel Realsense D435i</li><li><strong>è‡ªåŠ¨é©¾é©¶é£è¡Œæ§åˆ¶å™¨</strong>ï¼šCUAV Nora Autopilot Flight Controller</li><li><strong>æ— äººæœºæ¡†æ¶</strong>ï¼šDJI Frame Wheel F450</li></ol><h3 id="2-2-å®éªŒç¯å¢ƒ">2.2 å®éªŒç¯å¢ƒ</h3><ol><li>Ubuntu 20.04</li><li>ROS neotic</li><li>Ceres Solverï¼šã€[å®‰è£…æ•™ç¨‹](<a href="http://ceres-solver.org/installation.html">Installation â€” Ceres Solver (ceres-solver.org)</a>)ã€‘</li><li>DV-ROSé©±åŠ¨ï¼š<a href="https://gitlab.com/inivation/dv/dv-ros">iniVation AG / dv-core / dv-ros Â· GitLab</a></li><li>OpenCV&amp;Open_Contribï¼šã€<a href="https://docs.opencv.org/4.8.0/d7/d9f/tutorial_linux_install.html">å®‰è£…æ•™ç¨‹</a>ã€‘ã€<a href="https://blog.csdn.net/qq_41035283/article/details/120179578">OpenCVï¼šå¿«é€Ÿé«˜æ•ˆè§£å†³cmakeæ—¶çš„ippicvã€face_landmark.datç­‰æ–‡ä»¶ä¸‹è½½å¤±è´¥é—®é¢˜_opencv tbbä¸‹è½½å¤±è´¥_RuiH.AIçš„åšå®¢-CSDNåšå®¢</a>ã€‘</li></ol>]]></content>
    
    
      
      
    <summary type="html">

	&lt;div class=&quot;row&quot;&gt;
    &lt;embed src=&quot;https://mybog.s3.bitiful.net/ros/word/FAST-Dynamic-Vision.pdf&quot; width=&quot;100%&quot; height=&quot;550&quot; type=&quot;applicat</summary>
      
    
    
    
    <category term="ç¬”è®°" scheme="https://www.mgodmonkey.cn/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="ç®—æ³•" scheme="https://www.mgodmonkey.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>æ— äººæœºåŸºäºNOKOVåŠ¨æ•ç³»ç»Ÿè·å–ä½ç½®æ•°æ®</title>
    <link href="https://www.mgodmonkey.cn/posts/282d4d3d.html"/>
    <id>https://www.mgodmonkey.cn/posts/282d4d3d.html</id>
    <published>2023-08-15T01:59:22.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ç¯å¢ƒ</p><ul><li><p>æœºè½½ç”µè„‘</p><ul><li>ç³»ç»Ÿï¼š<strong>Ubuntu20.04 LST</strong></li><li>ROS1ï¼š<strong>noetic</strong></li><li>é£æ§ï¼š<strong>PX4</strong></li><li><strong>mavros</strong></li><li><strong>QGroundControl</strong></li></ul></li><li><p>åŠ¨æ•ç³»ç»Ÿç”µè„‘</p><ul><li>åŠ¨æ•é…å¥—è½¯ä»¶ï¼š<strong>XING-NOKOV</strong></li></ul></li></ul><p><strong>å…³äºç³»ç»Ÿã€PX4ã€mavrosã€QGroundContorlç­‰å®‰è£…å‚è€ƒä¸‹é¢ä¸¤ç¯‡æ–‡ç« ï¼š</strong></p><ul><li><a href="https://www.mgodmonkey.cn/posts/eb82f52e.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-3-ã€ç¯å¢ƒä¸å¸¸ç”¨è½¯ä»¶å®‰è£…ã€‘ | MGodmonkeyã®ä¸–ç•Œ</a></li><li><a href="https://www.mgodmonkey.cn/posts/cfe889db.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-4-ã€PX4ä¸Gazeboå…¥é—¨ã€‘ | MGodmonkeyã®ä¸–ç•Œ</a></li></ul></blockquote><h2 id="1-å‡†å¤‡å·¥ä½œ">1. å‡†å¤‡å·¥ä½œ</h2><h3 id="1-1-åŠ¨æ•ç³»ç»Ÿç”µè„‘">1.1 åŠ¨æ•ç³»ç»Ÿç”µè„‘</h3><blockquote><p>æ‰“å¼€åŠ¨æ•ç³»ç»Ÿè½¯ä»¶<strong>XING-NOKOV</strong>ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œ</p></blockquote><ul><li>æ ‡å®šä¸è´´ç‚¹ï¼š<a href="https://appmnhim1019110.h5.xiaoeknow.com/p/course/video/v_61a6d4dfe4b0cc47c3c0eb69?type=2">æ•°æ®é‡‡é›†å‰å‡†å¤‡ï¼šæ ‡å®šä¸è´´ç‚¹ (xiaoeknow.com)</a></li><li>åˆšä½“åˆ›å»ºï¼šé”å¸§-&gt;shifté”®æ¡†é€‰5ä¸ªç‚¹-&gt;å³é”®åˆ›å»ºåˆšä½“ï¼Œåç§°: <strong>Tracker0</strong></li><li>ç½‘ç»œæ‹“æ‰‘ç»“æ„</li></ul><img src="https://s2.loli.net/2023/10/03/4V56flYRTGotDsP.png" alt="image-20230815110852790" style="zoom: 80%;" /><h3 id="1-2-æœºè½½ç”µè„‘">1.2 æœºè½½ç”µè„‘</h3><blockquote><p>é€šè¿‡<strong>ssh</strong>ç­‰å·¥å…·è¿æ¥ä¸Šæœºè½½ç”µè„‘ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œ</p></blockquote><ul><li>æ‰“å¼€<strong>QGroundContorl</strong>è¿æ¥ä¸Šæ— äººæœºé£æ§ï¼Œå¹¶è¿›è¡Œ<strong>PX4</strong>çš„é…ç½®</li></ul><blockquote><p><a href="https://docs.px4.io/master/zh/advanced_config/parameter_reference.html#EKF2_AID_MASK">EKF2_AID_MASK</a> = 24</p><p><a href="https://docs.px4.io/master/zh/advanced_config/parameter_reference.html#EKF2_HGT_MODE">EKF2_HGT_MODE</a> = 2</p></blockquote><img src="https://s2.loli.net/2023/10/03/wOWbxa1vqILhuP2.png" alt="image-20230815110304074" style="zoom: 80%;" /><img src="https://s2.loli.net/2023/10/03/GoVcaJCmhbNDMSW.png" alt="image-20230815110559457" style="zoom: 80%;" /><blockquote><p><strong>PX4</strong>é…ç½®éœ€è¦ä¿å­˜åé‡å¯<strong>QGroundContorl</strong>åæ‰èƒ½ç”Ÿæ•ˆ</p></blockquote><ul><li>å®‰è£…<strong>VRPN</strong></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-vrpn-client-ros<span class="comment"># è¿™é‡Œçš„noeticè¦æ ¹æ®æœºè½½ç”µè„‘çš„rosç‰ˆæœ¬è¿›è¡Œä¿®æ”¹</span></span><br></pre></td></tr></table></figure><h2 id="2-æ“ä½œæ­¥éª¤">2. æ“ä½œæ­¥éª¤</h2><blockquote><p>å…¬ä¼—å·è§†é¢‘å‚è€ƒï¼š<a href="https://appmnhim1019110.h5.xiaoeknow.com/p/course/video/v_62b2ea28e4b07bd2d7b14382?type=2">PX4ç³»ç»Ÿé…ç½®ä¸æ“ä½œæ¼”ç¤º (xiaoeknow.com)</a></p></blockquote><ol><li><p>é€šè¿‡<strong>VRPN</strong>å°†åŠ¨æ•æ•°æ®å¹¿æ’­å‡ºå»</p><p>æ‰“å¼€åŠ¨æ•ç³»ç»Ÿè½¯ä»¶<strong>XING-NOKOV</strong>-&gt;<strong>Setting</strong>-&gt;<strong>å‹¾é€‰VRPN Enabledï¼Œå¹¶é€‰ä¸­åˆšä½“Tracker0</strong>-&gt;<strong>æ•°æ®å•ä½è®¾ç½®ä¸ºmeters</strong></p></li><li><p>éªŒè¯<strong>æœºè½½ç”µè„‘</strong>æ˜¯å¦èƒ½è·å–åŠ¨æ•æ•°æ®ï¼Œè¿™é‡Œçš„<strong>10.1.1.198</strong>ä¸ºåŠ¨æ•ç”µè„‘<strong>IP</strong></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch vrpn_client_ros sample.launch server:=10.1.1.198</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>å¦‚æœæœªèƒ½è·å–åˆ°æ•°æ®ï¼Œå…ˆé€šè¿‡<code>ping 10.1.1.198</code>æ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç½‘ç»œé—®é¢˜</p></blockquote><ol start="3"><li><strong>æœºè½½ç”µè„‘</strong>ä¸Šè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å°†åŠ¨æ•æ•°æ®å‘é€ç»™<strong>åœ°é¢ç«™QGroundContorl</strong>ï¼Œè¿™é‡Œçš„<strong>10.1.1.150</strong>ä¸ºè¿è¡Œ<strong>QGroundContorl</strong>ä¸»æœºçš„<strong>IPåœ°å€</strong>ï¼Œä¸€èˆ¬ä¸ºè‡ªå·±ç¬”è®°æœ¬ç”µè„‘çš„<strong>IPåœ°å€</strong></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch mavros px4.launch gcs_url:=<span class="string">&quot;udp://@10.1.1.150:14550&quot;</span></span><br></pre></td></tr></table></figure><ol start="4"><li><strong>æœºè½½ç”µè„‘</strong>ä¸Šè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®ç°è¯é¢˜è½¬å‘</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun topic_tools relay /vrpn_client_node/Tracker1/pose /mavros/vision_pose/pose</span><br></pre></td></tr></table></figure><ol start="5"><li><p>éªŒè¯æ˜¯å¦æ­£å¸¸</p><ul><li>æŸ¥çœ‹åŠ¨æ•æ•°æ®æ˜¯å¦æ˜¾ç¤ºï¼š<strong>AnalyzeTools</strong> -&gt; <strong>MAVLINK Inspector</strong> -&gt; <strong>VISION_POSITION_ESTIMATE/ODOMETRY</strong></li></ul><img src="https://s2.loli.net/2023/10/03/G19cZar7JYCUF8b.png" alt="image-20230815153626076" style="zoom: 80%;" /><ul><li>æŸ¥çœ‹<strong>QGroundContorl</strong>ä¸­é£è¡Œæ¨¡å¼æ˜¯å¦èƒ½åˆ‡æ¢ä¸º<strong>å®šç‚¹æ¨¡å¼</strong></li></ul></li></ol><blockquote><p>å‚è€ƒï¼š</p><ul><li><p>PX4å®˜ç½‘ï¼š<a href="https://www.bitcraze.io/documentation/tutorials/"> åˆ©ç”¨è§†è§‰æˆ–è¿åŠ¨æ•æ‰ç³»ç»Ÿè¿›è¡Œä½ç½®ä¼°è®¡</a></p></li><li><p>Nokovåº”ç”¨ç›¸å…³åšå®¢ï¼š</p><ul><li><p><a href="https://crazyswarm.readthedocs.io/en/latest/index.html">Pixhawk+PX4+NOKOV+C++</a><a href="https://crazyswarm.readthedocs.io/en/latest/index.html">SDKåŠ¨æ•é£æ§æ–¹æ¡ˆ</a></p></li><li><p><a href="https://blog.csdn.net/MocapLeader/article/details/125095669?spm=1001.2014.3001.5501">Pixhawk+PX4+NOKOV+VRPNåŠ¨æ•é£æ§æ–¹æ¡ˆ</a></p></li></ul></li><li><p>NOKOV githubï¼š<a href="https://github.com/NOKOV-MOCAP">https://github.com/NOKOV-MOCAP</a></p></li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;ç¯å¢ƒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æœºè½½ç”µè„‘&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç³»ç»Ÿï¼š&lt;strong&gt;Ubuntu20.04 LST&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;ROS1ï¼š&lt;strong&gt;noetic&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;é£æ§ï¼š</summary>
      
    
    
    
    <category term="çŸ¥è¯†åˆ†äº«" scheme="https://www.mgodmonkey.cn/categories/%E7%9F%A5%E8%AF%86%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-4-ã€PX4ä¸Gazeboå…¥é—¨ã€‘</title>
    <link href="https://www.mgodmonkey.cn/posts/cfe889db.html"/>
    <id>https://www.mgodmonkey.cn/posts/cfe889db.html</id>
    <published>2023-08-10T22:46:31.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p><strong>å‰è¨€:</strong> ä»ä¸Šä¸€ç¯‡çš„æ–‡ç«  <a href="https://www.mgodmonkey.cn/posts/eb82f52e.html">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-3-ã€ç¯å¢ƒä¸å¸¸ç”¨è½¯ä»¶å®‰è£…ã€‘ | MGodmonkeyã®ä¸–ç•Œ</a> ä¸­æˆ‘ä»¬çš„æœºè½½ç”µè„‘å·²ç»å®‰è£…äº†ç³»ç»Ÿå’Œå¸¸ç”¨çš„è½¯ä»¶ï¼Œè¿™ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å…¥é—¨ä¸€ä¸‹æ— äººæœºå¸¸ç”¨çš„å¼€æºé£æ§<strong>PX4</strong>ï¼Œä»¥åŠ<strong>ROS</strong>ä¸­æ— äººæœºçš„ä»¿çœŸ</p></blockquote><h2 id="1-PX4çš„å®‰è£…">1. PX4çš„å®‰è£…</h2><h3 id="1-1-PX4å›ºä»¶ä»£ç çš„ä¸‹è½½ä¸ç¼–è¯‘">1.1 PX4å›ºä»¶ä»£ç çš„ä¸‹è½½ä¸ç¼–è¯‘</h3><blockquote><p><strong>æ³¨ï¼šæ¨èä½¿ç”¨å·²ç»é…ç½®å¥½çš„PX4å›ºä»¶åŒ…ï¼ŒPX4ç‰ˆæœ¬==1.12ï¼š<a href="https://pan.quark.cn/s/9964d20e6c40">https://pan.quark.cn/s/9964d20e6c40</a> æå–ç ï¼šg3ij</strong></p></blockquote><ul><li><s>é€šè¿‡githubä¸‹è½½PX4ä»£ç ï¼ˆä¸‹è½½æ…¢æ—¶å¯ä»¥æ‰¾ä¸€äº›githubçš„é•œåƒç½‘ç«™ï¼‰</s></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/PX4/PX4-Autopilot.git --recursive</span><br></pre></td></tr></table></figure><ul><li>å®‰è£…å¿…è¦çš„ä¾èµ–</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install protobuf-compiler libeigen3-dev libopencv-dev -y</span><br><span class="line"></span><br><span class="line">bash ./PX4-Autopilot/Tools/setup/ubuntu.sh</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœå®‰è£…PX4çš„ç¯å¢ƒæ¯”è¾ƒçº¯å‡€ï¼Œæ¯”å¦‚è¯´<strong>åˆšè£…çš„Ubuntuç³»ç»Ÿï¼Œè¿è¡Œbashè„šæœ¬è¿‡ç¨‹ä¸­ä¼šæŠ¥å¥½å‡ æ¬¡é”™</strong>ï¼å› ä¸ºä»–éœ€è¦å®‰è£…çš„ä¾èµ–åŒ…æ¯”è¾ƒå¤šã€‚è§£å†³æ–¹æ³•å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå³ <strong>ã€ç¡®å®šå¯¼è‡´æŠ¥é”™çš„ä¾èµ–åŒ…åï¼Œç½‘ä¸Šæ£€ç´¢å®‰è£…è¿™ä¸ªä¾èµ–åŒ…çš„æ–¹æ³•ã€‘</strong>ã€‚æˆ‘ä»¬åªéœ€è¦å°†å¯¼è‡´æŠ¥é”™çš„ä¾èµ–åŒ…éƒ½å®‰è£…å¥½äº†ï¼Œè¿è¡Œ.shæ–‡ä»¶æ—¶å°±èƒ½ä¼šè·³è¿‡ä»–ä»¬ã€‚</p></blockquote><p>åœ¨å®‰è£…è¿‡ç¨‹ä¸­ç¡®è®¤å¹¶é€šè¿‡æ‰€æœ‰çš„æç¤ºï¼Œå³å‡ºç°ä»¥ä¸‹æç¤ºï¼Œå®Œæˆåé‡æ–°å¯åŠ¨è®¡ç®—æœºã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Relogin or reboot computer before attempting to build NuttX targets</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœåœ¨ä¸‹è½½æˆ–ç¼–è¯‘è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜éƒ½å¯ä»¥å‚è€ƒä¸‹é¢çš„åšå®¢ï¼š</p><ul><li><a href="https://blog.csdn.net/Iamsonice/article/details/120420066?spm=1001.2014.3001.5502">Ubuntu20.04æˆ–18.04ä¸‹PX4ï¼ˆpixhawkï¼‰æºç ç¼–è¯‘ç¯å¢ƒé…ç½®æ•™ç¨‹ï¼ŒåŠæ„å»ºä»£ç å„ç§é”™è¯¯è§£å†³åŠæ³•_ubuntu20å®‰è£…px4_Iamsoniceçš„åšå®¢-CSDNåšå®¢</a></li><li><a href="https://zhuanlan.zhihu.com/p/438147439">PX4å›ºä»¶ä¸‹è½½åŠç¯å¢ƒæ­å»ºå°è®°ï¼ˆUbuntu 18.04ï¼‰ - çŸ¥ä¹ (zhihu.com)</a></li></ul></blockquote><ul><li>jmavsimä»¿çœŸç¯å¢ƒç¼–è¯‘</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> PX4-Autopilot   </span><br><span class="line">make px4_fmu-v3_default</span><br><span class="line">make px4_sitl jmavsim <span class="comment">#jmavsimä»¿çœŸç¯å¢ƒ</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ç»“æŸä¼šè‡ªåŠ¨å¯åŠ¨ä»¿çœŸï¼Œå‡ºç°ä¸€ä¸‹ç”»é¢åˆ™è¯´æ˜ç¼–è¯‘æ­£å¸¸</p><img src="https://s2.loli.net/2023/10/03/FkoJaVUWDzgyZ7w.png" alt="image-20230811151646569" style="zoom:80%;" /><ul><li>gazeboä»¿çœŸç¼–è¯‘</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make px4_sitl gazebo </span><br></pre></td></tr></table></figure><p>å‡ºç°gazeboç•Œé¢ä»£è¡¨æˆåŠŸ</p><img src="https://s2.loli.net/2023/10/03/fzrQvZhuCaUo24m.png" alt="image-20230811154610450" style="zoom:50%;" /><h2 id="2-Gazeboä»¿çœŸ">2. Gazeboä»¿çœŸ</h2><blockquote><p>ä»¿çœŸä¸€èˆ¬ç”¨äºéªŒè¯ç®—æ³•ï¼Œæ¯”è¾ƒåƒæ€§èƒ½ï¼Œæœºè½½ç”µè„‘ä¸Šè¿è¡Œä»¿çœŸå¸§ç‡ä¼šæ¯”è¾ƒä½ï¼Œå› æ­¤ä»¿çœŸæ¨èåœ¨æ€§èƒ½æ¯”è¾ƒå¥½çš„ç”µè„‘ä¸Šè¿è¡Œï¼Œæ¨èä½¿ç”¨<strong>WSL2</strong>æˆ–è€…<strong>è™šæ‹Ÿæœº</strong></p></blockquote><ul><li>å‘<code>~/.bashrc</code>ä¸­æ·»åŠ launchå¯åŠ¨è·¯å¾„</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## æ–‡ä»¶å¤¹çš„è·¯å¾„æˆ–æœ‰å‡ºå…¥ï¼Œä»¥è‡ªå·±çš„ä¸ºå‡†è¿›è¡Œä¿®æ”¹</span></span><br><span class="line"><span class="built_in">source</span> ~/PX4-Autopilot/Tools/setup_gazebo.bash ~/PX4-Autopilot/ ~/PX4-Autopilot/build/px4_sitl_default</span><br><span class="line"><span class="built_in">export</span> ROS_PACKAGE_PATH=<span class="variable">$ROS_PACKAGE_PATH</span>:~/PX4-Autopilot</span><br><span class="line"><span class="built_in">export</span> ROS_PACKAGE_PATH=<span class="variable">$ROS_PACKAGE_PATH</span>:~/PX4-Autopilot/Tools/sitl_gazebo</span><br></pre></td></tr></table></figure><p>æ·»åŠ æˆåŠŸåæ‰§è¡Œ<code>source ~/.bashrc</code>æ¥ç”Ÿæ•ˆè„šæœ¬</p><ul><li>æµ‹è¯•</li></ul><p>å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å‡ æ¡å‘½ä»¤æ¥æµ‹è¯•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œç»“æœå’Œ make px4_sitl gazeboä¸€æ ·</span></span><br><span class="line">roslaunch px4 mavros_posix_sitl.launch</span><br><span class="line"><span class="comment"># æˆ–è€…ä¸‹é¢è¿™ä¸ªlaunchï¼Œç»“æœåœºæ™¯æ›´ä¸°å¯Œ</span></span><br><span class="line">roslaunch px4 fast_test.launch</span><br></pre></td></tr></table></figure><h2 id="3-QGCåœ°é¢ç«™">3. QGCåœ°é¢ç«™</h2><ul><li>å®‰è£…QGCåœ°é¢ç«™ï¼Œå¯ä»¥åœ¨ä¸‹é¢çš„ç½‘å€ä¸‹è½½</li></ul><blockquote><p><a href="https://docs.qgroundcontrol.com/master/en/qgc-user-guide/getting_started/download_and_install.html">https://docs.qgroundcontrol.com/master/en/qgc-user-guide/getting_started/download_and_install.html</a></p></blockquote><ul><li>å®‰è£…ä¾èµ–</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -a -G dialout <span class="variable">$USER</span></span><br><span class="line">sudo apt-get remove modemmanager -y</span><br><span class="line">sudo apt install gstreamer1.0-plugins-bad gstreamer1.0-libav gstreamer1.0-gl -y</span><br><span class="line">sudo apt install libfuse2 -y</span><br><span class="line">sudo apt install libxcb-xinerama0 libxkbcommon-x11-0 libxcb-cursor0 -y</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨é”€å¹¶å†æ¬¡ç™»å½•ä»¥å¯ç”¨å¯¹ç”¨æˆ·æƒé™çš„æ›´æ”¹</p></blockquote><ul><li>é€‰æ‹© Appimageæ ¼å¼ä¸‹è½½ï¼š<a href="https://d176tv9ibo4jno.cloudfront.net/latest/QGroundControl.AppImage">ä¸‹è½½åœ°å€</a></li><li>æ·»åŠ æƒé™å¹¶å¯åŠ¨</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x ./QGroundControl.AppImage</span><br><span class="line">./QGroundControl.AppImage</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/10/03/RtLNCm71qybSZXB.png" alt="image-20230811163810309"></p><h2 id="4-MOVROSçš„åŸºæœ¬ä½¿ç”¨">4. MOVROSçš„åŸºæœ¬ä½¿ç”¨</h2><p>ä½¿ç”¨<strong>MOVROS</strong>æ¥å®ç°<strong>PX4</strong>é£æ§æ— äººæœºçš„è‡ªä¸»å¯åŠ¨ã€æ‚¬åœå’Œå®šç‚¹é£è¡Œ</p><p><video width="100%" autoplay="autoplay" controls="controls" __idm_id__="1105922"><source src="https://docs.px4.io/main/assets/media/gazebo_offboard.d8b1cf73.webm" type="video/webm"></video></p><ol><li>åˆ›å»ºå·¥ä½œç©ºé—´ä»¥åŠåŠŸèƒ½åŒ…</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line">catkin_init_workspace</span><br><span class="line">catkin_create_pkg offboard geometry_msgs mavros_msgs std_msgs rospy roscpp</span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºæ–‡ä»¶<code>offboard/src/offb_node.cpp</code>å¹¶æ·»åŠ ä¸‹é¢çš„ä»£ç </li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @file offb_node.cpp</span><br><span class="line"> * @brief Offboard control example node, written with MAVROS version 0.19.x, PX4 Pro Flight</span><br><span class="line"> * Stack and tested <span class="keyword">in</span> Gazebo Classic SITL</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="comment">#include &lt;ros/ros.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;geometry_msgs/PoseStamped.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;mavros_msgs/CommandBool.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;mavros_msgs/SetMode.h&gt;</span></span><br><span class="line"><span class="comment">#include &lt;mavros_msgs/State.h&gt;</span></span><br><span class="line"></span><br><span class="line">mavros_msgs::State current_state;</span><br><span class="line">void state_cb(const mavros_msgs::State::ConstPtr&amp; msg)&#123;</span><br><span class="line">    current_state = *msg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char **argv)</span><br><span class="line">&#123;</span><br><span class="line">    ros::init(argc, argv, <span class="string">&quot;offb_node&quot;</span>);</span><br><span class="line">    ros::NodeHandle nh;</span><br><span class="line"></span><br><span class="line">    ros::Subscriber state_sub = nh.subscribe&lt;mavros_msgs::State&gt;</span><br><span class="line">            (<span class="string">&quot;mavros/state&quot;</span>, 10, state_cb);</span><br><span class="line">    ros::Publisher local_pos_pub = nh.advertise&lt;geometry_msgs::PoseStamped&gt;</span><br><span class="line">            (<span class="string">&quot;mavros/setpoint_position/local&quot;</span>, 10);</span><br><span class="line">    ros::ServiceClient arming_client = nh.serviceClient&lt;mavros_msgs::CommandBool&gt;</span><br><span class="line">            (<span class="string">&quot;mavros/cmd/arming&quot;</span>);</span><br><span class="line">    ros::ServiceClient set_mode_client = nh.serviceClient&lt;mavros_msgs::SetMode&gt;</span><br><span class="line">            (<span class="string">&quot;mavros/set_mode&quot;</span>);</span><br><span class="line"></span><br><span class="line">    //the setpoint publishing rate MUST be faster than 2Hz</span><br><span class="line">    ros::Rate rate(20.0);</span><br><span class="line"></span><br><span class="line">    // <span class="built_in">wait</span> <span class="keyword">for</span> FCU connection</span><br><span class="line">    <span class="keyword">while</span>(ros::ok() &amp;&amp; !current_state.connected)&#123;</span><br><span class="line">        ros::spinOnce();</span><br><span class="line">        rate.sleep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    geometry_msgs::PoseStamped pose;</span><br><span class="line">    pose.pose.position.x = 0;</span><br><span class="line">    pose.pose.position.y = 0;</span><br><span class="line">    pose.pose.position.z = 2;</span><br><span class="line"></span><br><span class="line">    //send a few setpoints before starting</span><br><span class="line">    <span class="keyword">for</span>(int i = 100; ros::ok() &amp;&amp; i &gt; 0; --i)&#123;</span><br><span class="line">        local_pos_pub.publish(pose);</span><br><span class="line">        ros::spinOnce();</span><br><span class="line">        rate.sleep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    mavros_msgs::SetMode offb_set_mode;</span><br><span class="line">    offb_set_mode.request.custom_mode = <span class="string">&quot;OFFBOARD&quot;</span>;</span><br><span class="line"></span><br><span class="line">    mavros_msgs::CommandBool arm_cmd;</span><br><span class="line">    arm_cmd.request.value = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    ros::Time last_request = ros::Time::now();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(ros::ok())&#123;</span><br><span class="line">        <span class="keyword">if</span>( current_state.mode != <span class="string">&quot;OFFBOARD&quot;</span> &amp;&amp;</span><br><span class="line">            (ros::Time::now() - last_request &gt; ros::Duration(5.0)))&#123;</span><br><span class="line">            <span class="keyword">if</span>( set_mode_client.call(offb_set_mode) &amp;&amp;</span><br><span class="line">                offb_set_mode.response.mode_sent)&#123;</span><br><span class="line">                ROS_INFO(<span class="string">&quot;Offboard enabled&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            last_request = ros::Time::now();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>( !current_state.armed &amp;&amp;</span><br><span class="line">                (ros::Time::now() - last_request &gt; ros::Duration(5.0)))&#123;</span><br><span class="line">                <span class="keyword">if</span>( arming_client.call(arm_cmd) &amp;&amp;</span><br><span class="line">                    arm_cmd.response.success)&#123;</span><br><span class="line">                    ROS_INFO(<span class="string">&quot;Vehicle armed&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                last_request = ros::Time::now();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        local_pos_pub.publish(pose);</span><br><span class="line"></span><br><span class="line">        ros::spinOnce();</span><br><span class="line">        rate.sleep();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">return</span> 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>ä»£ç è§£é‡Š</strong>æˆ–è€…<strong>pythonç‰ˆæœ¬</strong>è§ï¼š<a href="https://docs.px4.io/main/zh/ros/mavros_offboard_cpp.html">MAVROS Offboard æ§åˆ¶ç¤ºä¾‹ (C++) | PX4 è‡ªåŠ¨é©¾é©¶ç”¨æˆ·æŒ‡å—</a></p></blockquote><ol start="3"><li>ä¿®æ”¹<strong>CMakeLists.txt</strong>ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤è¡Œ</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">add_executable(offboard src/offb_node.cpp)</span><br><span class="line">target_link_libraries(offboard <span class="variable">$&#123;catkin_LIBRARIES&#125;</span>)</span><br></pre></td></tr></table></figure><ol start="4"><li>ç¼–è¯‘</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/catkin_ws</span><br><span class="line">catkin_make</span><br><span class="line"><span class="built_in">source</span> devel/setup.sh</span><br></pre></td></tr></table></figure><ol start="5"><li>å¯åŠ¨æ— äººæœºä»¿çœŸå¹¶è¿è¡ŒèŠ‚ç‚¹</li></ol><p>åœ¨ä¸€ä¸ªç»ˆç«¯ä¸­è¿è¡Œä¸‹é¢æŒ‡ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">roslaunch px4 fast_test.launch <span class="comment"># å¯åŠ¨ä»¿çœŸ</span></span><br></pre></td></tr></table></figure><p>åœ¨å¦ä¸€ä¸ªç»ˆç«¯ä¸­å¯åŠ¨èŠ‚ç‚¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rosrun offboard offboard</span><br></pre></td></tr></table></figure><blockquote><p>æ›´å¤š<strong>mavros</strong>çš„ä½¿ç”¨ä»¥åŠå†…ç½®çš„æ¶ˆæ¯ã€æœåŠ¡ç­‰ä½¿ç”¨è¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://wiki.ros.org/mavros/">mavros - ROS Wiki</a></p></blockquote><blockquote><p><strong>æ³¨ï¼šgazeboä»¿çœŸæ—¶å¯èƒ½é‡åˆ°çš„é—®é¢˜</strong></p><ol><li><strong>æ— äººæ— æ³•æ§åˆ¶æ—¶çš„BUG</strong></li></ol><p>gazeboä»¿çœŸç»ˆç«¯æ˜¾ç¤ºå¦‚ä¸‹å¹¶ä¸æ–­é‡å¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMD: Unexpected <span class="built_in">command</span> 176, result 0</span><br><span class="line">INFO [commander] Failsafe mode deactivated</span><br><span class="line">INFO [commander] Failsafe mode activated</span><br></pre></td></tr></table></figure><p>ä¸”offboardèŠ‚ç‚¹ç«¯å£ä¸æ–­å‡ºç°å¦‚ä¸‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ INFO] [1705027176.310554463, 727.708000000]: Offboard enabled</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/01/12/I8xSiO7z9fbYdrv.png" alt=""></p><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><ul><li><p>åœ¨å‰é¢çš„ä¸‰ä¸ªç»ˆç«¯è¿è¡Œçš„æ—¶å€™ï¼Œæ‰“å¼€QGCåœ°é¢ç«™ï¼Œåœ¨å‚æ•°ä¸­æœç´¢<code>COM_RCL_EXCEPT</code></p></li><li><p>å°†<code>COM_RCL_EXCEPT</code>å‚æ•°æ”¹ä¸º<code>4</code>å¹¶ä¿å­˜</p></li></ul><img src="https://s2.loli.net/2024/01/12/31SIkYCRsGbg69F.png" style="zoom: 80%;" /><p><strong>å‚è€ƒåšå®¢ï¼š</strong></p><p><a href="https://blog.csdn.net/weixin_45031928/article/details/135142557">ã€PX4-AutoPilotæ•™ç¨‹-Offboardã€‘MAVROSåŠŸèƒ½åŒ…æ§åˆ¶æ— äººæœºè¿›å…¥offboardæ¨¡å¼é£è¡Œå®˜æ–¹ä¾‹ç¨‹ï¼ˆC++å®ç°ï¼‰_mavros px4 å®ä¾‹-CSDNåšå®¢</a></p><ol start="2"><li><strong>å¯åŠ¨single_vehicle_spawn_ssdf.launchæ—¶æŠ¥é”™</strong></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RLException: <span class="keyword">while</span> processing /home/laohanba/PX4-Autopilot/launch/single_vehicle_spawn_ssdf.launch:</span><br><span class="line">Invalid &lt;param&gt; tag: Cannot load <span class="built_in">command</span> parameter [model_description]: no such <span class="built_in">command</span> [[<span class="string">&#x27;xmlstarlet&#x27;</span>, <span class="string">&#x27;ed&#x27;</span>, <span class="string">&#x27;-d&#x27;</span>, <span class="string">&#x27;//plugin[@name=&quot;mavlink_interface&quot;]/mavlink_tcp_port&#x27;</span>, <span class="string">&#x27;-s&#x27;</span>, <span class="string">&#x27;//plugin[@name=&quot;mavlink_interface&quot;]&#x27;</span>, <span class="string">&#x27;-t&#x27;</span>, <span class="string">&#x27;elem&#x27;</span>, <span class="string">&#x27;-n&#x27;</span>, <span class="string">&#x27;mavlink_tcp_port&#x27;</span>, <span class="string">&#x27;-v&#x27;</span>, <span class="string">&#x27;4560&#x27;</span>, <span class="string">&#x27;/home/laohanba/PX4-Autopilot/Tools/sitl_gazebo/models/iris_D435i/iris_D435i.sdf&#x27;</span>]]. </span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install xmlstarlet</span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>å‚è€ƒï¼š</strong></p><ul><li><a href="https://docs.px4.io/main/zh/dev_setup/dev_env_linux_ubuntu.html">Ubuntu LTS/Debian Linux çš„å¼€å‘ç¯å¢ƒ | PX4 è‡ªåŠ¨é©¾é©¶ç”¨æˆ·æŒ‡å—</a></li><li><a href="https://docs.qq.com/doc/DZlNOVnhaV0hkaktL">PX4å›ºä»¶+mavros+QGCåœ°é¢ç«™å®‰è£… (qq.com)</a></li><li><a href="https://blog.csdn.net/qq_38768959/article/details/106041494">PX4ä»æ”¾å¼ƒåˆ°ç²¾é€šï¼ˆäºŒï¼‰ï¼šubuntu18.04é…ç½®px4ç¼–è¯‘ç¯å¢ƒåŠmavrosç¯å¢ƒ_è¶…ç»´ç©ºé—´ç§‘æŠ€çš„åšå®¢-CSDNåšå®¢</a></li><li><a href="https://www.ncnynl.com/archives/201709/2009.html">PX4å¼€å‘æŒ‡å—-2.2.2.Linux - åˆ›å®¢æ™ºé€ /çˆ±æŠ˜è…¾æ™ºèƒ½æœºå™¨äºº (ncnynl.com)</a></li></ul></blockquote>]]></content>
    
    
    <summary type="html">Â å‰è¨€:Â ä»ä¸Šä¸€ç¯‡çš„æ–‡ç« Â ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-3-ã€ç¯å¢ƒä¸å¸¸ç”¨è½¯ä»¶å®‰è£…ã€‘Â |Â MGodmonkeyã®ä¸–ç•ŒÂ ä¸­æˆ‘ä»¬çš„æœºè½½ç”µè„‘å·²ç»å®‰è£…äº†ç³»ç»Ÿå’Œå¸¸ç”¨çš„è½¯ä»¶ï¼Œè¿™ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å…¥é—¨ä¸€ä¸‹æ— äººæœºå¸¸ç”¨çš„å¼€æºé£æ§PX4ï¼Œä»¥åŠROSä¸­æ— äººæœºçš„ä»¿çœŸÂ Â 1.Â PX4çš„å®‰è£…Â 1.1Â PX4å›ºä»¶ä»£ç çš„ä¸‹è½½ä¸ç¼–è¯‘Â Â é€šè¿‡githubä¸‹è½½PX4ä»£ç ï¼ˆä¸‹è½½æ…¢æ—¶å¯ä»¥æ‰¾ä¸€äº›githubçš„é•œåƒç½‘ç«™ï¼‰Â Â gitÂ cloneÂ https...</summary>
    
    
    
    <category term="ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº" scheme="https://www.mgodmonkey.cn/categories/%E4%BB%8E0%E5%85%A5%E9%97%A8%E8%87%AA%E4%B8%BB%E7%A9%BA%E4%B8%AD%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-2-2ã€æ— äººæœºç¡¬ä»¶é€‰å‹-PX4ç¯‡ã€‘</title>
    <link href="https://www.mgodmonkey.cn/posts/39efaa44.html"/>
    <id>https://www.mgodmonkey.cn/posts/39efaa44.html</id>
    <published>2023-08-10T07:18:29.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å¸¸ç”¨èµ„æ–™ä»¥åŠå®˜æ–¹ç½‘ç«™">1. å¸¸ç”¨èµ„æ–™ä»¥åŠå®˜æ–¹ç½‘ç«™</h2><ul><li><p>æ— äººæœºé£æ§PX4ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œï¼ˆæ— äººæœºåŸºæœ¬è®¾ç½®ã€åœ°é¢ç«™ä½¿ç”¨æ•™ç¨‹ã€è½¯ç¡¬ä»¶æ­å»ºç­‰ï¼‰ï¼š<a href="https://docs.px4.io/main/en/">https://docs.px4.io/main/en/</a></p></li><li><p>PX4å›ºä»¶å¼€æºåœ°å€ï¼š<a href="https://github.com/PX4/PX4-Autopilot">https://github.com/PX4/PX4-Autopilot</a></p></li><li><p>é£æ§ç¡¬ä»¶ã€æ•°ä¼ æ¨¡å—ã€GPSã€åˆ†ç”µæ¿ç­‰â€”holybroå®˜ç½‘ï¼š<a href="http://www.holybro.com/">http://www.holybro.com/</a></p></li><li><p>æ— äººæœºåŠ¨åŠ›ç³»ç»Ÿâ€“TMotorå®˜ç½‘ï¼š<a href="https://uav-cn.tmotor.com/">https://uav-cn.tmotor.com/</a></p></li><li><p>æ— äººæœºåœ¨çº¿è¯¾ç¨‹ã€å¼€æºé¡¹ç›®â€”é˜¿æœ¨å®éªŒå®¤ï¼š<a href="https://amovlab.com/">https://amovlab.com/</a></p></li></ul><h2 id="2-æœºæ¶æ¨è-å¯äºŒæ¬¡å¼€å‘æ•´æœºæ— äººæœº">2. æœºæ¶æ¨è/å¯äºŒæ¬¡å¼€å‘æ•´æœºæ— äººæœº</h2><ul><li><p>Holybroæ— äººæœºï¼ˆæ•´æœºæ— äººæœºä»¥åŠæ— äººæœºæœºæ¶æ•£ä»¶ï¼‰ï¼š<a href="https://shop.holybro.com/c/development-kit_0502/2.html">ã€å‰å¾€ã€‘</a></p></li><li><p>é˜¿æœ¨å®éªŒå®¤æ— äººæœºï¼š<a href="https://amovlab.taobao.com/category-1552064747.htm?spm=a1z10.5-c-s.0.0.37db7005JWCIiQ&amp;search=y&amp;parentCatId=1507493272&amp;parentCatName=%BF%AA%D4%B4%CF%EE%C4%BF%D3%EB%D5%FB%BB%FA&amp;catName=PX4%CF%B5%C1%D0">ã€å‰å¾€ã€‘</a></p></li><li><p>FPVæ¢¦å·¥å‚ï¼ˆæœºæ¶ï¼Œä¸“é—¨ä¸ºFPVç«èµ›è®¾è®¡ï¼‰ï¼š<a href="https://shop67894743.taobao.com/?spm=a230r.7195193.1997079397.2.656a645dRmmwor">ã€å‰å¾€ã€‘</a></p></li></ul><h2 id="3-æ— äººæœºå„ä¸ªé‡è¦æ¨¡å—åŠŸèƒ½åŠé€‰å‹">3. æ— äººæœºå„ä¸ªé‡è¦æ¨¡å—åŠŸèƒ½åŠé€‰å‹</h2><p><img src="https://s2.loli.net/2023/10/03/ACUnrlyWkYcb5sT.png" alt="image-20230810152216490"></p><h3 id="3-1-èˆªæ¨¡ç”µæ± ">3.1 èˆªæ¨¡ç”µæ± </h3><p><img src="https://s2.loli.net/2023/10/03/2sDSLa5M7NF438H.png" alt="image-20230810152716271"></p><ul><li>ä¸»è¦çš„å‚æ•°åŠé€‰å‹æ¨è</li></ul><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:center">è¯´æ˜</th><th style="text-align:center">æ¨èå€¼</th></tr></thead><tbody><tr><td style="text-align:center">å®¹é‡</td><td style="text-align:center">ç”µæ± å®¹é‡ï¼Œè¡¨ç¤ºç”µæ± å¯ä»¥æ”¾å‡ºçš„ç”µé‡å¤šå°‘ï¼Œä»¥mhä¸ºå•ä½</td><td style="text-align:center">5000mAH</td></tr><tr><td style="text-align:center">ç”µèŠ¯èŠ‚æ•°</td><td style="text-align:center">ç”µèŠ¯æ•°é‡ï¼Œå†³å®šäº†ç”µæ± è¾“å‡ºç”µå‹å¤§å°ã€‚é€šå¸¸æœ‰3S,4S,6Sç­‰ï¼Œå¦‚4Sç”µæ± ä»£è¡¨ä¸€å—ç”µæ± å†…æœ‰4å—ç”µèŠ¯ï¼Œ4å—ç”µèŠ¯ä¸²è”è¾“å‡ºï¼Œæ¯ä¸ªç”µèŠ¯æœ€é«˜è¾“å‡ºç”µå‹4.2V,åˆ™è¯¥ç”µæ± æœ€ç»ˆæœ€å¤§è¾“å‡º16.8V</td><td style="text-align:center">4S</td></tr><tr><td style="text-align:center">æ”¾ç”µå€ç‡</td><td style="text-align:center">ç”µæ± çš„å€ç‡ç‰¹æ€§æ˜¯æŒ‡çš„ç”µæ± çš„å……æ”¾ç”µæ€§èƒ½ï¼Œå€ç‡è¶Šé«˜çš„èƒ½å¤Ÿæ‰¿å—çš„æ”¾ç”µç”µæµå°±è¶Šå¤§ï¼Œå€ç‡çš„å•ä½æ˜¯C</td><td style="text-align:center">50c/60c</td></tr><tr><td style="text-align:center">æ¥å£</td><td style="text-align:center">ç”µæ± è¾“å‡ºæ¥å£ï¼Œé€šå¸¸æœ‰XT60,XT40,Tæ’ç­‰</td><td style="text-align:center">XT60</td></tr></tbody></table><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.22.d2f349b7KJtvRq&amp;id=681311943685&amp;ns=1&amp;abbucket=9#detail">ã€å‰å¾€ã€‘</a></p></blockquote><h3 id="3-2-é£æ§">3.2 é£æ§</h3><p><img src="https://s2.loli.net/2023/10/03/iKnzoFpG6ZfcjXq.png" alt="image-20230810153009268"></p><ul><li>ä»‹ç»</li></ul><blockquote><p>**é£æ§ï¼š**é£è¡Œæ§åˆ¶å™¨ï¼Œç”¨äºé£è¡Œå™¨åº•å±‚æ§åˆ¶ï¼Œå¦‚æ— äººæœºå§¿æ€ã€é«˜åº¦ä»¥åŠä½ç½®ç­‰ã€‚åŒæ—¶ä¹Ÿå¯ä»¥è¿æ¥ä¼ æ„Ÿå™¨ä»¥åŠå…¶å®ƒæ¨¡å—ï¼Œå¦‚GPSã€é¥æ§å™¨æ¥æ”¶æœºä»¥åŠæ•°ä¼ ç­‰ã€‚</p></blockquote><ul><li><p>é€‰å‹æ¨è</p><ul><li>å‹å·ï¼š<strong>pixhawk 6C</strong></li><li>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://docs.px4.io/main/en/">ã€å‰å¾€ã€‘</a></li><li>æ•´ä½“ä»‹ç»åŠæ¥å£è¯´æ˜ï¼š<a href="https://docs.holybro.com/autopilot/pixhawk-6c/overview">ã€å‰å¾€ã€‘</a></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.16.1a6b466cVDqIXL&amp;id=679030751224&amp;ns=1&amp;abbucket=9#detail">ã€å‰å¾€ã€‘</a></p></blockquote></li></ul><h3 id="3-3-åˆ†ç”µæ¿">3.3 åˆ†ç”µæ¿</h3><p><img src="https://s2.loli.net/2023/10/03/Qty1glEGfW3LvYx.png" alt="image-20230810153520742"></p><ul><li>ä»‹ç»</li></ul><blockquote><p>**åˆ†ç”µæ¿ï¼š**åˆ†ç”µæ¿çš„ä½œç”¨æ˜¯å°†ç”µæ± ä¾›ç”µåˆ†é…ç»™å››ä¸ªç”µè°ƒï¼Œå¹¶ä¸”å°†é£æ§çš„æ§åˆ¶ä¿¡å·ä¼ é€’ç»™ç”µè°ƒã€‚</p></blockquote><ul><li><p>é€‰å‹æ¨è</p><ul><li>å‹å·ï¼š<strong>PM07</strong></li><li>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://docs.holybro.com/power-module-and-pdb/power-module/pm07-quick-start-guide">ã€å‰å¾€ã€‘</a></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼ˆå’Œé£æ§ä¸€èµ·è´­ä¹°ï¼‰ï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.16.1a6b466cVDqIXL&amp;id=679030751224&amp;ns=1&amp;abbucket=9#detail">ã€å‰å¾€ã€‘</a></p></blockquote></li></ul><h3 id="3-4-ç”µè°ƒ">3.4 ç”µè°ƒ</h3><ul><li>ä»‹ç»</li></ul><blockquote><p>**ç”µè°ƒï¼š**æ¥æ”¶æ§åˆ¶æŒ‡ä»¤å¹¶æ§åˆ¶ç”µæœºæ—‹è½¬ã€‚</p></blockquote><ul><li>è¯´æ˜</li></ul><blockquote><p>ç”µè°ƒæœ‰åˆ†ä½“å¼å’Œå››åˆä¸€ä¸¤ç§å‹å·ï¼Œå››åˆä¸€é¡¾åæ€ä¹‰å°±æ˜¯å°†å››ä¸ªåˆ†ä½“å¼ç”µè°ƒæ•´åˆåœ¨ä¸€å—PCBæ¿ä¸Šï¼Œå››åˆä¸€ç”µè°ƒå¸¸ç”¨äºç©¿è¶Šæœºä¸Šï¼Œè¿™é‡Œæ‰€ç»„è£…çš„å››æ—‹ç¿¼æ— äººæœºæ¨èä½¿ç”¨åˆ†ä½“å¼ç”µè°ƒã€‚</p></blockquote><p><img src="https://s2.loli.net/2023/10/03/6w43rKXPpZnMT1i.png" alt="image-20230810153806629"></p><p>é€‰å‹æ¨è</p><ul><li><p>å‹å·ï¼š<strong>F45A</strong></p></li><li><p>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://uav-cn.tmotor.com/html/2018/ESC_0410/76.html">ã€å‰å¾€ã€‘</a></p><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?spm=a21n57.1.0.0.3806523cSZCB47&amp;id=543180212841&amp;ns=1&amp;abbucket=5#detail">ã€å‰å¾€ã€‘</a></p></blockquote></li></ul><p><img src="https://s2.loli.net/2023/10/03/aYVXKoPRJfwNi5g.png" alt="image-20230810154350255"></p><ul><li><p>é€‰å‹æ¨è</p><ul><li><p>å‹å·ï¼š<strong>F55A PRO 6S 4IN1</strong></p></li><li><p>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://uav-cn.tmotor.com/html/2018/ESC_1219/187.html">ã€å‰å¾€ã€‘</a></p></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?spm=a21n57.1.0.0.3806523cSZCB47&amp;id=719387596312&amp;ns=1&amp;abbucket=5#detail">ã€T-MOTOR è€è™åŠ¨åŠ›ã€‘ç©¿è¶Šæœº èˆªæ¨¡ç”µè°ƒ 2ä»£ F55A PROâ…¡ 6S 4IN1-æ·˜å®ç½‘ (taobao.com)</a></p></blockquote></li></ul><h3 id="3-5-ç”µæœº">3.5 ç”µæœº</h3><p><img src="https://s2.loli.net/2023/10/03/kXLMx5Uf8neAVDJ.png" alt="image-20230810155304636"></p><ul><li><p>é€‰å‹æ¨è</p><ul><li><p>å‹å·ï¼š<strong>TmotorPro KV2200</strong></p></li><li><p>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://uav-cn.tmotor.com/html/2018/Motor_0815/184.html">ã€å‰å¾€ã€‘</a></p></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.16.7c4d2af30pLyz1&amp;id=593544036760&amp;ns=1&amp;abbucket=9#detail">ã€å‰å¾€ã€‘</a></p></blockquote></li></ul><h3 id="3-6-èºæ—‹æ¡¨">3.6 èºæ—‹æ¡¨</h3><p>å››æ—‹ç¿¼é£æœºèºæ—‹æ¡¨å®‰è£…æ–¹å‘å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨å®‰è£…æ—¶ï¼Œèºæ—‹æ¡¨åšçš„ä¸€é¢åœ¨æ—‹è½¬æ–¹å‘çš„å‰æ–¹ï¼š</p><p><img src="https://s2.loli.net/2023/10/03/JDNCqiOnS95HsTr.png" alt="image-20230810155624729"></p><h3 id="3-7-æ•°ä¼ ">3.7 æ•°ä¼ </h3><p><img src="https://s2.loli.net/2023/10/03/JPCIDt38Up4kAsO.png" alt="image-20230810155848145"></p><ul><li>ä»‹ç»</li></ul><blockquote><p>**æ•°ä¼ ï¼š**ç”¨äºæ— äººæœºå’Œåœ°é¢ç«™ï¼ˆ <a href="http://qgroundcontrol.com/">http://qgroundcontrol.com/</a> ï¼‰è¿›è¡Œå®æ—¶é€šè®¯ï¼Œåœ¨é£è¡Œæ—¶ä¼ é€’æ— äººæœºç”µé‡ã€é£è¡Œå§¿æ€ã€GPSä½ç½®ç­‰ä¿¡æ¯ã€‚</p></blockquote><ul><li><p>é€‰å‹æ¨è</p><ul><li><p>å‹å·ï¼š<strong>SiK Telemetry Radio V3</strong></p></li><li><p>ä½¿ç”¨è¯´æ˜ï¼š<a href="https://docs.holybro.com/telemetry-radio/sik-telemetry-radio-v3">ã€å‰å¾€ã€‘</a></p></li></ul></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://detail.tmall.com/item.htm?abbucket=9&amp;id=640015018502&amp;ns=1&amp;spm=a230r.1.14.44.275e1f72h2RcGZ">ã€å‰å¾€ã€‘</a></p></blockquote><h3 id="3-8-é¥æ§å™¨åŠæ¥æ”¶æœº">3.8 é¥æ§å™¨åŠæ¥æ”¶æœº</h3><p><img src="https://s2.loli.net/2023/10/03/muBpyqskDOv3rYe.png" alt="image-20230810155932730"></p><ul><li>é€‰å‹æ¨è<ul><li>å‹å·ï¼š<strong>å¤©åœ°é£ET16S</strong></li></ul></li></ul><blockquote><p>æ¨èæ·˜å®é“¾æ¥ï¼š<a href="https://item.taobao.com/item.htm?id=585674375898&amp;ali_refid=a3_430620_1006:1105273393:N:t7Nl5roNKstJRQdsBQHAyLeFzSCWa1Ia:8cc6b1226529ac8b9b5457799c0ef9e6&amp;ali_trackid=1_8cc6b1226529ac8b9b5457799c0ef9e6&amp;spm=a230r.1.14.1#detail">ã€å‰å¾€ã€‘</a></p></blockquote><h3 id="3-9-æœºè½½ç”µè„‘ï¼ˆå¯é€‰ï¼‰">3.9 æœºè½½ç”µè„‘ï¼ˆå¯é€‰ï¼‰</h3><blockquote><p>Intel NUC(æ¨è)ã€Jetson Tx2ï¼Œæ ‘è“æ´¾ã€‚ç”¨äºæ— äººæœºæ„ŸçŸ¥ã€è·¯å¾„è§„åˆ’ç­‰ç®—æ³•è¿ç®—ï¼Œå‘é£æ§å‘é€æŒ‡ä»¤ã€‚</p></blockquote><h2 id="4-å…¶å®ƒæ— äººæœºæ•£ä»¶åŠé€‰å‹">4. å…¶å®ƒæ— äººæœºæ•£ä»¶åŠé€‰å‹</h2><ul><li><p>æ¡¨ä¿ï¼šä¿æŠ¤æ¡¨å¶åœ¨ç¢°æ’æ—¶ä¸ä¼šæŠ˜åã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://item.taobao.com/item.htm?spm=a1z0d.6639537/tb.1997196601.90.18807484bPqSeX&amp;id=550135021616">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>å°¼é¾™æŸ±ï¼šç”¨äºå›ºå®šæœºè½½ç”µè„‘åŠå…¶å®ƒæ¨¡å—ã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://detail.tmall.com/item_o.htm?id=535423340297">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>é“æŸ±ï¼šç”¨äºè¿æ¥æ— äººæœºä¸Šä¸‹ä¸¤å±‚ã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.122.525111f9XQ2VUi&amp;id=693131457335&amp;ns=1&amp;abbucket=9#detail">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>å‡éœ‡çƒï¼šç”¨äºé™ä½åœ¨é£è¡Œæ—¶é£æ§æ¨¡å—çš„éœ‡åŠ¨é¢‘ç‡ï¼Œä¿æŠ¤å…¶ä¸­çš„IMUã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.163.28084a198uQJEJ&amp;id=584534547675&amp;ns=1&amp;abbucket=9#detail">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>é”‚ç”µæ± å……ç”µå™¨ï¼š</p><ul><li>å‚è€ƒï¼š<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.163.28084a198uQJEJ&amp;id=584534547675&amp;ns=1&amp;abbucket=9#detail">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>ç”µæ± ç»‘å¸¦ï¼š</p><ul><li>å‚è€ƒï¼š<a href="https://detail.tmall.com/item.htm?abbucket=9&amp;id=696500113695&amp;ns=1&amp;skuId=5114520207331&amp;spm=a230r.1.14.167.12822e1fkSLylp">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>å¼ºåŠ›èƒŒèƒ¶é­”æœ¯è´´ï¼šç”¨äºå›ºå®šç”µæ± ã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://detail.tmall.com/item.htm?abbucket=9&amp;id=696500113695&amp;ns=1&amp;skuId=5114520207331&amp;spm=a230r.1.14.167.12822e1fkSLylp">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li><li><p>ç¨³å‹æ¨¡å—ï¼šç”¨äºæœºè½½ç”µè„‘å’Œéƒ¨åˆ†ä¼ æ„Ÿå™¨çš„ä¾›ç”µã€‚</p><ul><li>å‚è€ƒï¼š<a href="https://detail.tmall.com/item.htm?ali_refid=a3_430582_1006:1231260087:N:DZVEEzu0WOqQc0192VtMcLhdsOn917cy:64422440d684dfa33c08760a8e57cc37&amp;ali_trackid=1_64422440d684dfa33c08760a8e57cc37&amp;id=601488488830&amp;spm=a230r.1.14.1">ã€æ·˜å®é“¾æ¥ã€‘</a></li></ul></li></ul><div class="note info flat"><p>æœ¬æ–‡å‚è€ƒè‡ªå¾®ä¿¡å…¬ä¼—å·ï¼š<a href="https://mp.weixin.qq.com/s/b5BIYmxXTzkaapnkMK6P8w">ã€äº¤æµåˆ†äº«ã€‘æ— äººæœºèµ„æ–™æ±‡æ€»åŠé€‰å‹æ¨èâ€“PX4ç³»åˆ— (qq.com)</a></p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-å¸¸ç”¨èµ„æ–™ä»¥åŠå®˜æ–¹ç½‘ç«™&quot;&gt;1. å¸¸ç”¨èµ„æ–™ä»¥åŠå®˜æ–¹ç½‘ç«™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ— äººæœºé£æ§PX4ç”¨æˆ·ä½¿ç”¨æ‰‹å†Œï¼ˆæ— äººæœºåŸºæœ¬è®¾ç½®ã€åœ°é¢ç«™ä½¿ç”¨æ•™ç¨‹ã€è½¯ç¡¬ä»¶æ­å»ºç­‰ï¼‰ï¼š&lt;a href=&quot;https://docs.px4.io/main/en/&quot;&gt;https://</summary>
      
    
    
    
    <category term="ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº" scheme="https://www.mgodmonkey.cn/categories/%E4%BB%8E0%E5%85%A5%E9%97%A8%E8%87%AA%E4%B8%BB%E7%A9%BA%E4%B8%AD%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº-3-ã€ç¯å¢ƒä¸å¸¸ç”¨è½¯ä»¶å®‰è£…ã€‘</title>
    <link href="https://www.mgodmonkey.cn/posts/eb82f52e.html"/>
    <id>https://www.mgodmonkey.cn/posts/eb82f52e.html</id>
    <published>2023-08-08T08:51:46.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><h2 id="å…³äºæœ¬è¯¾ç¨‹ï¼š">å…³äºæœ¬è¯¾ç¨‹ï¼š</h2><p>æœ¬æ¬¡è¯¾ç¨‹æ˜¯ä¸€å¥—é¢å‘å¯¹<strong>è‡ªä¸»ç©ºä¸­æœºå™¨äºº</strong>æ„Ÿå…´è¶£çš„å­¦ç”Ÿã€çˆ±å¥½è€…ã€ç›¸å…³ä»ä¸šäººå‘˜çš„å…è´¹è¯¾ç¨‹ï¼ŒåŒ…å«äº†ä»<strong>ç¡¬ä»¶ç»„è£…</strong>ã€<strong>æœºè½½ç”µè„‘ç¯å¢ƒè®¾ç½®</strong>ã€<strong>ä»£ç éƒ¨ç½²</strong>ã€å®æœºå®éªŒç­‰å…¨å¥—è¯¦ç»†æµç¨‹ï¼Œå¸¦ä½ ä»0å¼€å§‹ï¼Œç»„è£…å±äºè‡ªå·±çš„è‡ªä¸»æ— äººæœºï¼Œå¹¶è®©å®ƒå¯ä»¥åœ¨æœªçŸ¥çš„ç¯å¢ƒä¸­è‡ªç”±é¿éšœç©¿è¡Œã€‚</p><p>æœ¬æ¬¡è¯¾ç¨‹çš„é‡å¿ƒä¸»è¦è½åœ¨è‡ªä¸»ç©ºä¸­æœºå™¨äººçš„æ­å»ºã€ä»£ç éƒ¨ç½²åŠè°ƒè¯•ä¸Šï¼Œå…³äºè‡ªä¸»ç©ºä¸­æœºå™¨äººçš„ä¸€äº›ç†è®ºåŸºç¡€ï¼Œä¾‹å¦‚<strong>åŠ¨åŠ›å­¦æ¨¡å‹</strong>ï¼Œ<strong>è·¯å¾„æœç´¢</strong>ï¼Œè½¨è¿¹è§„åˆ’ï¼Œ<strong>åœ°å›¾æ„å»º</strong>ç­‰å†…å®¹ã€‚</p><h3 id="è¯¾ç¨‹è§†é¢‘">è¯¾ç¨‹è§†é¢‘</h3><p><strong>Bç«™ï¼š</strong><a href="https://www.bilibili.com/video/BV1WZ4y167me/?p=1">ã€å®Œç»“ã€‘ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº | å¼€æº | æµ™æ±Ÿå¤§å­¦Fast-Lab</a></p><p><strong>æ·±è“å­¦é™¢ï¼š</strong><a href="https://www.shenlanxueyuan.com/course/470">ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº</a></p><h3 id="ç›¸å…³æºç ">ç›¸å…³æºç </h3><p><strong>GitHubï¼š</strong><a href="https://github.com/ZJU-FAST-Lab/Fast-Drone-250">https://github.com/ZJU-FAST-Lab/Fast-Drone-250</a></p><p><strong>Giteeï¼š</strong><a href="https://gitee.com/pn_code/Fast-Drone-250">https://gitee.com/pn_code/Fast-Drone-250</a></p></blockquote><h2 id="1-æœºè½½ç”µè„‘ç¯å¢ƒå®‰è£…">1. æœºè½½ç”µè„‘ç¯å¢ƒå®‰è£…</h2><blockquote><p>æœºè½½ç”µè„‘æ¨èç¯å¢ƒ</p><p>ç³»ç»Ÿï¼šUbuntu20.04 LST</p><p>ROS1ï¼šnoetic</p><p>ROS2ï¼šfoxy</p><p><strong>è¯´æ˜ï¼šROS1å’ŒROS2å¯ä»¥å®‰è£…åœ¨åŒä¸€ä¸ªç³»ç»Ÿï¼Œä½†éœ€è¦è¿›è¡Œä¸€ç‚¹é…ç½®ï¼Œè§<a href="https://www.mgodmonkey.cn/posts/a344ec17.html">ã€ROS1å’ŒROS2çš„å…±å­˜é—®é¢˜ã€‘</a></strong></p><p><strong>ç›®å‰å¾ˆå¤šç®—æ³•ï¼ŒåŒ…æ‹¬æœ¬æ•™ç¨‹éƒ½æ˜¯åŸºäºROS1çš„ç‰ˆæœ¬ï¼Œä½†ROS2å¯¹æ¯”ROS1ä¼˜åŠ¿å¾ˆå¤§ï¼Œè€Œä¸”ROS1ç›®å‰å·²ç»å®£å¸ƒå°†ä¼šåœ¨2023å¹´åœæ­¢æ›´æ–°ï¼Œå› æ­¤ROS2å·²ç»æ˜¯å¤§ä¼—æ‰€è¶‹ï¼Œå»ºè®®å­¦æœ‰ä½™åŠ›çš„åŒå­¦åœ¨å­¦å®ŒROS1åå¯ä»¥é¡ºå¸¦è¿ROS2ä¹Ÿä¸€èµ·å­¦äº†</strong></p></blockquote><h3 id="1-1-Ubuntuå®‰è£…">1.1 Ubuntuå®‰è£…</h3><p>è§†é¢‘æ•™ç¨‹å¦‚ä¸‹ï¼š</p><div align=center class="video">    <iframe src="//player.bilibili.com/player.html?aid=382426906&bvid=BV1WZ4y167me&cid=557822079&page=7&autoplay=0&high_quality=1"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div><ul><li>é•œåƒç«™åœ°å€ï¼š <a href="http://mirrors.aliyun.com/ubuntu-releases/20.04/">http://mirrors.aliyun.com/ubuntu-releases/20.04/</a> ä¸‹è½½  <strong>ubuntu-20.04.4 desktop-amd64.iso</strong></li><li>çƒ§å½•è½¯ä»¶<strong>UltraISO</strong>å®˜ç½‘ï¼š<a href="https://cn.ultraiso.net/">https://cn.ultraiso.net/</a></li><li>åˆ†åŒºè®¾ç½®ï¼š<ul><li>**EFIç³»ç»Ÿåˆ†åŒºï¼ˆä¸»åˆ†åŒºï¼‰**512M</li><li>**äº¤æ¢ç©ºé—´ï¼ˆé€»è¾‘åˆ†åŒºï¼‰**16000Mï¼ˆå†…å­˜å¤§å°çš„ä¸¤å€ï¼‰</li><li>**æŒ‚è½½ç‚¹/ï¼ˆä¸»åˆ†åŒºï¼‰**å‰©ä½™æ‰€æœ‰å®¹é‡</li></ul></li></ul><blockquote><p>æ•™ç¨‹ä¸­æ¨èç¬”è®°æœ¬ä¸Šä¹Ÿå®‰è£…<strong>Ubuntu</strong>ï¼Œä½†å®é™…ç”¨ä¸‹æ¥å¹¶ä¸æ¨èå®‰è£…<strong>Ubuntu</strong>åœ¨ç¬”è®°æœ¬ä¸Šï¼Œå¾ˆå¤šè½¯ä»¶<strong>Windows</strong>ä¹Ÿæœ‰ï¼Œè€Œä¸”ç¬”è®°æœ¬çš„ä½œç”¨ä¸»è¦å°±æ˜¯ç¼–è¾‘å¹¶å‘é€ä»£ç æ–‡ä»¶åˆ°<strong>æœºè½½ç”µè„‘</strong>ä¸Šï¼Œç”¨<strong>VScode</strong>+<strong>MobaXterm</strong>+<strong>ssh</strong>+<strong>nomachine</strong>å³å¯</p></blockquote><h3 id="1-2-ROSå®‰è£…">1.2  ROSå®‰è£…</h3><p>æ¨èä½¿ç”¨é±¼é¦™rosçš„ä¸€é”®å®‰è£…è„šæœ¬ï¼šä¸€è¡Œä»£ç æ­å»ºæœºå™¨äººå¼€å‘ç¯å¢ƒ(ROS/ROS2/ROSDEP)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://fishros.com/install -O fishros &amp;&amp; . fishros</span><br></pre></td></tr></table></figure><blockquote><p>å¼€æºåœ°å€ï¼š<a href="https://github.com/fishros/install">https://github.com/fishros/install</a><br>é—®é¢˜æ±‡æ€»ï¼š<a href="https://www.fishros.org.cn/forum/category/7/%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85">ä¸€é”®å®‰è£… | é±¼é¦™ROS (fishros.org.cn)</a></p><p>æ›´å¤š<strong>ROS</strong>çš„èµ„æºåŠæ•™ç¨‹å‚è€ƒï¼š<a href="https://www.mgodmonkey.cn/posts/232d6cf1.html">ROSèµ„æºæ±‡æ€» | MGodmonkeyã®ä¸–ç•Œ</a></p></blockquote><h2 id="2-å¿…å¤‡è½¯ä»¶å®‰è£…">2. å¿…å¤‡è½¯ä»¶å®‰è£…</h2><div align=center class="video">    <iframe src="//player.bilibili.com/player.html?aid=382426906&bvid=BV1WZ4y167me&cid=562685965&page=8&autoplay=0&high_quality=1"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div><h3 id="2-1-realsenseé©±åŠ¨å®‰è£…ï¼ˆRGB-Dç›¸æœºï¼‰">2.1 realsenseé©±åŠ¨å®‰è£…ï¼ˆRGB-Dç›¸æœºï¼‰</h3><blockquote><p>å‚è€ƒï¼š<a href="https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md">https://github.com/IntelRealSense/librealsense/blob/master/doc/distribution_linux.md</a></p></blockquote><ol><li><s>æ·»åŠ ç§˜é’¥</s></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt-get install apt-transport-https</span><br><span class="line">sudo <span class="built_in">mkdir</span> -p /etc/apt/keyrings</span><br><span class="line">curl -sSf https://librealsense.intel.com/Debian/librealsense.pgp | sudo <span class="built_in">tee</span> /etc/apt/keyrings/librealsense.pgp &gt; /dev/null</span><br></pre></td></tr></table></figure><ol start="2"><li><s>æ·»åŠ å®‰è£…æº</s></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;deb [signed-by=/etc/apt/keyrings/librealsense.pgp] https://librealsense.intel.com/Debian/apt-repo `lsb_release -cs` main&quot;</span> | \</span><br><span class="line">sudo <span class="built_in">tee</span> /etc/apt/sources.list.d/librealsense.list</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><blockquote><p>ä»¥ä¸‹æ˜¯README.pdfä¸­çš„æ–¹æ³•</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || </span><br><span class="line">sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository <span class="string">&quot;deb https://librealsense.intel.com/Debian/apt-repo <span class="subst">$(lsb_release -cs)</span> main&quot;</span> -u</span><br></pre></td></tr></table></figure></blockquote><ol start="3"><li>å®‰è£…åŒ…</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹é¢ä¸¤ä¸ªå¿…è£…</span></span><br><span class="line">sudo apt-get install librealsense2-dkms</span><br><span class="line">sudo apt-get install librealsense2-utils</span><br><span class="line">sudo apt-get install ros-noetic-realsense2-camera</span><br><span class="line"><span class="comment"># ä¸‹é¢ä¸¤ä¸ªå¯é€‰ï¼Œä¸»è¦æ˜¯å¼€å‘è°ƒè¯•ç”¨</span></span><br><span class="line">sudo apt-get install librealsense2-dev</span><br><span class="line">sudo apt-get install librealsense2-dbg</span><br></pre></td></tr></table></figure><ol start="4"><li>æµ‹è¯•</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">realsense-viewer</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡<code>realsense-viewer</code>çš„æŒ‡ä»¤æ¥æ£€æŸ¥æ·±åº¦ç›¸æœºæ˜¯å¦æ­£ç¡®å®‰è£…å¹¶æ˜¾ç¤º</p><h3 id="2-2-MAVROS">2.2 MAVROS</h3><ol><li>ä»‹ç»</li></ol><p>MAVROSç›¸å½“äºPX4é£æ§ä¸­çš„MAVLINKæ¨¡å—ã€‚MAVROSå°†è¯é¢˜è½¬ä¸ºMAVLINKæ ¼å¼æ¶ˆæ¯å‘é€ç»™é£æ§ï¼Œé£æ§ä¸­çš„MAVLINKæ¨¡å—å°†MAVLINKæ ¼å¼æ¶ˆæ¯è½¬åŒ–ä¸ºuORBæ¶ˆæ¯ç»™PX4å„æ¨¡å—é—´ä¼ é€’æ¶ˆæ¯ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥ä»uORBæ¶ˆæ¯ä¸€ç›´åˆ°ROSè¯é¢˜ã€‚</p><p>ä»£ç ç¤ºä¾‹çœ‹<a href="https://docs.px4.io/main/en/ros/mavros_offboard_cpp.html">MAVROS Offboard control example</a>å°±å¥½äº†ï¼Œè®²å¾—å¾ˆæ¸…æ¥šã€‚</p><ol start="2"><li>å®‰è£…</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ros-noetic-mavros   <span class="comment"># è¿™é‡Œçš„noeticæ˜¯rosçš„ç‰ˆæœ¬ï¼Œå…¶ä»–ç‰ˆæœ¬è‡ªè¡Œæ›´æ¢åç§°</span></span><br><span class="line"><span class="built_in">cd</span> /opt/ros/noetic/lib/mavros</span><br><span class="line">sudo ./install_geographiclib_datasets.sh</span><br></pre></td></tr></table></figure><h3 id="2-3-gitã€gccã€g-ã€pythonä¸make">2.3 gitã€gccã€g++ã€pythonä¸make</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install git<span class="comment"># git</span></span><br><span class="line">sudo apt install build-essential <span class="comment"># gccã€g++</span></span><br><span class="line">sudo apt install make<span class="comment"># make</span></span><br><span class="line">sudo apt install python3<span class="comment"># python3</span></span><br></pre></td></tr></table></figure><p>æ£€æŸ¥ç‰ˆæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">gcc --version</span><br><span class="line">g++ --version</span><br><span class="line">make --version</span><br><span class="line">python3 --version</span><br></pre></td></tr></table></figure><h3 id="2-4-ceresã€glogä¸ddyanmic-reconfigure">2.4 ceresã€glogä¸ddyanmic-reconfigure</h3><ul><li><p>ä»‹ç»</p><ul><li><p><strong>ceres</strong>æ˜¯ä»€ä¹ˆ<br><strong>Ceres Solver</strong>æ˜¯ä¸€ä¸ªå¼€æº**C++**åº“ï¼Œç”¨äºå»ºæ¨¡å’Œè§£å†³å¤§å‹å¤æ‚çš„ä¼˜åŒ–é—®é¢˜ã€‚å®ƒå¯ä»¥ç”¨äºè§£å†³å…·æœ‰è¾¹ç•Œçº¦æŸå’Œä¸€èˆ¬æ— çº¦æŸä¼˜åŒ–é—®é¢˜çš„éçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ã€‚å®ƒæ˜¯ä¸€ä¸ªæˆç†Ÿï¼ŒåŠŸèƒ½ä¸°å¯Œä¸”é«˜æ€§èƒ½çš„åº“ã€‚Ceres Solveræ˜¯è°·æ­Œ2010å°±å¼€å§‹ç”¨äºè§£å†³ä¼˜åŒ–é—®é¢˜çš„C++åº“ï¼Œ2014å¹´å¼€æºã€‚åœ¨Googleåœ°å›¾ï¼ŒTangoé¡¹ç›®ï¼Œä»¥åŠè‘—åçš„SLAMç³»ç»ŸOKVISå’ŒCartographerçš„ä¼˜åŒ–æ¨¡å—ä¸­å‡ä½¿ç”¨äº†Ceres Solverã€‚</p></li><li><p><strong>glog</strong>æ˜¯ä»€ä¹ˆ</p><p><strong>glog</strong>æ˜¯<strong>google</strong>å‡ºå“çš„<strong>c++<strong>æ—¥å¿—åº“ï¼Œæä¾›äº†å¾ˆå¤šéå¸¸ä¸é”™çš„åŠŸèƒ½ï¼Œä¾‹å¦‚</strong>æ—¥å¿—åˆ†ç­‰çº§æ‰“å°</strong>ã€<strong>æ¡ä»¶æ‰“å°</strong>ã€<strong>æ—¥å¿—æ ¼å¼åŒ–</strong>ã€<strong>æ—¥å¿—æ–‡ä»¶æ»šåŠ¨å¤§å°</strong>ç­‰ã€‚</p></li><li><p><strong>ddynamic-reconfigure</strong>æ˜¯ä»€ä¹ˆ</p><p><strong>ddynamic-reconfigure</strong>æ˜¯ä¸€ä¸ªROSè½¯ä»¶åŒ…ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªåŠ¨æ€é‡æ–°é…ç½®çš„æ¡†æ¶ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ä¿®æ”¹ROSèŠ‚ç‚¹çš„å‚æ•°ã€‚å®ƒå¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨<br>ä¸åœæ­¢èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå®æ—¶åœ°è°ƒæ•´èŠ‚ç‚¹çš„å‚æ•°ï¼Œä»è€Œä¼˜åŒ–èŠ‚ç‚¹çš„æ€§èƒ½ã€‚</p></li></ul></li><li><p>ä¸‹è½½å¹¶è§£å‹<code>3rd_party.zip</code></p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://gitee.com/pn_code/Fast-Drone-250/blob/master/3rd_party.zip</span><br><span class="line">unzip 3rd_party.zip</span><br></pre></td></tr></table></figure><ul><li>ç¼–è¯‘å®‰è£…</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ./glog</span><br><span class="line">sudo <span class="built_in">chmod</span> 777 ./autogen.sh</span><br><span class="line">sudo <span class="built_in">chmod</span> 777 ./configure </span><br><span class="line">sudo ./autogen.sh &amp;&amp; sudo ./configure &amp;&amp; sudo make install</span><br><span class="line">sudo apt-get install liblapack-dev libsuitesparse-dev libcxsparse3 libgflags-dev libgoogle-glog-dev libgtest-dev</span><br><span class="line"><span class="built_in">cd</span> ../ceres-solver-2.0.0rc1</span><br><span class="line"><span class="built_in">mkdir</span> build</span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">cmake ..</span><br><span class="line">sudo make -j4</span><br><span class="line">sudo make install</span><br><span class="line">sudo apt-get install ros-noetic-ddynamic-reconfigure</span><br></pre></td></tr></table></figure><blockquote><p>è¿™é‡Œçš„<code>libcxsparse3</code>å¦‚æœæœ‰é”™è¯¯ï¼Œå‚è€ƒä¸‹é¢è¿™ç¯‡åšå®¢<a href="https://blog.csdn.net/qq_42257666/article/details/124598167">ã€å®‰è£…Ceresç›¸å…³ä¾èµ–æ—¶libcxsparse3.1.2æŠ¥é”™_å®‰è£…ceresç›¸å…³ä¾èµ–é¡¹æ—¶æ˜¾ç¤ºæ‰¾ä¸åˆ°_æŒ¯åOPPOçš„åšå®¢-CSDNåšå®¢ã€‘</a></p></blockquote><h3 id="2-4-ego-plannner">2.4 ego-plannner</h3><blockquote><p>å‚è€ƒï¼š<a href="https://gitee.com/iszhouxin/ego-planner.git">ZJU-FAST-Lab/ego-planner (gitee.com)</a>çš„**<a href="https://gitee.com/iszhouxin/ego-planner/blob/master/README.md">Readme.md</a>**ä¸­çš„è¯´æ˜</p></blockquote><ul><li>å®‰è£…<strong>uav_simulator</strong>éœ€è¦çš„<strong>Armadillo</strong>åº“</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install libarmadillo-dev</span><br></pre></td></tr></table></figure><ul><li><p>ä¸‹è½½æºç </p><p>From github</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/ZJU-FAST-Lab/ego-planner.git</span><br></pre></td></tr></table></figure><p>Or from gitee</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitee.com/iszhouxin/ego-planner.git</span><br></pre></td></tr></table></figure><ul><li>ç¼–è¯‘æºç </li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ego-planner</span><br><span class="line">catkin_make -DCMAKE_BUILD_TYPE=Release</span><br></pre></td></tr></table></figure><ul><li>æ‰§è¡Œ</li></ul><p>åœ¨<code>ego-planner</code>æ–‡ä»¶å¤¹çš„ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œæ‰“å¼€rvizè¿›è¡Œå¯è§†åŒ–å’Œäº¤äº’</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> devel/setup.bash</span><br><span class="line">roslaunch ego_planner rviz.launch</span><br></pre></td></tr></table></figure><p>åœ¨<code>ego-planner</code>æ–‡ä»¶å¤¹çš„å¦ä¸€ä¸ªç»ˆç«¯ä¸­ï¼Œæ‰“å¼€ä»¿çœŸ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> devel/setup.bash</span><br><span class="line">roslaunch ego_planner run_in_sim.launch</span><br></pre></td></tr></table></figure><h2 id="3-å¸¸ç”¨è½¯ä»¶å®‰è£…">3. å¸¸ç”¨è½¯ä»¶å®‰è£…</h2><div align=center class="video">    <iframe src="//player.bilibili.com/player.html?aid=382426906&bvid=BV1WZ4y167me&cid=562630601&page=9&autoplay=0&high_quality=1"     scrolling="no"     border="0"     frameborder="no"     framespacing="0"     high_quality=1    danmaku=1     allowfullscreen="true">     </iframe></div><ul><li><strong>vscode</strong><ul><li>å‰å¾€<a href="https://code.visualstudio.com/">ã€vscodeå®˜ç½‘ã€‘</a>ä¸‹è½½<strong>Linux x64 deb</strong>åŒ…</li><li>ä½¿ç”¨<code>sudo apt install ****.deb</code>è¿›è¡Œå®‰è£…</li></ul></li><li><strong>Terminator</strong><ul><li>å¤šçª—å£å‘½ä»¤è¡Œç»ˆç«¯</li><li>ä½¿ç”¨<code>sudo apt install terminator</code>è¿›è¡Œå®‰è£…</li></ul></li><li><strong>Plotjuggler</strong><ul><li>å¯è§†åŒ–æ—¶é—´æ—¶åºçš„å·¥å…·</li><li>ä½¿ç”¨<code>sudo apt install ros-noetic-plotjuggler ros-noetic-plotjuggler-ros</code>è¿›è¡Œå®‰è£…</li><li>ä½¿ç”¨<code>rosrun plotjuggler plotjuggler</code>è¿›è¡ŒæŸ¥çœ‹</li></ul></li><li><strong>Net-tools</strong><ul><li>ç½‘ç»œå·¥å…·åŒ…ï¼Œç”¨äºæŸ¥çœ‹linuxçš„IPåœ°å€</li><li>ä½¿ç”¨<code>sudo apt install net-tools</code>è¿›è¡Œå®‰è£…</li><li>ä½¿ç”¨<code>ifconfig</code>è¿›è¡ŒæŸ¥çœ‹IPåœ°å€</li></ul></li><li><strong>ssh</strong><ul><li>ä½¿ç”¨<code>sudo apt install openssh-server</code>è¿›è¡Œå®‰è£…</li><li>ä½¿ç”¨sshç»ˆç«¯ç­‰å·¥å…·è¿æ¥ä¸Šæœºè½½ç”µè„‘</li></ul></li></ul><blockquote><p>ä»¥ä¸Šå·¥å…·çš„ä½¿ç”¨æ–¹å¼è¯·è‡ªè¡Œå‰å¾€åº¦å¨˜æœç´¢</p><p>ä»¥ä¸Šå·¥å…·çš„é˜¿é‡Œäº‘ç›˜ä¸‹è½½åœ°å€ï¼šã€<a href="https://www.aliyundrive.com/s/xLxgkVG5wqA">ä¸‹è½½å…¥å£</a>ã€‘</p></blockquote><div class="row">    <embed src="https://mybog.s3.bitiful.net/ros/word/readme.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;h2 id=&quot;å…³äºæœ¬è¯¾ç¨‹ï¼š&quot;&gt;å…³äºæœ¬è¯¾ç¨‹ï¼š&lt;/h2&gt;
&lt;p&gt;æœ¬æ¬¡è¯¾ç¨‹æ˜¯ä¸€å¥—é¢å‘å¯¹&lt;strong&gt;è‡ªä¸»ç©ºä¸­æœºå™¨äºº&lt;/strong&gt;æ„Ÿå…´è¶£çš„å­¦ç”Ÿã€çˆ±å¥½è€…ã€ç›¸å…³ä»ä¸šäººå‘˜çš„å…è´¹è¯¾ç¨‹ï¼ŒåŒ…å«äº†ä»&lt;strong&gt;ç¡¬ä»¶ç»„è£…&lt;/strong&gt;ã€&lt;strong&gt;æœºè½½ç”µè„‘ç¯</summary>
      
    
    
    
    <category term="ä»0å…¥é—¨è‡ªä¸»ç©ºä¸­æœºå™¨äºº" scheme="https://www.mgodmonkey.cn/categories/%E4%BB%8E0%E5%85%A5%E9%97%A8%E8%87%AA%E4%B8%BB%E7%A9%BA%E4%B8%AD%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="æ— äººæœº" scheme="https://www.mgodmonkey.cn/tags/%E6%97%A0%E4%BA%BA%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>SLAMä¼˜ç§€å¼€æºæ–¹æ¡ˆ</title>
    <link href="https://www.mgodmonkey.cn/posts/1f501926.html"/>
    <id>https://www.mgodmonkey.cn/posts/1f501926.html</id>
    <published>2023-08-02T08:34:00.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<ul><li><strong>è§†è§‰SLAM</strong><ul><li>ORB SLAM2(å•åŒç›®RGB-D)ï¼š<a href="https://github.com/raulmur/ORB_SLAM2">https://github.com/raulmur/ORB_SLAM2</a></li><li>DSO(å•ç›®)ï¼š<a href="https://github.com/JakobEngel/dso">https://github.com/JakobEngel/dso</a></li><li>InfiniTAM v3(RGB-D)ï¼š<a href="https://github.com/victorprad/InfiniTAM">https://github.com/victorprad/InfiniTAM</a></li></ul></li><li><strong>è§†è§‰+æƒ¯å¯¼SLAM</strong><ul><li>VINS-Fusion(å•åŒç›®+IMU)ï¼š<a href="https://github.com/HKUST-Aerial-Robotics/VINS-Fusion">https://github.com/HKUST-Aerial-Robotics/VINS-Fusion</a></li><li>OKVIS(å•åŒç›® + IMU)ï¼š<a href="https://github.com/ethz-asl/okvis">https://github.com/ethz-asl/okvis</a></li><li>ORB SLAM33(å•åŒç›® + IMU)ï¼š<a href="https://github.com/UZ-SLAMLab/ORB_SLAM3">https://github.com/UZ-SLAMLab/ORB_SLAM3</a></li></ul></li><li><strong>æ¿€å…‰SLAM</strong><ul><li>LeGO-LOAMï¼š<a href="https://github.com/RobustFieldAutonomyLab/LeGO-LOAM">https://github.com/RobustFieldAutonomyLab/LeGO-LOAM</a></li><li>Cartographer(LIDAR + IMU)ï¼š<a href="https://github.com/googlecartographer/cartographer">https://github.com/googlecartographer/cartographer</a></li></ul></li><li><strong>å¤šä¼ æ„Ÿå™¨èåˆ</strong><ul><li>LVI-SAM(LIDAR + IMU + RTK + GPS)ï¼š<a href="https://github.com/TixiaoShan/LVI-SAM">https://github.com/TixiaoShan/LVI-SAM</a></li></ul></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§†è§‰SLAM&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ORB SLAM2(å•åŒç›®RGB-D)ï¼š&lt;a href=&quot;https://github.com/raulmur/ORB_SLAM2&quot;&gt;https://github.com/raulmur/ORB_</summary>
      
    
    
    
    <category term="èµ„æºæ±‡æ€»" scheme="https://www.mgodmonkey.cn/categories/%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
    <category term="SLAM" scheme="https://www.mgodmonkey.cn/tags/SLAM/"/>
    
  </entry>
  
  <entry>
    <title>ROS-PyQtå°æ¡ˆä¾‹</title>
    <link href="https://www.mgodmonkey.cn/posts/37a8d87e.html"/>
    <id>https://www.mgodmonkey.cn/posts/37a8d87e.html</id>
    <published>2023-07-31T12:26:52.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>ROSä¸PyQt5ç»“åˆçš„å°demoï¼Œç”¨äºå­¦ä¹ å¦‚ä½•è®¾è®¡ä¸€ä¸ªç•Œé¢ï¼Œå¹¶ä¸ROSä¸­çš„Serviceå’ŒTopicç»“åˆï¼Œä»è€Œæ§åˆ¶å¤šä¸ªå°ä¹Œé¾Ÿçš„è¿åŠ¨</p></blockquote><p><img src="https://s2.loli.net/2023/10/03/7TVxjfRQZtNnqwy.gif" alt=""></p><p>ç¯å¢ƒï¼š</p><ul><li>ROS2ï¼šfoxy</li><li>pythonï¼š3.8.10</li><li>PyQtï¼š5.10.12</li></ul><blockquote><p>é“¾æ¥ï¼š<a href="https://github.com/MGod-monkey/ros2_pyqt_turtlesim_key">https://github.com/MGod-monkey/ros2_pyqt_turtlesim_key</a></p></blockquote>]]></content>
    
    
    <summary type="html">ROSä¸PyQt5ç»“åˆçš„å°demoï¼Œç”¨äºå­¦ä¹ å¦‚ä½•è®¾è®¡ä¸€ä¸ªç•Œé¢ï¼Œå¹¶ä¸ROSä¸­çš„Serviceå’ŒTopicç»“åˆï¼Œä»è€Œæ§åˆ¶å¤šä¸ªå°ä¹Œé¾Ÿçš„è¿åŠ¨</summary>
    
    
    
    <category term="æŠ€æœ¯åˆ†äº«" scheme="https://www.mgodmonkey.cn/categories/%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
  </entry>
  
  <entry>
    <title>ROS1&amp;2ä¹‹CmakeList.txtä¸package.xml</title>
    <link href="https://www.mgodmonkey.cn/posts/5d383f12.html"/>
    <id>https://www.mgodmonkey.cn/posts/5d383f12.html</id>
    <published>2023-07-26T03:37:07.000Z</published>
    <updated>2024-12-03T15:30:45.995Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-CMakeLists-txtä¸package-xmlçš„ä½œç”¨">1. CMakeLists.txtä¸package.xmlçš„ä½œç”¨</h2><p>åœ¨<strong>ROS</strong>ç³»ç»Ÿçš„åŠŸèƒ½åŒ…ä¸­ è¦åŒ…å« <strong>CMakeLists.txt</strong> ä¸ <strong>package.xml</strong> æ–‡ä»¶æ¥ç¼–è¯‘åŠŸèƒ½åŒ…çš„å†…å®¹</p><p><strong>CMakeLists.txt</strong>åŸæœ¬æ˜¯<strong>Cmake</strong>ç¼–è¯‘ç³»ç»Ÿçš„è§„åˆ™æ–‡ä»¶ï¼Œè€Œ<strong>Catkin</strong>ç¼–è¯‘ç³»ç»ŸåŸºæœ¬æ²¿ç”¨äº†<strong>CMake</strong>çš„ç¼–è¯‘é£æ ¼ï¼Œåªæ˜¯é’ˆå¯¹<strong>ROS</strong>å·¥ç¨‹æ·»åŠ äº†ä¸€äº›å®å®šä¹‰ã€‚æ‰€ä»¥åœ¨å†™æ³•ä¸Šï¼Œ<strong>catkin</strong> çš„ <strong>CMakeLists.txt</strong>ä¸<strong>CMake</strong>çš„åŸºæœ¬ä¸€è‡´ã€‚ç”¨<strong>cmake</strong>å‘½ä»¤åˆ›å»º<strong>åŠŸèƒ½åŒ…</strong>æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆ<strong>CMakeList.txt</strong>æ–‡ä»¶ï¼Œå·²é…ç½®äº†å¤šæ•°ç¼–è¯‘é€‰é¡¹ï¼Œä¸”åŒ…å«è¯¦ç»†çš„æ³¨é‡Šï¼Œåªéœ€ç¨ä½œä¿®æ”¹ä¾¿å¯ç¼–è¯‘è‡ªå·±çš„æ–‡ä»¶ã€‚</p><p>è€Œ<strong>package.xml</strong>æ–‡ä»¶æ˜¯æè¿°åŠŸèƒ½åŒ…æ¸…å•çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬åŠŸèƒ½åŒ…çš„<strong>åç§°</strong>ã€<strong>ç‰ˆæœ¬å·</strong>ã€<strong>ä½œè€…ä¿¡æ¯</strong>ã€<strong>è®¸å¯ä¿¡æ¯</strong>ã€<strong>ç¼–è¯‘ä¾èµ–</strong>å’Œ<strong>è¿è¡Œä¾èµ–</strong>ç­‰ã€‚</p><p>æ‰€ä»¥ <strong>CMakeLists.txt</strong> éå¸¸é‡è¦ï¼Œå®ƒæŒ‡å®šäº†ç”±æºç åˆ°ç›®æ ‡æ–‡ä»¶çš„è§„åˆ™ï¼Œ<strong>catkin</strong>ç¼–è¯‘ç³»ç»Ÿåœ¨å·¥ä½œæ—¶é¦–å…ˆä¼šæ‰¾åˆ°æ¯ä¸ª<strong>package</strong>ä¸‹çš„ <strong>CMakeLists.txt</strong> ï¼Œç„¶åæŒ‰ç…§è§„åˆ™æ¥ç¼–è¯‘æ„å»º</p><h2 id="2-ç”ŸæˆCMakeLists-txt">2. ç”ŸæˆCMakeLists.txt</h2><h3 id="2-1-ROS1">2.1 ROS1</h3><p><strong>ROS1</strong>å¯é€šè¿‡ç”¨<strong>catkin_create_pkg</strong>å‘½ä»¤<strong>åˆ›å»ºåŠŸèƒ½åŒ…</strong>ï¼Œè¿™ä¼šè‡ªåŠ¨ç”Ÿæˆ<strong>CMakeLists.txt</strong>å’Œ<strong>package.xml</strong>æ–‡ä»¶çš„ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå·¥ä½œç©ºé—´</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/catkin_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/catkin_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ³¨ï¼šstd msgs rospy roscppä¸ºåˆ›å»ºåŠŸèƒ½æ—¶æŒ‡å®šçš„é“±èµ–ï¼Œtestä¸ºåŒ…å</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥å…ˆä¸æŒ‡å®šï¼Œåé¢åœ¨CMakeLists.txtå’Œpackage.xmLä¸­æ‰‹åŠ¨æ·»åŠ </span></span><br><span class="line">catkin_create_pkg <span class="built_in">test</span> std_msgs rospy roscpp</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸‹åœ¨~/catkin_ws/srcç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆäº†å“ªäº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span></span><br><span class="line">tree</span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡ä¸Šé¢çš„å‘½ä»¤ç”Ÿæˆçš„<strong>å·¥ä½œç©ºé—´</strong>å¦‚ä¸‹</p><p><img src="https://s2.loli.net/2023/10/03/KUqakLAr3D5ibR6.png" alt=""></p><p><code>include</code>ï¼šå­˜æ”¾**.h**çš„å¤´æ–‡ä»¶</p><p><code>src</code>ï¼šå¯åŒæ—¶å­˜æ”¾**.cpp<strong>æˆ–</strong>.py<strong>çš„æºæ–‡ä»¶ï¼Œä½†ä¸€èˆ¬</strong>.py**æ–‡ä»¶å­˜æ”¾åœ¨<code>scripts</code>ç›®å½•ä¸­</p><p><code>scripts</code>ï¼šä¹ æƒ¯å­˜æ”¾**.py<strong>çš„</strong>python**æ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±åˆ›å»º</p><p><strong>æ³¨ï¼špythonä»£ç å’Œc++ä»£ç ä¸åˆ†å®¶ï¼Œå¯åŒæ—¶å­˜æ”¾åœ¨åŒä¸€åŠŸèƒ½åŒ…ä¸­</strong></p></blockquote><h3 id="2-2-ROS2">2.2 ROS2</h3><p><strong>ROS2</strong>å¯é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ¥<strong>åˆ›å»ºåŠŸèƒ½åŒ…</strong>ä»¥åŠå¿…è¦çš„<strong>CMakeList.txt</strong>å’Œ<strong>package.xml</strong>æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå·¥ä½œç©ºé—´</span></span><br><span class="line"><span class="built_in">mkdir</span> -p ~/dev_ws/src</span><br><span class="line"><span class="built_in">cd</span> ~/dev_ws/src</span><br><span class="line"></span><br><span class="line"><span class="comment"># ament_cmakeå’Œament_pythonåˆ†åˆ«ä»£è¡¨c++å’Œpythonä¸¤ç§ä»£ç çš„åŠŸèƒ½åŒ…</span></span><br><span class="line"><span class="comment"># test_cå’Œtest_pythonä»£è¡¨åŒ…å</span></span><br><span class="line">ros2 pkg create --build-type ament_cmake test_c</span><br><span class="line">ros2 pkg create --build-type ament_python test_python</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸‹åœ¨~/dev_ws/srcç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆäº†å“ªäº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶</span></span><br><span class="line">tree</span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡ä»¥ä¸Šå‘½ä»¤ç”Ÿæˆçš„å·¥ä½œç©ºé—´å¦‚ä¸‹ï¼š</p><p><img src="https://s2.loli.net/2023/10/03/NgDJKjklTEWPo3c.png" alt=""></p><ul><li><p><code>test_c/include</code>ï¼šå­˜æ”¾**.h**çš„å¤´æ–‡ä»¶</p></li><li><p><code>test_c/src</code>ï¼šå­˜æ”¾**.cpp<strong>çš„</strong>C++**æºæ–‡ä»¶</p></li><li><p><code>test_python/test_python</code>ï¼šå­˜æ”¾**.py<strong>çš„</strong>python**æ–‡ä»¶</p></li></ul><p><strong>æ³¨ï¼šä¸ROS1ä¸åŒï¼ŒåŒä¸€åŠŸèƒ½åŒ…å†…åªèƒ½åŒæ—¶åŒ…å«pythonæ–‡ä»¶æˆ–è€…C++æ–‡ä»¶ä¸­çš„ä¸€ç§</strong></p></blockquote><h2 id="3-CMakeLists-txtç¼–å†™">3. CMakeLists.txtç¼–å†™</h2><h3 id="3-1-ROS1">3.1 ROS1</h3><ol><li>å¸¸ç”¨çš„<strong>ROS1</strong>ä¸­<strong>CMakeLists.txt</strong>æ¶æ„å¦‚ä¸‹</li></ol><blockquote><p>è§†é¢‘è§£æå‚è€ƒï¼š<a href="https://www.bilibili.com/video/BV1mJ411R7Ni?p=7">ä¸­ç§‘é™¢è½¯ä»¶æ‰€-æœºå™¨äººæ“ä½œç³»ç»Ÿå…¥é—¨ï¼ˆROSå…¥é—¨æ•™ç¨‹ï¼‰</a></p></blockquote><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>()<span class="comment">#CMakeçš„æœ€ä½ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>()<span class="comment">#é¡¹ç›®åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>()<span class="comment">#æ‰¾åˆ°ç¼–è¯‘éœ€è¦çš„å…¶ä»–CMake/Catkinpackage </span></span><br><span class="line"></span><br><span class="line">catkin_python_setup()<span class="comment">#catkinæ–°åŠ å®ï¼Œæ‰“å¼€catkinçš„Python Moduleçš„æ”¯æŒ</span></span><br><span class="line"></span><br><span class="line">add_message_files()<span class="comment">#catkinæ–°åŠ å®ï¼Œæ·»åŠ è‡ªå®šä¹‰Messageæ–‡ä»¶ </span></span><br><span class="line"></span><br><span class="line">add_service_files()         <span class="comment">#catkinæ–°åŠ å®ï¼Œæ·»åŠ è‡ªå®šä¹‰Serviceæ–‡ä»¶ </span></span><br><span class="line"></span><br><span class="line">add_action_files()          <span class="comment">#catkinæ–°åŠ å®ï¼Œæ·»åŠ è‡ªå®šä¹‰Actionæ–‡ä»¶ </span></span><br><span class="line"></span><br><span class="line">generate_message()<span class="comment">#catkinæ–°åŠ å®ï¼Œç”Ÿæˆä¸åŒè¯­è¨€ç‰ˆæœ¬çš„msg/srv/actionæ¥å£ </span></span><br><span class="line"></span><br><span class="line">catkin_package()<span class="comment">#catkinæ–°åŠ å®ï¼Œç”Ÿæˆå½“å‰packageçš„cmakeé…ç½®ï¼Œä¾›ä¾èµ–æœ¬åŒ…çš„å…¶ä»–è½¯ä»¶åŒ…è°ƒç”¨ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_library</span>()<span class="comment">#ç”Ÿæˆåº“ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>()<span class="comment">#ç”Ÿæˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_dependencies</span>()<span class="comment">#å®šä¹‰ç›®æ ‡æ–‡ä»¶ä¾èµ–äºå…¶ä»–ç›®æ ‡æ–‡ä»¶ï¼Œç¡®ä¿å…¶ä»–ç›®æ ‡å·²è¢«æ„å»º </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">target_link_libraries</span>()<span class="comment">#é“¾æ¥</span></span><br><span class="line"></span><br><span class="line">catkin_add_gtest()<span class="comment">#catkinæ–°åŠ å®ï¼Œç”Ÿæˆæµ‹è¯•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>()<span class="comment">#ç”Ÿæˆå¯å®‰è£…ç›®æ ‡</span></span><br></pre></td></tr></table></figure><p>éœ€è¦è‡ªå·±é…ç½®çš„é¡¹ç›®ä¸€èˆ¬å°±ä¸‹é¢å‡ ç§ï¼š</p><ul><li><p><strong>include_directories</strong></p><ul><li>ç”¨äºè®¾ç½®å¤´æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„</li><li>å…¨å±€è·¯å¾„é»˜è®¤ä¸ºåŠŸèƒ½åŒ…æ‰€åœ¨ç›®å½•ï¼ŒåŠŸèƒ½åŒ…çš„å¤´æ–‡ä»¶ä¸€èˆ¬æ”¾åœ¨åŠŸèƒ½åŒ…æ ¹ç›®å½•ä¸‹çš„includeæ–‡ä»¶å¤¹ï¼Œ<br>æ‰€ä»¥éœ€è¦æ­¤å¤„æ·»åŠ æ­¤æ–‡ä»¶å¤¹</li><li>è¿˜åŒ…å«<strong>catkin</strong>ç¼–è¯‘å™¨é»˜è®¤çš„å…¶ä»–å¤´æ–‡ä»¶è·¯å¾„ï¼Œå¦‚ï¼šROSé»˜è®¤å®‰è£…è·¯å¾„ã€Linuxç³»ç»Ÿè·¯å¾„ç­‰</li></ul></li><li><p><strong>add_exectuable</strong></p><ul><li>ç”¨äºè®¾ç½®éœ€è¦ç¼–è¯‘çš„ä»£ç å’Œå¯æ‰§è¡Œæ–‡ä»¶</li><li>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæœŸæœ›ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆèŠ‚ç‚¹ï¼‰åç§°</li><li>åé¢çš„å‚æ•°ä¸ºå‚ä¸ç¼–è¯‘çš„æºæ–‡ä»¶(.cpp)ï¼Œè‹¥éœ€è¦å¤šä¸ªä»£ç æ–‡ä»¶ï¼Œå¯ä¾æ¬¡åˆ—å‡ºï¼Œç©ºæ ¼åˆ†éš”</li></ul></li><li><p><strong>target_link_libraries</strong></p><ul><li>ç”¨äºè®¾ç½®é“¾æ¥åº“</li><li>æœ‰äº›åŠŸéœ€è¦ä½¿ç”¨ç³»ç»Ÿæˆ–ç¬¬ä¸‰æ–¹åº“å‡½æ•°ï¼Œé€šè¿‡è¯¥é€‰é¡¹å¯ä»¥é…ç½®æ‰§è¡Œæ–‡ä»¶é“¾æ¥çš„åº“æ–‡ä»¶</li><li>ç¬¬ä¸€ä¸ªå‚æ•°ä¸<strong>add_exectuable</strong>ç›¸åŒï¼Œä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆèŠ‚ç‚¹ï¼‰åç§°</li><li>åé¢çš„å‚æ•°ä¸ºéœ€è¦é“¾æ¥çš„åº“ï¼Œä¾æ¬¡åˆ—å‡ºï¼Œç©ºæ ¼åˆ†éš”</li></ul></li><li><p><strong>add_dependencies</strong></p><ul><li>ç”¨äºè®¾ç½®ä¾èµ–</li><li>æœ‰æ—¶å€™éœ€è¦è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹ï¼Œæ¶ˆæ¯ç±»å‹ä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­äº§ç”Ÿç›¸åº”è¯­è¨€çš„ä»£ç ã€‚è‹¥ç¼–è¯‘çš„å¯æ‰§è¡Œæ–‡<br>ä»¶ä¾èµ–è¿™äº›åŠ¨æ€ç”Ÿæˆçš„ä»£ç ï¼Œåˆ™éœ€è¦æ·»åŠ ${PROJECT NAME}generate messages_cppé…ç½®</li></ul></li><li><p>è‡ªå®šä¹‰æ•°æ®ç±»å‹ï¼šæ¶ˆæ¯<strong>msg</strong>ã€æœåŠ¡<strong>srv</strong>ã€åŠ¨ä½œ<strong>action</strong></p><ul><li><strong>find_package</strong>(catkin REQUIRE COMPONENTS message_generation)</li><li><strong>catkin_package</strong>(CATKIN_DEPENDS message_runtime)</li><li><strong>add_message_files</strong>(FILES xxx.msg)</li><li><strong>add_service_files</strong>(FILES xxx.srv)</li><li><strong>add_action_files</strong>(FILES xxx.action)</li><li><strong>generate_messages</strong>(DEPENDENCIES std_msgs)</li></ul></li></ul><blockquote><p>CMakeLists.txtæ¨¡æ¿å‚è€ƒï¼š<a href="https://mybog.s3.bitiful.net/ros/zero/CMakeLists.txt">CMakeLists.txt</a></p><p>æ›´å¤šæ•™ç¨‹å‚è€ƒï¼š<a href="http://wiki.ros.org/catkin/CMakeLists.txt">catkin/CMakeLists.txt - ROS Wiki</a></p></blockquote><h3 id="3-2-ROS2">3.2 ROS2</h3><p>å¸¸ç”¨çš„<strong>ROS2</strong>ä¸­<strong>CMakeLists.txt</strong>æ¶æ„å¦‚ä¸‹</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>()<span class="comment">#CMakeçš„æœ€ä½ç‰ˆæœ¬å·</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">project</span>()     <span class="comment">#é¡¹ç›®åç§°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>()       <span class="comment">#æŸ¥æ‰¾ç³»ç»Ÿä¸­çš„ä¾èµ–é¡¹</span></span><br><span class="line"></span><br><span class="line">ament_target_dependencies()          <span class="comment">#ä¾èµ–äºå…¶ä»–ç›®æ ‡æ–‡ä»¶ï¼Œç¡®ä¿å…¶ä»–ç›®æ ‡å·²è¢«æ„å»º </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>()    <span class="comment">#ç”Ÿæˆå¯æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>()   <span class="comment">#ç”Ÿæˆå¯å®‰è£…ç›®æ ‡</span></span><br><span class="line"></span><br><span class="line">ament_package()<span class="comment">#ç”ŸæˆåŠŸèƒ½åŒ…</span></span><br><span class="line"></span><br><span class="line">rosidl_generate_interfaces()<span class="comment"># è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹æ¥å£</span></span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹æ¨¡æ¿å¦‚ä¸‹</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.5</span>)</span><br><span class="line"><span class="keyword">project</span>(test_c)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default to C99</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> CMAKE_C_STANDARD)</span><br><span class="line">  <span class="keyword">set</span>(CMAKE_C_STANDARD <span class="number">99</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Default to C++14</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">NOT</span> CMAKE_CXX_STANDARD)</span><br><span class="line">  <span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(CMAKE_COMPILER_IS_GNUCXX <span class="keyword">OR</span> CMAKE_CXX_COMPILER_ID <span class="keyword">MATCHES</span> <span class="string">&quot;Clang&quot;</span>)</span><br><span class="line">  <span class="keyword">add_compile_options</span>(-Wall -Wextra -Wpedantic)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># find dependencies</span></span><br><span class="line"><span class="keyword">find_package</span>(ament_cmake REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(rclcpp REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(std_msgs REQUIRED)</span><br><span class="line"><span class="comment"># uncomment the following section in order to fill in</span></span><br><span class="line"><span class="comment"># further dependencies manually.</span></span><br><span class="line"><span class="comment"># find_package(&lt;dependency&gt; REQUIRED)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(talker src/publisher_member_function.cpp)<span class="comment"># ä¿®æ”¹2</span></span><br><span class="line">ament_target_dependencies(talker rclcpp std_msgs)<span class="comment"># ä¿®æ”¹3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">install</span>(TARGETS</span><br><span class="line">  talker<span class="comment"># ä¿®æ”¹4</span></span><br><span class="line">  DESTINATION lib/<span class="variable">$&#123;PROJECT_NAME&#125;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(BUILD_TESTING)</span><br><span class="line">  <span class="keyword">find_package</span>(ament_lint_auto REQUIRED)</span><br><span class="line">  <span class="comment"># the following line skips the linter which checks for copyrights</span></span><br><span class="line">  <span class="comment"># uncomment the line when a copyright and license is not present in all source files</span></span><br><span class="line">  <span class="comment">#set(ament_cmake_copyright_FOUND TRUE)</span></span><br><span class="line">  <span class="comment"># the following line skips cpplint (only works in a git repo)</span></span><br><span class="line">  <span class="comment"># uncomment the line when this package is not in a git repo</span></span><br><span class="line">  <span class="comment">#set(ament_cmake_cpplint_FOUND TRUE)</span></span><br><span class="line">  ament_lint_auto_find_test_dependencies()</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹éœ€è¦æ·»åŠ é¡¹</span></span><br><span class="line"><span class="keyword">find_package</span>(geometry_msgs REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(rosidl_default_generators REQUIRED)</span><br><span class="line"></span><br><span class="line">rosidl_generate_interfaces(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  <span class="string">&quot;msg/Num.msg&quot;</span><span class="comment"># è‡ªå®šä¹‰1</span></span><br><span class="line">  <span class="string">&quot;msg/Sphere.msg&quot;</span><span class="comment"># è‡ªå®šä¹‰2</span></span><br><span class="line">  <span class="string">&quot;srv/AddThreeInts.srv&quot;</span>     <span class="comment"># è‡ªå®šä¹‰3</span></span><br><span class="line">  DEPENDENCIES geometry_msgs</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ament_package()</span><br></pre></td></tr></table></figure><blockquote><p>ç›¸è¾ƒäºåŸºäº<strong>catkin</strong>çš„<strong>CMake</strong>æ–‡ä»¶ï¼ŒåŸºäº<strong>ament</strong>çš„æ˜æ˜¾ç®€æ´å¾ˆå¤š</p></blockquote><p>å‡è®¾ä½ ç¼–å†™äº†<code>~/dev_ws/src/test.cpp</code>æ–‡ä»¶åï¼Œéœ€è¦ä¿®æ”¹çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>é“¾æ¥æºä»£ç </li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(<span class="keyword">test</span> src/<span class="keyword">test</span>.cpp)<span class="comment"># testä¸ºä½ è¾“å…¥èŠ‚ç‚¹åæ‰§è¡Œçš„åç§°ï¼Œå¦‚ros2 run test_c testï¼ˆå‰ä¸€ä¸ªtest_cä¸ºåŒ…åï¼Œåä¸€ä¸ªteståˆ™ä¸ºè¿™é‡Œçš„è®¾ç½®çš„åç§°ï¼Œä»£è¡¨å…·ä½“æ‰§è¡Œçš„ä»£ç ï¼‰</span></span><br><span class="line">ament_target_dependencies(<span class="keyword">test</span> rclcpp)<span class="comment"># æ·»åŠ ä¾èµ–é¡¹</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æ·»åŠ ä¸‹é¢è¿™ä¸¤è¡Œä»£ç çš„ç›®çš„æ˜¯è®©ç¼–è¯‘å™¨ç¼–è¯‘<code>~/dev_ws/src/test_c/test.cpp</code>è¿™ä¸ªæ–‡ä»¶</li></ol><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">install</span>(TARGETS</span><br><span class="line">  <span class="keyword">test</span></span><br><span class="line">  DESTINATION lib/<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å½“ä½ è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹æ—¶è¿˜éœ€è¦æ¶ˆæ¯ç±»å‹æ–‡ä»¶</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹éœ€è¦æ·»åŠ é¡¹</span></span><br><span class="line"><span class="comment"># ä¸‹é¢ä¸¤é¡¹æ˜¯å›ºå®šçš„ï¼Œgeometry_msgsæ˜¯ç”¨äºç”Ÿæˆæ¶ˆæ¯ä¾èµ–åŒ…</span></span><br><span class="line"><span class="keyword">find_package</span>(geometry_msgs REQUIRED)</span><br><span class="line"><span class="keyword">find_package</span>(rosidl_default_generators REQUIRED)</span><br><span class="line"></span><br><span class="line">rosidl_generate_interfaces(<span class="variable">$&#123;PROJECT_NAME&#125;</span></span><br><span class="line">  <span class="string">&quot;msg/Num.msg&quot;</span><span class="comment"># è‡ªå®šä¹‰1</span></span><br><span class="line">  <span class="string">&quot;msg/Sphere.msg&quot;</span><span class="comment"># è‡ªå®šä¹‰2</span></span><br><span class="line">  <span class="string">&quot;srv/AddThreeInts.srv&quot;</span>     <span class="comment"># è‡ªå®šä¹‰3</span></span><br><span class="line">  DEPENDENCIES geometry_msgs</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="4-package-xmlç¼–å†™">4. package.xmlç¼–å†™</h2><p><strong>package.xml</strong>çš„æ¡†æ¶å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">format</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>..<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>...<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">&quot;lanhanba@todo.todo&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">license</span>&gt;</span>...<span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>...<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>...<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>...<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build_type</span>&gt;</span>...<span class="tag">&lt;/<span class="name">build_type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ç›¸è¾ƒäº<strong>CMakeList.txt</strong>ï¼Œ<strong>package.xml</strong>çš„è¯­æ³•å°±ç®€å•è®¸å¤šï¼Œä¸”<strong>ROS1</strong>å’Œ<strong>ROS2</strong>çš„æ ‡ç­¾è¯­æ³•é€šç”¨</p><ul><li><strong>&lt;build_depend&gt;&lt;/build_depend&gt;</strong>: æ ‡ç­¾å®šä¹‰äº†åŠŸèƒ½åŒ…ä¸­ä»£ç ç¼–è¯‘æ—¶æ‰€ä¾èµ–çš„å…¶ä»–åŠŸèƒ½åŒ…</li><li><strong>&lt;exec_depend&gt;&lt;exec_depend&gt;</strong>: æ ‡ç­¾å®šä¹‰äº†åŠŸèƒ½åŒ…ä¸­å¯æ‰§è¡Œç¨‹åºè¿è¡Œæ—¶æ‰€ä¾èµ–çš„å…¶ä»–åŠŸèƒ½åŒ…</li><li><strong>è‡ªå®šä¹‰æ•°æ®ç±»å‹</strong>ï¼šè¯é¢˜æ¶ˆæ¯<strong>msg</strong>ã€æœåŠ¡æ•°æ®<strong>srv</strong>ã€åŠ¨ä½œæ•°æ®<strong>action</strong></li></ul></blockquote><p>æ¨¡æ¿å¦‚ä¸‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-model href=<span class="string">&quot;http://download.ros.org/schema/package_format3.xsd&quot;</span> schematypens=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">format</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>test_c<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>TODO: Package description<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maintainer</span> <span class="attr">email</span>=<span class="string">&quot;lanhanba@todo.todo&quot;</span>&gt;</span>lanhanba<span class="tag">&lt;/<span class="name">maintainer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">license</span>&gt;</span>TODO: License declaration<span class="tag">&lt;/<span class="name">license</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- ROS1 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>catkin<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>rospy<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">build_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_export_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">build_export_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_export_depend</span>&gt;</span>rospy<span class="tag">&lt;/<span class="name">build_export_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">build_export_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">build_export_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>roscpp<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>rospy<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exec_depend</span>&gt;</span>std_msgs<span class="tag">&lt;/<span class="name">exec_depend</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- ROS2_C++ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">buildtool_depend</span>&gt;</span>ament_cmake<span class="tag">&lt;/<span class="name">buildtool_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_lint_auto<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_lint_common<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build_type</span>&gt;</span>ament_cmake<span class="tag">&lt;/<span class="name">build_type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="comment">&lt;!-- ROS2_python --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_copyright<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_flake8<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>ament_pep257<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">test_depend</span>&gt;</span>python3-pytest<span class="tag">&lt;/<span class="name">test_depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">export</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build_type</span>&gt;</span>ament_python<span class="tag">&lt;/<span class="name">build_type</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">export</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!-- ROS2ä¸­C++åŠŸèƒ½åŒ…æ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹è¿˜éœ€æ·»åŠ ä¸‹é¢ä¸‰è¡Œï¼ˆå›ºå®šå½¢å¼ï¼Œå’Œä¸Šé¢çš„CMakeä¿®æ”¹æ­é…ä½¿ç”¨ï¼Œpythonä¸éœ€è¦ï¼‰ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">depend</span>&gt;</span>rosidl_default_generators<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">depend</span>&gt;</span>geometry_msgs<span class="tag">&lt;/<span class="name">depend</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">member_of_group</span>&gt;</span>rosidl_interface_packages<span class="tag">&lt;/<span class="name">member_of_group</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-å…¶ä»–â€“Setup-pyçš„ä¿®æ”¹">5. å…¶ä»–â€“Setup.pyçš„ä¿®æ”¹</h2><p>åœ¨<strong>ROS2-Python</strong>åŠŸèƒ½åŒ…ä¸­ï¼Œå¦‚æœæ·»åŠ ç±»ä¼¼<code>~/dev_ws/src/test_python/test.py</code>çš„<strong>python</strong>æ–‡ä»¶ï¼Œåˆ™éœ€è¦å¯¹åŠŸèƒ½åŒ…ä¸­çš„<strong><a href="http://Setup.py">Setup.py</a></strong>è¿›è¡Œå¦‚ä¸‹çš„ä¿®æ”¹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> setuptools <span class="keyword">import</span> setup</span><br><span class="line"></span><br><span class="line">package_name = <span class="string">&#x27;test_python&#x27;</span></span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    name=package_name,</span><br><span class="line">    version=<span class="string">&#x27;0.0.0&#x27;</span>,</span><br><span class="line">    packages=[package_name],</span><br><span class="line">    data_files=[</span><br><span class="line">        (<span class="string">&#x27;share/ament_index/resource_index/packages&#x27;</span>,</span><br><span class="line">            [<span class="string">&#x27;resource/&#x27;</span> + package_name]),</span><br><span class="line">        (<span class="string">&#x27;share/&#x27;</span> + package_name, [<span class="string">&#x27;package.xml&#x27;</span>]),</span><br><span class="line">    ],</span><br><span class="line">    install_requires=[<span class="string">&#x27;setuptools&#x27;</span>],</span><br><span class="line">    zip_safe=<span class="literal">True</span>,</span><br><span class="line">    maintainer=<span class="string">&#x27;lanhanba&#x27;</span>,</span><br><span class="line">    maintainer_email=<span class="string">&#x27;lanhanba@todo.todo&#x27;</span>,</span><br><span class="line">    description=<span class="string">&#x27;TODO: Package description&#x27;</span>,</span><br><span class="line">    license=<span class="string">&#x27;TODO: License declaration&#x27;</span>,</span><br><span class="line">    tests_require=[<span class="string">&#x27;pytest&#x27;</span>],</span><br><span class="line">    entry_points=&#123;</span><br><span class="line">        <span class="string">&#x27;console_scripts&#x27;</span>: [</span><br><span class="line">            <span class="comment"># ç»“æ„å¦‚ä¸‹ï¼šèŠ‚ç‚¹å = åŠŸèƒ½åŒ…å.ä»£ç æ–‡ä»¶.æ‰§è¡Œå…¥å£å‡½æ•°å(ä¸€èˆ¬æ‰§è¡Œå…¥å£å‡½æ•°åéƒ½æ˜¯mainï¼Œä¹Ÿå°±æ˜¯è¯´pythonä»£ç ä¸­ä¸€èˆ¬è¦æœ‰mainå‡½æ•°)</span></span><br><span class="line">            <span class="comment"># é€šè¿‡ros2 run test_python test æ¥æ‰§è¡Œtest_python.test:mainä¸‹çš„å‡½æ•°</span></span><br><span class="line">            <span class="comment"># å¦‚æœæœ‰å¤šä¸ªpythonä»£ç æ–‡ä»¶éƒ½éœ€è¦ä¸€ä¸€æ·»åŠ ï¼Œåç§°ä¸èƒ½ä¸€æ ·</span></span><br><span class="line">            <span class="string">&quot;test = test_python.test:main&quot;</span>,</span><br><span class="line">            <span class="string">&quot;test2 = test_python.test2:main&quot;</span></span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p><strong>å‚è€ƒï¼š</strong></p><ul><li><p><a href="http://wiki.ros.org/catkin/CMakeLists.txt">catkin/CMakeLists.txt - ROS Wiki</a></p></li><li><p><a href="https://docs.ros.org/en/humble/Tutorials">CMakeLists.txt - ROS Humble Wiki</a></p></li><li><p><a href="https://zhuanlan.zhihu.com/p/94579820">ã€ROS å­¦ä¹ ç¬”è®°ã€‘CMakeLists.txt ä¸ package.xml - çŸ¥ä¹ (zhihu.com)</a></p></li><li><p><a href="https://blog.csdn.net/shoufei403/article/details/125831552">è¯¦ç»†åˆ†æä¸€ä¸ªROS2 CMakeLists.txtæ–‡ä»¶_é¦–é£çˆ±ç©æœºå™¨äººçš„åšå®¢-CSDNåšå®¢</a></p></li></ul></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1-CMakeLists-txtä¸package-xmlçš„ä½œç”¨&quot;&gt;1. CMakeLists.txtä¸package.xmlçš„ä½œç”¨&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;strong&gt;ROS&lt;/strong&gt;ç³»ç»Ÿçš„åŠŸèƒ½åŒ…ä¸­ è¦åŒ…å« &lt;strong&gt;CMakeLists.txt&lt;/s</summary>
      
    
    
    
    <category term="çŸ¥è¯†åˆ†äº«" scheme="https://www.mgodmonkey.cn/categories/%E7%9F%A5%E8%AF%86%E5%88%86%E4%BA%AB/"/>
    
    
    <category term="ros" scheme="https://www.mgodmonkey.cn/tags/ros/"/>
    
  </entry>
  
</feed>
